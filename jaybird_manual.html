<!DOCTYPE html>
<html lang="">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="keywords" content="jaybird, firebird, jdbc, sql, database, java">
<meta name="author" content="Roman Rokytskyy, Mark Rotteveel">
<title>Jaybird JDBC Driver Java Programmer&#8217;s Manual</title>
<style>
/*! Firebird documentation stylesheet, derived from Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
@import url(https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400,700&display=swap);
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:rgba(0,0,0,.85);font-weight:normal;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,h7,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,h7{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:bold;font-style:normal;color:rgba(0,0,0,.85);text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small,h7 small{font-size:60%;color:rgba(77,77,77,.85);line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6,h7{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:normal;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,h7{line-height:1.2}
    h1{font-size:2.75em}
    h2{font-size:2.3125em}
    h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
    h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#FFEFD5}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,h7{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong,h7 strong{font-weight:bold}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre,h1,h2,h3,#toctitle,h4,h5,h6,h7):not([class^=L])>code{font-size:.9375em;font-style:normal!important;background:inherit;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:normal}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:normal}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#preheader>div.fb-logo,#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:1.25em;padding-right:1.25em}
#preheader>div.fb-logo:before,#preheader > div.fb-logo:after,#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#preheader>div.fb-logo:after,#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:rgba(0,0,0,.85);font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
    body.toc2{padding-left:15em;padding-right:0}
    #toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
    #toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
    #toc.toc2>ul{font-size:.9em;margin-bottom:0}
    #toc.toc2 ul ul{margin-left:0;padding-left:1em}
    #toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
    body.toc2.toc-right{padding-left:0;padding-right:15em}
    body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
    #toc.toc2{width:20em}
    #toc.toc2 #toctitle{font-size:1.375em}
    #toc.toc2>ul{font-size:.95em}
    #toc.toc2 ul ul{padding-left:1.25em}
    body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
    .sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor,h7>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:normal}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before,h7>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover,h7:hover>a.anchor,h7>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link,h7>a.link{color:rgba(0,0,0,.85);text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover,h7>a.link:hover{color:rgba(0,0,0,.85)}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1.0625rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:rgba(0,0,0,.85);margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#FFFFF7}
.literalblock.output pre{color:#FFFFF7;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#FFFFF7}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:rgba(0,0,0,.85);text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
table.stripes-none>*>tr{background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#FFEFD5}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
dl dt code{font-weight:bold}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:normal;font-style:normal}
.unstyled dl dt code{font-weight:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
h1 code,h2 code,h3 code,#toctitle code,.sidebarblock>.content>.title code,h4 code,h5 code,h6 code,h7 code{font-size:inherit}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
div.sect1,div.sect2,div.sect3,div.sect4,div.sect5,div.sect6{margin-top:2em}
div#preheader>div.fb-docindex table{background-color:#f8f8f7;width:100%}
div#preheader table{border:none}
#tocbot{overflow-y:auto}
#tocbot>.toc-list{overflow:hidden;position:relative}
#tocbot>.toc-list li{list-style:none}
#tocbot .toc-list{margin:0;padding-left:10px}
@media screen {#tocbot a.toc-link{height:100%}
    #tocbot .is-collapsible{overflow:hidden}
    #tocbot .is-collapsed{max-height:0}
    #tocbot .is-position-fixed{position:fixed!important;top:0}
    #tocbot .is-active-link{font-weight:700}
    #tocbot .toc-link::before{background-color:#EEE;content:' ';display:inline-block;height:inherit;left:0;margin-top:-1px;position:absolute;width:2px}
    #tocbot .is-active-link::before{background-color:#54BC4B}}
@media print{#tocbot #tocbot a.toc-link.node-name--H4{display:none}}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
    html{font-size:80%}
    a{color:inherit!important;text-decoration:underline!important}
    a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
    a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
    abbr[title]{border-bottom:1px dotted}
    abbr[title]::after{content:" (" attr(title) ")"}
    pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
    thead{display:table-header-group}
    svg{max-width:100%}
    p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
    h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
    #header,#content,#footnotes,#footer{max-width:none}
    #toc,.sidebarblock,.exampleblock>.content{background:none!important}
    #toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
    body.book #header{text-align:center}
    body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
    body.book #header .details{border:0!important;display:block;padding:0!important}
    body.book #header .details span:first-child{margin-left:0!important}
    body.book #header .details br{display:block}
    body.book #header .details br+span::before{content:none!important}
    body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
    body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
    .listingblock code[data-lang]::before{display:block}
    #footer{padding:0 1.25em}
    .hide-on-print{display:none!important}
    .print-only{display:block!important}
    .hide-for-print{display:none!important}
    .show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
    .sect1{padding:0!important}
    .sect1+.sect1{border:0}
    #footer{background:none}
    #footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
/* Additional Firebird customizations */
.hdlist.compact p{margin-bottom:0}
.hdlist td.hdlist1,.hdlist td.hdlist2{padding-bottom:0}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<style>
em.since{font-size:smaller;}
em.since::before{content:"Since: ";font-weight:bold;}
em.until{font-size:smaller;}
em.until::before{content:"Removed in: ";font-weight:bold;}
table.wide-table{font-size:xx-small}
</style>
<link rel="canonical" href="https://firebirdsql.github.io/jaybird-manual/jaybird_manual.html"/>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Jaybird JDBC Driver Java Programmer&#8217;s Manual</h1>
<div class="details">
<span id="author" class="author">Roman Rokytskyy</span><br>
<span id="author2" class="author">Mark Rotteveel</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_this_manual">1.1. This manual</a></li>
<li><a href="#_history">1.2. History</a></li>
<li><a href="#_jaybird_architecture">1.3. Jaybird Architecture</a></li>
<li><a href="#distribution">1.4. Jaybird Distribution</a></li>
<li><a href="#_quality_assurance">1.5. Quality Assurance</a></li>
<li><a href="#_useful_resources">1.6. Useful resources</a></li>
<li><a href="#_contributing">1.7. Contributing</a></li>
</ul>
</li>
<li><a href="#user-manual">User Manual</a>
<ul class="sectlevel1">
<li><a href="#connection">2. Obtaining a connection</a>
<ul class="sectlevel2">
<li><a href="#connection-drivermanager">2.1. Obtaining connection java.sql.DriverManager</a></li>
<li><a href="#driver-types">2.2. Driver types</a></li>
<li><a href="#connection-pooling">2.3. Connection Pooling</a></li>
<li><a href="#data-source-implementation">2.4. The javax.sql.DataSource implementation</a></li>
<li><a href="#connection-pool-data-source-implementation">2.5. The javax.sql.ConnectionPoolDataSource implementation</a></li>
<li><a href="#xa-data-source-implementation">2.6. The javax.sql.XADataSource implementation</a></li>
</ul>
</li>
<li><a href="#exceptionhandling">3. Handling exceptions</a>
<ul class="sectlevel2">
<li><a href="#_working_with_exceptions">3.1. Working with exceptions</a></li>
<li><a href="#_warnings">3.2. Warnings</a></li>
<li><a href="#_java_sql_sqlexception_in_jaybird">3.3. java.sql.SQLException in Jaybird</a></li>
<li><a href="#_sql_states">3.4. SQL states</a></li>
<li><a href="#_useful_firebird_error_codes">3.5. Useful Firebird error codes</a></li>
</ul>
</li>
<li><a href="#statements">4. Executing statements</a>
<ul class="sectlevel2">
<li><a href="#_the_java_sql_statement_interface">4.1. The java.sql.Statement interface</a></li>
<li><a href="#_statement_behind_the_scenes">4.2. Statement behind the scenes</a></li>
<li><a href="#_the_java_sql_preparedstatement_interface">4.3. The java.sql.PreparedStatement interface</a></li>
<li><a href="#callable-statement">4.4. The java.sql.CallableStatement interface</a></li>
<li><a href="#_batch_updates">4.5. Batch Updates</a></li>
<li><a href="#_escape_syntax">4.6. Escape Syntax</a></li>
</ul>
</li>
<li><a href="#resultsets">5. Working with result sets</a>
<ul class="sectlevel2">
<li><a href="#_resultset_properties">5.1. ResultSet properties</a></li>
<li><a href="#_resultset_manipulation">5.2. ResultSet manipulation</a></li>
</ul>
</li>
<li><a href="#transactions">6. Using transactions</a>
<ul class="sectlevel2">
<li><a href="#_jdbc_transactions">6.1. JDBC transactions</a></li>
<li><a href="#_auto_commit_mode">6.2. Auto-commit mode</a></li>
<li><a href="#_read_only_transactions">6.3. Read-only Transactions</a></li>
<li><a href="#transactions-isolation-levels">6.4. Transaction Isolation Levels</a></li>
<li><a href="#transactions-savepoints">6.5. Savepoints</a></li>
<li><a href="#transactions-tpb">6.6. Transaction Parameter Buffer</a></li>
<li><a href="#transactions-table-reservation">6.7. Table Reservation</a></li>
<li><a href="#transactions-mgmt-stmts">6.8. Transaction management statements</a></li>
</ul>
</li>
<li><a href="#services">7. Working with Services</a>
<ul class="sectlevel2">
<li><a href="#servicemanager">7.1. ServiceManager</a></li>
<li><a href="#services-backup-and-restore">7.2. Backup and restore</a></li>
<li><a href="#_user_management">7.3. User management</a></li>
<li><a href="#_database_maintenance">7.4. Database maintenance</a></li>
<li><a href="#services-table-statistics-manager">7.5. Table statistics of a connection (experimental)</a></li>
<li><a href="#_database_statistics">7.6. Database statistics</a></li>
</ul>
</li>
<li><a href="#events">8. Working with Events</a>
<ul class="sectlevel2">
<li><a href="#_database_events">8.1. Database events</a></li>
<li><a href="#_posting_events">8.2. Posting events</a></li>
<li><a href="#_subscribing_to_events">8.3. Subscribing to events</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#reference">Reference Manual</a>
<ul class="sectlevel1">
<li><a href="#ref-connection">9. Connection reference</a>
<ul class="sectlevel2">
<li><a href="#ref-auth-plugins">9.1. Authentication plugins</a></li>
<li><a href="#ref-wirecrypt">9.2. Wire encryption support</a></li>
<li><a href="#ref-wirecompression">9.3. Wire compression</a></li>
<li><a href="#ref-dbcrypt">9.4. Database encryption support</a></li>
<li><a href="#ref-defaultholdable">9.5. Default holdable result sets</a></li>
<li><a href="#ref-firebirdautocommit">9.6. Firebird auto commit mode (experimental)</a></li>
<li><a href="#ref-processinfo">9.7. Process information</a></li>
<li><a href="#ref-datatypebind">9.8. Data type bind support</a></li>
<li><a href="#ref-enable-protocol">9.9. Enabling unsupported protocol versions</a></li>
<li><a href="#ref-catalog-as-package">9.10. Opt-in feature for package information in DatabaseMetaData</a></li>
<li><a href="#ref-client-info">9.11. Client info properties</a></li>
<li><a href="#ref-create-database-if-not-exist">9.12. Create database if it does not exist</a></li>
<li><a href="#ref-report-sql-warnings">9.13. Reporting of <code>SQLWarning</code>s</a></li>
<li><a href="#ref-socket-factory">9.14. Custom socket factory</a></li>
</ul>
</li>
<li><a href="#ref-statement">10. Statement reference</a>
<ul class="sectlevel2">
<li><a href="#ref-async-fetch">10.1. Async fetch</a></li>
<li><a href="#ref-generatedkeys">10.2. Generated keys retrieval</a></li>
<li><a href="#ref-inline-blob">10.3. Inline blobs</a></li>
<li><a href="#ref-callable-ignore-proctype">10.4. Connection property ignoreProcedureType</a></li>
<li><a href="#ref-scrollable-cursor">10.5. Connection property scrollableCursor</a></li>
<li><a href="#ref-batch-use-server-batch">10.6. Connection property useServerBatch</a></li>
<li><a href="#ref-batch-server-batch-buffer-size">10.7. Connection property serverBatchBufferSize</a></li>
<li><a href="#ref-allowtxstmts">10.8. Connection property allowTxStmts</a></li>
<li><a href="#ref-extendedmetadata">10.9. Connection property extendedMetadata</a></li>
</ul>
</li>
<li><a href="#ref-general">11. General</a>
<ul class="sectlevel2">
<li><a href="#ref-logging">11.1. Logging</a></li>
</ul>
</li>
<li><a href="#ref-types">12. Datatype reference</a>
<ul class="sectlevel2">
<li><a href="#ref-binary">12.1. Binary types BINARY/VARBINARY</a></li>
<li><a href="#ref-boolean">12.2. Type BOOLEAN</a></li>
<li><a href="#ref-datetime">12.3. Date/time types</a></li>
<li><a href="#ref-decfloat">12.4. Decimal floating point type DECFLOAT</a></li>
<li><a href="#ref-decimal">12.5. Exact numeric types DECIMAL/NUMERIC</a></li>
<li><a href="#ref-int128">12.6. Type INT128</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_appendices">Appendices</a>
<ul class="sectlevel1">
<li><a href="#connectionproperties">Appendix A: Extended connection properties</a>
<ul class="sectlevel2">
<li><a href="#connectionproperties-auth">A.1. Authentication and security properties</a></li>
<li><a href="#connectionproperties-other">A.2. Other properties</a></li>
<li><a href="#connectionproperties-isolation-levels">A.3. Transaction isolation levels</a></li>
</ul>
</li>
<li><a href="#systemproperties">Appendix B: System properties</a>
<ul class="sectlevel2">
<li><a href="#systemproperties-logging">B.1. Logging</a></li>
<li><a href="#systemproperties-processinfo">B.2. Process information</a></li>
<li><a href="#systemproperties-charset">B.3. Character set defaults</a></li>
<li><a href="#systemproperties-default-async-fetch">B.4. Default <code>asyncFetch</code> value</a></li>
<li><a href="#systemproperties-default-enable-protocol">B.5. Default <code>enableProtocol</code> value</a></li>
<li><a href="#systemproperties-default-inline-blob">B.6. Default inline blob property values</a></li>
<li><a href="#systemproperties-default-report-sql-warnings">B.7. Default <code>reportSQLWarnings</code> value</a></li>
<li><a href="#systemproperties-wire-buffers">B.8. Wire protocol buffer sizes</a></li>
<li><a href="#systemproperties-other">B.9. Other properties</a></li>
<li><a href="#systemproperties-java">B.10. Useful Java system properties</a></li>
</ul>
</li>
<li><a href="#datatypeconversion">Appendix C: Data Type Conversion Table</a>
<ul class="sectlevel2">
<li><a href="#_mapping_between_jdbc_firebird_and_java_types">C.1. Mapping between JDBC, Firebird and Java Types</a></li>
<li><a href="#_data_type_conversions">C.2. Data Type Conversions</a></li>
</ul>
</li>
<li><a href="#characterencoding">Appendix D: Character Encodings</a>
<ul class="sectlevel2">
<li><a href="#_encodings_types">D.1. Encodings Types</a></li>
<li><a href="#_encodings_in_java">D.2. Encodings in Java</a></li>
<li><a href="#_available_encodings">D.3. Available Encodings</a></li>
</ul>
</li>
<li><a href="#jdbcescape">Appendix E: Supported JDBC Scalar Functions</a>
<ul class="sectlevel2">
<li><a href="#_numeric_functions">E.1. Numeric Functions</a></li>
<li><a href="#_string_functions">E.2. String Functions</a></li>
<li><a href="#_time_and_date_functions">E.3. Time and Date Functions</a></li>
<li><a href="#_system_functions">E.4. System Functions</a></li>
<li><a href="#_conversion_functions">E.5. Conversion Functions</a></li>
</ul>
</li>
<li><a href="#jaybirdversions">Appendix F: Jaybird versions</a>
<ul class="sectlevel2">
<li><a href="#jb6">F.1. Jaybird 6</a></li>
<li><a href="#jb5">F.2. Jaybird 5</a></li>
<li><a href="#jb4">F.3. Jaybird 4</a></li>
<li><a href="#jb3">F.4. Jaybird 3</a></li>
<li><a href="#jb22">F.5. Jaybird 2.2</a></li>
</ul>
</li>
<li><a href="#license">Appendix G: License</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is a snapshot version of the Jaybird manual. It may contain obvious (and not so obvious)
errors, or it may still miss information on more recent features. If you find any problems, don&#8217;t
hesitate to report them on <a href="https://github.com/FirebirdSQL/jaybird-manual/issues" class="bare" target="_blank" rel="noopener">https://github.com/FirebirdSQL/jaybird-manual/issues</a> or submit a pull
request with the fix.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jaybird is a JDBC driver to connect to the Firebird database server.</p>
</div>
<div class="paragraph">
<p>Jaybird is a driver that provides both Type 4 (pure Java) and Type 2 (native binding) support.
The type 2 driver includes support for Firebird Embedded.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">JCA&#8201;&#8212;&#8201;Java Connector Architecture</div>
<div class="paragraph">
<p>Jaybird 4 and earlier are based on both the well-known JDBC standard and the JCA&#8201;&#8212;&#8201;Java Connector Architecture&#8201;&#8212;&#8201;standard for application server connections to enterprise information systems.
The JCA standard specifies an architecture in which an application server can cooperate with a driver so that the application server manages transactions, security, and resource pooling, and the driver supplies only the connection functionality.</p>
</div>
<div class="paragraph">
<p>The JCA implementation was removed in Jaybird 5, and Jaybird is now only a JDBC driver.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_this_manual"><a class="anchor" href="#_this_manual"></a>1.1. This manual</h3>
<div class="paragraph">
<p>This manual covers Jaybird 6 and may use Java 17 and Firebird 4.0 specific features, but most examples and information also apply to previous versions of Jaybird, Firebird and Java.
Features that were removed in Jaybird 3 or earlier are not covered.</p>
</div>
<div class="paragraph">
<p>New or removed features are tagged with the version that introduced a feature (e.g. <em class="since">Jaybird 5</em>) or removed feature (e.g. <em class="until">Jaybird 5</em>).
This tagging is only done for features introduced (or removed) <em>after</em> Jaybird 4.0.0, or in Firebird 3.0 or later.</p>
</div>
<div class="paragraph">
<p>This manual may include documentation of features of&#8201;&#8212;&#8201;possibly unreleased&#8201;&#8212;&#8201;Jaybird versions later than 6 to simplify manual maintenance and versioning.</p>
</div>
</div>
<div class="sect2">
<h3 id="_history"><a class="anchor" href="#_history"></a>1.2. History</h3>
<div class="paragraph">
<p>When Borland released an open-source version of the InterBase RDBMS, it included sources for a type 3 JDBC driver called InterClient.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>
However, due to some inherent limitations of the InterBase (and later Firebird) client library, it was decided that the type 3 driver was a dead end.
Instead, the Firebird team decided to develop a pure Java implementation of the wire protocol.
This implementation became the basis for Jaybird, a pure Java driver for Firebird relational database.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jaybird_architecture"><a class="anchor" href="#_jaybird_architecture"></a>1.3. Jaybird Architecture</h3>
<div class="paragraph">
<p>The Jaybird driver consists of three layers, each of which is
responsible for its part of the functionality.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The GDS layer represents a Java translation of the Firebird API.
It is represented by a number of interfaces and classes from the <code>org.firebirdsql.gds</code> package (and sub-packages).</p>
<div class="paragraph">
<p>This API is implemented by a number of plugins that provide the pure java, native,
local, and embedded implementations of the driver.</p>
</div>
</li>
<li>
<p><em class="until">Jaybird 5</em> The JCA layer represents the heart of the driver.
Here all connection and transaction management happens.
Additionally, this layer adapts the GDS API and proxies the calls to the GDS implementation.</p>
<div class="paragraph">
<p>The JCA layer is an implementation of the Java Connector Architecture specification.</p>
</div>
</li>
<li>
<p><em class="since">Jaybird 5</em> The XCA layer is a replacement of the JCA layer of previous versions.</p>
</li>
<li>
<p>The JDBC layer is an implementation of the JDBC specification.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, the Services API allows you to manage the database and the server itself.
The manager component represents a JMX compatible implementation that utilizes the Services API.
Currently, only calls to create and drop database are available in the Manager component, other classes provide features for database backup/restore, user management, statistics gathering, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="distribution"><a class="anchor" href="#distribution"></a>1.4. Jaybird Distribution</h3>
<div class="paragraph">
<p>Jaybird 6 supports Firebird 3.0 and higher.
See <a href="#jaybirdversions">Jaybird versions</a> for detailed information on supported Java and Firebird versions per Jaybird version.</p>
</div>
<div class="paragraph">
<p>The latest version of Jaybird can be downloaded from <a href="https://firebirdsql.org/en/jdbc-driver/" class="bare" target="_blank" rel="noopener">https://firebirdsql.org/en/jdbc-driver/</a></p>
</div>
<div class="sect3">
<h4 id="distribution-maven"><a class="anchor" href="#distribution-maven"></a>1.4.1. Maven</h4>
<div class="paragraph">
<p>Alternatively, you can use maven to automatically download Jaybird and its dependencies.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 is available from Maven central:</p>
</div>
<div class="paragraph">
<p>Groupid: <code>org.firebirdsql.jdbc</code>,<br>
Artifactid: <code>jaybird</code>,<br>
Version: <code>6.0.3</code></p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="title">Main Jaybird artifact</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;
  &lt;version&gt;6.0.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use ChaCha64 wire encryption, you need to explicitly include <code>chacha64-plugin</code> as a dependency:</p>
</div>
<div class="listingblock">
<div class="title">ChaCha64 wire encryption plugin</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;chacha64-plugin&lt;/artifactId&gt;
  &lt;version&gt;6.0.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use Type 2 support (native or embedded), you need to explicitly include <code>jaybird-native</code> as a dependency:</p>
</div>
<div class="listingblock">
<div class="title">Jaybird native artifact (native and embedded protocol)</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird-native&lt;/artifactId&gt;
  &lt;version&gt;6.0.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Firebird client library is available as a Maven dependencies, see <a href="#driver-native-maven">Maven dependency for native client</a>.
In the future, a Maven dependency for Firebird embedded may become available as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="distribution-gradle"><a class="anchor" href="#distribution-gradle"></a>1.4.2. Gradle</h4>
<div class="paragraph">
<p>See also <a href="#distribution-maven">Maven</a>.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="title">Main Jaybird artifact</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">implementation 'org.firebirdsql.jdbc:jaybird:6.0.3'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ChaCha64 wire encryption plugin</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">implementation 'org.firebirdsql.jdbc:chacha64-plugin:6.0.3'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Jaybird native artifact (native and embedded protocol)</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">implementation 'org.firebirdsql.jdbc:jaybird-native:6.0.3'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quality_assurance"><a class="anchor" href="#_quality_assurance"></a>1.5. Quality Assurance</h3>
<div class="paragraph">
<p>The Jaybird team uses JUnit test cases to assure the quality of the released driver.
During development unit tests are extensively used.
Committing a code change to the source control is not allowed until it passes all existing unit tests.
Each reproducible bug usually gets its own test case.
This guarantees that a clean check out can be compiled and will not contain any previously discovered and fixed bugs.</p>
</div>
<div class="paragraph">
<p>Currently, there are more than 10,000 test cases covering most of the driver code.
A subset of the tests are automatically run&#8201;&#8212;&#8201;through a GitHub Action&#8201;&#8212;&#8201;for each push to the repository.</p>
</div>
</div>
<div class="sect2">
<h3 id="_useful_resources"><a class="anchor" href="#_useful_resources"></a>1.6. Useful resources</h3>
<div class="sect3">
<h4 id="_jdbc"><a class="anchor" href="#_jdbc"></a>1.6.1. JDBC</h4>
<div class="paragraph">
<p>For JDBC documentation, see <a href="https://www.oracle.com/java/technologies/javase/javase-tech-database.html" target="_blank" rel="noopener">Java SE Technologies - Database</a>.</p>
</div>
<div class="paragraph">
<p>For the JDBC specification, see <a href="https://jcp.org/en/jsr/detail?id=221" target="_blank" rel="noopener">JSR 221: JDBC<sup>TM</sup> 4.0 API Specification</a> (covers JDBC 4.0 - 4.3, e.g. JDBC 4.3 is &#8220;Maintenance Release 3&#8221;).</p>
</div>
</div>
<div class="sect3">
<h4 id="_firebird"><a class="anchor" href="#_firebird"></a>1.6.2. Firebird</h4>
<div class="paragraph">
<p>General information about the Firebird database is available from the Firebird website (<a href="https://firebirdsql.org/" class="bare" target="_blank" rel="noopener">https://firebirdsql.org/</a>).</p>
</div>
<div class="paragraph">
<p>For information about using SQL in Firebird, see the <a href="https://firebirdsql.org/file/documentation/html/en/refdocs/fblangref50/firebird-50-language-reference.html" target="_blank" rel="noopener">Firebird 5.0 Language Reference</a> and other documents available from the <a href="https://firebirdsql.org/en/reference-manuals/" target="_blank" rel="noopener">Reference Manuals</a> section of the Firebird website.</p>
</div>
</div>
<div class="sect3">
<h4 id="_jaybird_support"><a class="anchor" href="#_jaybird_support"></a>1.6.3. Jaybird Support</h4>
<div class="paragraph">
<p>Support for Jaybird is available through the following channels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java Google Group</a> and corresponding mailing list <a href="mailto:firebird-java@googlegroups.com">firebird-java@googlegroups.com</a></p>
<div class="paragraph">
<p>You can subscribe to the mailing list by sending an email to <a href="mailto:firebird-java+subscribe@googlegroups.com">firebird-java+subscribe@googlegroups.com</a> (this does not require a Google account).
Alternatively, you can join the group at the <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java Google Group</a> (this requires a Google account).</p>
</div>
</li>
<li>
<p>On <a href="https://firebirdsql.org/docs/drivers/java/faq.html" target="_blank" rel="noopener">Jaybird Frequently Asked Questions</a>.</p>
</li>
<li>
<p>On <a href="https://github.com/FirebirdSQL/jaybird/wiki/" target="_blank" rel="noopener">Jaybird wiki</a>.</p>
</li>
<li>
<p>On <a href="https://stackoverflow.com/" target="_blank" rel="noopener">Stack Overflow</a>, please tag your questions with
<strong>jaybird</strong> and <strong>firebird</strong></p>
<div class="paragraph">
<p>Please make sure to familiarize yourself with the rules and expectations of Stack Overflow before asking,
see <a href="https://stackoverflow.com/tour" target="_blank" rel="noopener">Stack Overflow Tour</a> and <a href="https://stackoverflow.com/help/asking" target="_blank" rel="noopener">Help Center: Asking</a></p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contributing"><a class="anchor" href="#_contributing"></a>1.7. Contributing</h3>
<div class="paragraph">
<p>There are several ways you can contribute to Jaybird or Firebird in general:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Participate on the <a href="https://firebirdsql.org/en/mailing-lists/" target="_blank" rel="noopener">mailing lists</a></p>
</li>
<li>
<p>Report bugs or submit patches on the tracker (see <a href="#intro-reporting-bugs">Reporting Bugs</a>)</p>
</li>
<li>
<p>Create pull requests on GitHub (<a href="https://github.com/FirebirdSQL/jaybird" class="bare" target="_blank" rel="noopener">https://github.com/FirebirdSQL/jaybird</a>)</p>
</li>
<li>
<p>Become a developer (for Jaybird contact us on <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java</a>, for Firebird in general, use the <a href="https://groups.google.com/g/firebird-devel" target="_blank" rel="noopener">firebird-devel Google Group</a>)</p>
</li>
<li>
<p>Become a paying Associate, Partner or sponsor of the Firebird Foundation (see <a href="https://firebirdsql.org/en/firebird-foundation/" class="bare" target="_blank" rel="noopener">https://firebirdsql.org/en/firebird-foundation/</a>)</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="intro-reporting-bugs"><a class="anchor" href="#intro-reporting-bugs"></a>1.7.1. Reporting Bugs</h4>
<div class="paragraph">
<p>The developers follow the <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java Google Group</a> and mailing list.
Join the list and post information about suspected bugs.
List members may be able to help out to determine if it is an actual bug, provide a workaround and get you going again, whereas bug fixes might take a while.</p>
</div>
<div class="paragraph">
<p>You can report bugs in the <a href="https://github.com/FirebirdSQL/jaybird/issues" target="_blank" rel="noopener">Jaybird bug tracker</a> on GitHub.</p>
</div>
<div class="paragraph">
<p>When reporting bugs, please provide a minimal, but complete reproduction, including databases and source code to reproduce the problem.
Patches or pull requests to fix bugs are also appreciated.
Make sure the patch is against a recent master version of the code.
You can also fork the <a href="https://github.com/FirebirdSQL/jaybird" target="_blank" rel="noopener">jaybird repository</a> and create pull requests.</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="user-manual" class="sect0"><a class="anchor" href="#user-manual"></a>User Manual</h1>
<div class="sect1">
<h2 id="connection"><a class="anchor" href="#connection"></a>2. Obtaining a connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jaybird is a regular JDBC driver and supports two primary ways to obtain connection: via <a href="#connection-drivermanager"><code>java.sql.DriverManager</code></a> and via <a href="#connection-datasource">an implementation of the <code>javax.sql.DataSource</code> interface</a>.</p>
</div>
<div class="sect2">
<h3 id="connection-drivermanager"><a class="anchor" href="#connection-drivermanager"></a>2.1. Obtaining connection java.sql.DriverManager</h3>
<div class="paragraph">
<p><code>java.sql.DriverManager</code> is a database connection factory introduced with JDBC 1.
It is based on the concept of the JDBC URL, a string that uniquely identifies the database to connect.
The driver manager then checks which driver(s)&#8201;&#8212;&#8201;if any&#8201;&#8212;&#8201;can establish a connection.</p>
</div>
<div class="paragraph">
<p>There is also support to specify additional connection parameters, like username and password.</p>
</div>
<div class="paragraph">
<p>A JDBC URL consists of three parts:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>jdbc:firebird://localhost:3050/c:/database/example.fdb</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jdbc</code><br>
JDBC protocol</p>
</li>
<li>
<p><code>firebird</code> (also supported: <code>firebirdsql</code>)<br>
JDBC subprotocol, identifies driver to use, in this case Jaybird</p>
</li>
<li>
<p><code>//localhost:3050/c:/database/example.fdb</code></p>
<div class="paragraph">
<p>This is a driver-specific part, and identifies the database for the driver to connect, in the case of Jaybird that is <code>//&lt;host&gt;:&lt;port&gt;/&lt;path to database&gt;</code></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first part&#8201;&#8212;&#8201;<code>jdbc:firebird:</code> or <code>jdbc:firebirdsql:</code>&#8201;&#8212;&#8201;is required by JDBC, and specifies the so-called protocol and subprotocol for the JDBC connection.
In other words, it specifies the type of connection that the application wants to obtain, in this example, a connection to a Firebird database.</p>
</div>
<div class="paragraph">
<p>An example of obtaining a connection is shown below.</p>
</div>
<div class="listingblock">
<div class="title">Simple example to obtain a JDBC connection</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package hello;

import java.sql.*;

public class HelloServer {

  public static void main(String[] args) throws Exception {
    Class.forName("org.firebirdsql.jdbc.FBDriver"); <i class="conum" data-value="1"></i><b>(1)</b>

    try (Connection connection = DriverManager.getConnection(
           "jdbc:firebird://localhost:3050/c:/db/employee.fdb",
           "SYSDBA", "masterkey")) { <i class="conum" data-value="2"></i><b>(2)</b>
      // use connection here
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first line of this code is important&#8201;&#8212;&#8201;it tells Java to load the Jaybird JDBC driver.
As required by the JDBC specification, at this point the driver registers itself with <code>java.sql.DriverManager</code>.</p>
</div>
<div class="paragraph">
<p>Since Java 6 (JDBC 4), explicitly loading the driver using <code>Class.forName("org.firebirdsql.jdbc.FBDriver")</code> is no longer necessary, except when the driver is not on the system class path.
Examples where it may be necessary to explicitly load the driver are web applications that include the driver in the deployment (e.g. in <code>WEB-INF/lib</code> of the WAR).
There, the driver is not on the system class path, so it will need to be loaded explicitly.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Explicitly loading the driver with <code>Class.forName("org.firebirdsql.jdbc.FBDriver")</code> may aid in debugging &#8220;<em>No suitable driver found for jdbc:firebird&#8230;&#8203;</em>&#8221; errors (e.g. whether the driver is not on the classpath, or it was found but an error occurred during loading or initialization, or&#8201;&#8212;&#8201;if the error goes away&#8201;&#8212;&#8201;it was not loaded by automatic driver loading).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We will leave out usages of <code>Class.forName</code> in further examples;
they will work because of automatic driver loading.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Registering the JDBC driver</div>
<div class="paragraph">
<p>There are several ways to register JDBC driver:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>DriverManager</code> loads the drivers from the system class path.
This happens automatically.</p>
</li>
<li>
<p>The application explicitly loads the driver&#8217;s class.
This is only necessary if the automatic loading (see previous item) is not available.
This can be necessary because the driver <code>jar</code> is loaded dynamically, through a different classloader, etc).</p>
<div class="paragraph">
<p>The JDBC specification requires that during class initialization the driver registers itself with <code>DriverManager</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Class.forName("org.firebirdsql.jdbc.FBDriver");</pre>
</div>
</div>
</li>
<li>
<p>The JDBC driver class name is listed in the <code>jdbc.drivers</code> system property.
Multiple drivers can be separated using a colon (&#8216;<code>:</code>&#8217;).</p>
<div class="paragraph">
<p>You can specify the value of this property during JVM startup:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java\
  -Djdbc.drivers=foo.Driver:org.firebirdsql.jdbc.FBDriver\
  -classpath jaybird-full-{jaybird-example-version}.jar;C:/myproject/classes\
  my.company.SomeJavaExample</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>The second statement of the example tells the <code>java.sql.DriverManager</code> to open a database connection to the Firebird server running on localhost, and the path to the database is <code>c:/database/employee.fdb</code>.</p>
</div>
<div class="paragraph">
<p>The connection specification consists of the host name of the database server, optionally you can specify a port (by default port 3050 is used).
The host name can be specified using either its DNS name (for example <code>fb-server.mycompany.com</code> or just <code>fb-server</code>), or its IP address (e.g. <code>192.0.2.5</code>, or <code>[2001:db8::5]</code> for an IPv6 address).</p>
</div>
<div class="paragraph">
<p>After the server name and port, the alias or path to the database is specified.
We suggest to specify a database alias instead of the absolute database path.
For more information about using aliases, see the documentation of Firebird server.</p>
</div>
<div class="paragraph">
<p>The format of the path depends on the platform of the Firebird server.</p>
</div>
<div class="paragraph">
<p>On Windows, the path must include the drive letter and path, for example <code>c:/database/employee.fdb</code>, which points to the employee database that can be found in the <code>database</code> directory of drive <code>C:</code>.
Java (and Firebird) supports either <code>/</code> or <code>\</code> (escaped as <code>\\</code>) as path separator on the Windows platform.
On Unix and Linux platforms, you can use only <code>/</code> as the path separator.</p>
</div>
<div class="paragraph">
<p>On Unix platforms the path must include the root, as the path is otherwise interpreted relative to a server-dependent folder.
Having to include the root has the effect that a database in <code>/var/firebird/employee.fdb</code> needs to use a double <code>//</code> after the host name (and port) in the connection string: <code>jdbc:firebird://localhost//var/firebird/employee.fdb</code>.</p>
</div>
<div class="paragraph">
<p>It is possible to specify a relative path, but as this depends on the server configuration, this may be confusing or easily lead to errors.
We suggest not to use relative paths, and instead use an alias.</p>
</div>
<div class="sect3">
<h4 id="connection-drivermanager-props"><a class="anchor" href="#connection-drivermanager-props"></a>2.1.1. Specifying extended properties</h4>
<div class="paragraph">
<p>The JDBC API provides a method to specify additional connection properties, for example a client encoding:</p>
</div>
<div class="listingblock">
<div class="title">Obtaining JDBC connection with additional connection properties</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package hello;

import java.sql.*;
import java.util.*;

public class HelloServerWithEncoding {

  public static void main(String[] args) throws Exception {
    var props = new Properties();
    props.setProperty("user", "SYSDBA");
    props.setProperty("password", "masterkey");
    props.setProperty("encoding", "UTF8");

    try (Connection connection = DriverManager.getConnection(
            "jdbc:firebird://localhost:3050/C:/db/employee.fdb",
            props)) {
        // use connection here
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>user</code> and <code>password</code> properties are defined in JDBC.
All other property names&#8201;&#8212;&#8201;like <code>encoding</code> here&#8201;&#8212;&#8201;are driver-specific.</p>
</div>
<div class="paragraph">
<p>Additional properties, for example the SQL role for the connection can be added to the <code>props</code> object.
The list of properties available in Jaybird can be found in <a href="#connectionproperties">Extended connection properties</a>.</p>
</div>
<div class="paragraph">
<p>It is not always possible to use the above described method to add properties.
Jaybird also provides a possibility to specify connection properties in the JDBC URL.</p>
</div>
<div class="literalblock">
<div class="title">Extended JDBC URL format</div>
<div class="content">
<pre>jdbc:firebird://host[:port]/&lt;path to db&gt;?&lt;properties&gt;
&lt;properties&gt; ::= &lt;property&gt;[{&amp; | ;}&lt;properties&gt;]
&lt;property&gt;   ::= &lt;name&gt;[=&lt;value&gt;]</pre>
</div>
</div>
<div class="paragraph">
<p>The example below shows the specification for extended JDBC properties in the URL.</p>
</div>
<div class="paragraph">
<p>In this case extended properties are passed together with the URL using the HTTP-like parameter passing scheme: first comes the main part of the URL, then &#8216;<code>?</code>&#8217;, then name-value pairs separated with &#8216;<code>&amp;</code>&#8217; or &#8216;<code>;</code>&#8217;.
The following example is equivalent to the previous example.</p>
</div>
<div class="listingblock">
<div class="title">Specifying extended properties in the JDBC URL</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.sql.*;

...

Connection connection = DriverManager.getConnection(
    "jdbc:firebird://localhost:3050/C:/db/employee.fdb?encoding=UTF8",
    "SYSDBA",
    "masterkey");</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="connection-drivermanager-props-urlencoding"><a class="anchor" href="#connection-drivermanager-props-urlencoding"></a>URL encoding in query part of JDBC URL</h5>
<div class="paragraph">
<p>UTF-8 URL encoded values (and keys) can be used in the query part of the JDBC URL.</p>
</div>
<div class="paragraph">
<p>This can be used to include otherwise unsupported characters in a connection property value:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>;</code> escaped as <code>%3B</code></p>
</li>
<li>
<p><code>&amp;</code> escaped as <code>%26</code></p>
</li>
<li>
<p><code>&#43;</code> escaped as <code>%2B</code></p>
<div class="paragraph">
<p>A &#43; in the query part means <em>space</em> (0x20), so occurrences of <code>&#43;</code> (<em>plus</em>) need to be escaped;
make sure to do this for <em>base64</em> encoded values of <code>dbCryptConfig</code>, or better yet use the <em>base64url</em> encoding instead.</p>
</div>
</li>
<li>
<p><code>%</code> escaped as <code>%25</code>.</p>
<div class="paragraph">
<p>A <code>%</code> in the query part introduces an escape, so occurrences of <code>%</code> (<em>percent</em>) need to be escaped.</p>
</div>
</li>
<li>
<p>Optionally, a <em>space</em> (0x20) can be escaped as &#43;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>URL encoding can also be used to encode any Unicode codepoint in the query string.
Jaybird will always use UTF-8 for decoding.</p>
</div>
<div class="paragraph">
<p>Invalid URL encoded values will throw a <code>SQLNonTransientConnectionException</code>.</p>
</div>
<div class="paragraph">
<p>The support for URL encoding only applies to the JDBC URL part after the first <code>?</code>.
URL encoding should not be applied for connection properties set through <code>java.util.Properties</code> or on a <code>javax.sql.DataSource</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="connection-datasource"><a class="anchor" href="#connection-datasource"></a>2.1.2. Obtaining a connection via javax.sql.DataSource</h4>
<div class="paragraph">
<p>The interface <code>javax.sql.DataSource</code> defines a simple API for a factory of <code>java.sql.Connection</code> objects.
Data sources can be created and configured using code or bean introspection, looked up from JNDI, or injected by CDI or Spring.</p>
</div>
<div class="paragraph">
<p>Jaybird itself provides one <code>javax.sql.DataSource</code> implementation, <code>org.firebirdsql.ds.FBSimpleDataSource</code>, which is a plain factory of connections, without connection pooling.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you need connection pooling, use a third-party connection pool library like <a href="https://brettwooldridge.github.io/HikariCP/" target="_blank" rel="noopener">HikariCP</a>, <a href="https://commons.apache.org/proper/commons-dbcp/" target="_blank" rel="noopener">DBCP</a>, or <a href="https://www.mchange.com/projects/c3p0/" target="_blank" rel="noopener">c3p0</a>.
Application servers, and for example Tomcat, also provide built-in connection pool support.
Consult their documentation for more information.</p>
</div>
<div class="paragraph">
<p>See also <a href="#connection-pooling">Connection Pooling</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A simple example of creating a data source and obtaining a connection via a <code>DataSource</code> object is shown below.</p>
</div>
<div class="listingblock">
<div class="title">Obtaining a JDBC connection from a DataSource</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package hello;

import java.sql.*;
import org.firebirdsql.ds.*;

public class HelloServerDataSource {

  public static void main(String[] args) throws Exception {
    var ds = new FBSimpleDataSource();
    ds.setUser("SYSDBA");
    ds.setPassword("masterkey");
    // in a single property
    ds.setDatabaseName("//localhost:3050/C:/database/employee.fdb");
    // or split out over serverName, portNumber and databaseName
    ds.setServerName("localhost");
    ds.setPortNumber(3050);
    ds.setDatabaseName("C:/database/employee.fdb");

    try (Connection connection = ds.getConnection()) {
      // use connection here
    }
  }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="connection-datasource-njdi"><a class="anchor" href="#connection-datasource-njdi"></a>Using JNDI to look up a javax.sql.DataSource</h5>
<div class="paragraph">
<p>The JDBC 2.0 specification introduced a mechanism to obtain database connections without requiring the application to know any specifics of the underlying JDBC driver.
The application is only required to know the logical name to find an instance of the <code>javax.sql.DataSource</code> interface using Java Naming and Directory Interface (JNDI).
This was a common way to obtain connections in web and application servers before the introduction of CDI.</p>
</div>
<div class="paragraph">
<p>This code assumes that you have correctly configured the JNDI properties.
For more information about configuring JNDI please refer to the documentation provided with your web or application server.</p>
</div>
<div class="listingblock">
<div class="title">Typical way to obtain JDBC connection via JNDI</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package hello;

import java.sql.*;
import javax.sql.*;
import javax.naming.*;

public class HelloServerJNDI {

  public static void main(String[] args) throws Exception {
    var ctx = new InitialContext();
    DataSource ds = (DataSource) ctx.lookup("jdbc/SomeDB");

    try (Connection connection = ds.getConnection()) {
      // do something here...
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Usually, the binding between the <code>DataSource</code> object and its JNDI name happens in the configuration of your web or application server.
However, under some circumstances (e.g. you are developing your own JNDI-enabled application server/framework), you may have to do this yourself.
You can use this code snippet for this purpose:</p>
</div>
<div class="listingblock">
<div class="title">Programmatic way to instantiate javax.sql.DataSource implementation</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import javax.naming.*;
import org.firebirdsql.ds.*;
...
var ds = new FBSimpleDataSource();

ds.setDatabaseName("//localhost:3050/C:/database/employee.fdb");
ds.setUser("SYSDBA");
ds.setPassword("masterkey");

var ctx = new InitialContext();

ctx.bind("jdbc/SomeDB", ds);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>DataSource</code> implementation supports all connection properties available to the <code>DriverManager</code> interface.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Manually binding to JNDI like shown above is uncommon.
If you find yourself copying this code, rethink what you&#8217;re doing.</p>
</div>
<div class="paragraph">
<p>In fact, use of JNDI is extremely uncommon these days.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="driver-types"><a class="anchor" href="#driver-types"></a>2.2. Driver types</h3>
<div class="paragraph">
<p>As mentioned in the section <a href="#_jaybird_architecture">Jaybird Architecture</a>, Jaybird supports multiple implementations of the GDS API.
The default Jaybird distribution contains two main categories of the implementations: the pure Java implementation of the Firebird wire protocol, and a JNA proxy that can use a Firebird <code>fbclient</code> library.</p>
</div>
<div class="paragraph">
<p>The next sections provide a description of these types and their configuration with the corresponding JDBC URLs that should be used to obtain the connection of desired type.
The type of the JDBC driver for the <code>javax.sql.DataSource</code> is configured via a corresponding property.</p>
</div>
<div class="sect3">
<h4 id="driver-pure-java"><a class="anchor" href="#driver-pure-java"></a>2.2.1. PURE_JAVA type</h4>
<div class="paragraph">
<p>The <code>PURE_JAVA</code> type (JDBC Type 4) uses a pure Java implementation of the Firebird wire protocol.
This type is recommended for connecting to a remote database server using TCP/IP sockets.
No installation is required except adding the JDBC driver to the class path.
This type of driver provides the best performance when connecting to a remote server.
Some Jaybird features are only available in the pure Java implementation.</p>
</div>
<div class="paragraph">
<p>To obtain a connection using the <code>PURE_JAVA</code> driver type you have to use a JDBC URL as shown in <a href="#connection-drivermanager">Obtaining connection java.sql.DriverManager</a>.</p>
</div>
<div class="paragraph">
<p>The following JDBC URL syntax is supported (<em>serverName</em> became optional in Jaybird 5)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;pure-java-url&gt; ::=
  jdbc:firebird[sql]:[java:]&lt;database-coordinates&gt;

&lt;database-coordinates&gt; ::=
    //[<em>serverName</em>[:<em>portNumber</em>]]/<em>databaseName</em>
  | &lt;legacy-url&gt;

&lt;legacy-url&gt; ::=
  [<em>serverName</em>[/<em>portNumber</em>]:]<em>databaseName</em></pre>
</div>
</div>
<div class="paragraph">
<p>If <em>serverName</em> is not specified, it defaults to <code>localhost</code>.<br>
If <em>portNumber</em> is not specified, it defaults to <code>3050</code>.</p>
</div>
<div class="paragraph">
<p>In theory, even <code>&lt;database-coordinates&gt;</code> and <em>databaseName</em> are optional, but this requires specifying the database name using connection property <code>databaseName</code>, which is possible, but not recommended.</p>
</div>
<div class="paragraph">
<p>When using <code>javax.sql.DataSource</code> implementation, you can specify either <code>"PURE_JAVA"</code> or <code>"TYPE4"</code> driver type, however this type is already used by default.</p>
</div>
<div class="listingblock">
<div class="title">Pure Java URL examples</div>
<div class="content">
<pre>// Connect to db alias employee on localhost, port 3050
jdbc:firebird://localhost/employee
jdbc:firebird://localhost:3050/employee
jdbc:firebird:///employee

// Same using the legacy URL format
jdbc:firebird:localhost:employee
jdbc:firebird:localhost/3050:employee
jdbc:firebird:employee</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The legacy URL format is the historic URL format used by Firebird itself.
We recommend not using this format, as it can be ambiguous.</p>
</div>
<div class="paragraph">
<p>For example, say you have a server called <code>java</code>, then <code>jdbc:firebird:java:employee</code> will attempt to open the <code>employee</code> db alias on <code>localhost</code>, not on <code>java</code>.
With <code>jdbc:firebird://java/employee</code>, this ambiguity does not exist.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="driver-native"><a class="anchor" href="#driver-native"></a>2.2.2. NATIVE and LOCAL types</h4>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> Native connections require the <code>jaybird-native</code> artifact on the classpath.</p>
</div>
<div class="paragraph">
<p>The <code>NATIVE</code> and <code>LOCAL</code> types (JDBC Type 2) use a JNA proxy to access the Firebird client library and requires installation of the Firebird client.
The <code>NATIVE</code> driver type is used to access the remote database server, the <code>LOCAL</code> type (Windows only) accesses the database server running on the same host by means of IPC (Inter-Process Communication).
Performance of <code>NATIVE</code> driver is approximately 10% lower compared to the <code>PURE_JAVA</code> driver, but <code>LOCAL</code> type has up to 30% higher performance compared to the <code>PURE_JAVA</code> driver when connecting the server on the same host.
This is mostly due to the fact that TCP/IP stack is not involved in this mode.</p>
</div>
<div class="paragraph">
<p>To create a connection using the <code>NATIVE</code> JDBC driver to connect to a remote server you have to use the following JDBC URL with the native subprotocol.</p>
</div>
<div class="paragraph">
<p>The following JDBC URL syntax is supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;native-url&gt; ::=
  jdbc:firebird[sql]:native:&lt;database-coordinates&gt;

&lt;database-coordinates&gt; ::=
    //[<em>serverName</em>[:<em>portNumber</em>]]/<em>databaseName</em>
  | &lt;fbclient-url&gt;

&lt;fbclient-url&gt;
    inet://<em>serverName</em>[:<em>portNumber</em>]/<em>databaseName</em>
  | inet4://<em>serverName</em>[:<em>portNumber</em>]/<em>databaseName</em>
  | inet6://<em>serverName</em>[:<em>portNumber</em>]/<em>databaseName</em>
  | wnet://[<em>serverName</em>[:<em>portNumber</em>]/]<em>databaseName</em>
  | xnet://<em>databaseName</em>
  | [<em>serverName</em>[/<em>portNumber</em>]:]<em>databaseName</em></pre>
</div>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 5</em> Since Jaybird 5, all URLs supported by fbclient can be used.
The supported URLs depend on the fbclient version and the OS (e.g. XNET and WNET are Windows only, and WNET support has been removed in Firebird 5).</p>
</div>
<div class="paragraph">
<p>When connecting to a local database server using the <code>LOCAL</code> driver, you should use following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>jdbc:firebird:local:&lt;absolute path to database&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>In addition to Jaybird, this requires a native Firebird client library, and JNA 5.17.0 needs to be on the classpath.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">LOCAL protocol removed in Jaybird 5</div>
<div class="paragraph">
<p><em class="since">Jaybird 5</em> The LOCAL protocol was removed in Jaybird 5, and is now simply an alias for NATIVE.
To ensure local access, use a connection string using XNET (Windows only!):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>jdbc:firebird:native:xnet://&lt;path to database&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>This requires a Firebird 3.0 or later <code>fbclient.dll</code>.</p>
</div>
<div class="paragraph">
<p>Support for this type of URL was introduced in Jaybird 5, so this syntax cannot be used in earlier versions.</p>
</div>
<div class="paragraph">
<p>As XNET is Windows only, on other platforms, consider using an <a href="#driver-embedded">EMBEDDED</a> connection instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Native URL examples</div>
<div class="content">
<pre>// Connect to db alias employee on localhost, port 3050
jdbc:firebird:native://localhost/employee
jdbc:firebird:native://localhost:3050/employee
jdbc:firebird:native:///employee

jdbc:firebird:native:inet://localhost/employee
// Require IPv4
jdbc:firebird:native:inet4://localhost/employee
// Require IPv6
jdbc:firebird:native:inet6://localhost/employee
// Using WNET
jdbc:firebird:native:wnet://localhost/employee
// Using XNET
jdbc:firebird:native:xnet://employee

// Same using the legacy URL format
jdbc:firebird:native:localhost:employee
jdbc:firebird:native:localhost/3050:employee
// May use XNET, INET or embedded access
jdbc:firebird:native:employee</pre>
</div>
</div>
<div class="sect4">
<h5 id="driver-native-maven"><a class="anchor" href="#driver-native-maven"></a>Maven dependency for native client</h5>
<div class="paragraph">
<p>When using Jaybird 3 and later, you can use a library to provide the Firebird client library for the <code>native</code> and <code>local</code> protocol.
For Windows, Linux, and macOS, you can add the <code>org.firebirdsql.jdbc:fbclient</code> dependency on your classpath.
This dependency does not support the <code>embedded</code> protocol.</p>
</div>
<div class="listingblock">
<div class="title">Native libraries for all supported OS and architectures</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;fbclient&lt;/artifactId&gt;
    &lt;version&gt;5.0.3.0&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since version 5.0.1.1, you can also specify the desired OS, or OS and architecture using the <code>classifier</code>:</p>
</div>
<div class="listingblock">
<div class="title">Only native libraries for Linux (all supported architectures)</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;fbclient&lt;/artifactId&gt;
    &lt;version&gt;5.0.3.0&lt;/artifactId&gt;
    &lt;classifier&gt;linux&lt;/classifier&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/mrotteveel/jaybird-fbclient#os-specific-packages">mrotteveel/jaybird-fbclient</a> for the available classifiers.</p>
</div>
<div class="paragraph">
<p>You can also download the library (see <a href="https://github.com/mrotteveel/jaybird-fbclient#download">mrotteveel/jaybird-fbclient</a> for download link) and add it your classpath.</p>
</div>
<div class="paragraph">
<p>See next sections for other solutions.</p>
</div>
</div>
<div class="sect4">
<h5 id="driver-native-windows"><a class="anchor" href="#driver-native-windows"></a>Windows</h5>
<div class="paragraph">
<p>For Jaybird 3 and later, we recommend using the solution documented in <a href="#driver-native-maven">Maven dependency for native client</a>.</p>
</div>
<div class="paragraph">
<p>On Windows, you need to make sure that <code>fbclient.dll</code> is located on the <code>PATH</code> environment variable.
Alternatively you can specify the directory containing this DLL in the <code>jna.library.path</code> system property.</p>
</div>
<div class="paragraph">
<p>For example, if you put a copy of <code>fbclient.dll</code> in the current directory you have to use the following command to start Java:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>java -cp &lt;relevant claspath&gt; -Djna.library.path=. com.mycompany.MyClass</pre>
</div>
</div>
<div class="paragraph">
<p>If your Java installation is 32-bit, you need a 32-bit <code>fbclient.dll</code>, for 64-bit Java, a 64-bit <code>fbclient.dll</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="driver-native-linux"><a class="anchor" href="#driver-native-linux"></a>Linux</h5>
<div class="paragraph">
<p>For Jaybird 3 and later, we recommend using the solution documented in <a href="#driver-native-maven">Maven dependency for native client</a>.</p>
</div>
<div class="paragraph">
<p>On Linux, you need to make sure that <code>libfbclient.so</code> is available through the <code>LD_PATH</code> environment variable.</p>
</div>
<div class="paragraph">
<p>Usually shared libraries are stored in the <code>/usr/lib/</code> directory;
however you will need root permissions to install the library there.
Some distributions will only have, for example, <code>libfbclient.so.2.5</code>.
In that case you may need to add a symlink from <code>libfbclient.so</code> to the client on your system.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can specify the directory containing the library in the <code>jna.library.path</code> Java system property.
See the Windows example above for more details.</p>
</div>
</div>
<div class="sect4">
<h5 id="driver-native-limitations"><a class="anchor" href="#driver-native-limitations"></a>Limitations</h5>
<div class="paragraph">
<p>Older versions of the Firebird client library&#8201;&#8212;&#8201;as far as we are aware, Firebird 2.1 or older&#8201;&#8212;&#8201;may not be thread-safe when connecting to a local database server using IPC.
By default, Jaybird does not provide synchronization, but it can be enabled with the system property <code>org.firebirdsql.jna.syncWrapNativeLibrary</code> set to true.
However, this synchronization is local to the classloader that has loaded the Jaybird classes.</p>
</div>
<div class="paragraph">
<p>To guarantee correct synchronization, the Jaybird driver must be loaded by the top-most classloader.
For example, when using the Type 2 JDBC driver with a web or application server, you have to add the Jaybird classes to the main classpath (for example, to the <code>lib/</code> directory of your web or application server), but <strong>not</strong> to the web or Java EE/Jakarta EE application, e.g. the <code>WEB-INF/lib</code> directory.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="driver-embedded"><a class="anchor" href="#driver-embedded"></a>2.2.3. EMBEDDED type</h4>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> Embedded connections require the <code>jaybird-native</code> artifact on the classpath.</p>
</div>
<div class="paragraph">
<p>The Embedded server JDBC driver is a Type 2 JDBC driver that, rather than using the Firebird client library, loads the Firebird embedded server library instead.
This is the highest performance type of JDBC driver for accessing local databases, as the Java code accesses the database file directly.</p>
</div>
<div class="paragraph">
<p>The following JDBC URL syntax is supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;embedded-url&gt; ::=
  jdbc:firebird[sql]:embedded:<em>dbname-or-alias</em></pre>
</div>
</div>
<div class="paragraph">
<p>In practice, the URL accepts the same <code>&lt;fbclient-url&gt;</code> values as described for <code>NATIVE</code>.
That is, the embedded server also acts as client library (i.e. you get the same Type 2 behavior as you would get with using "native").</p>
</div>
<div class="paragraph">
<p>This driver tries to load <code>fbembed.dll/libfbembed.so</code> (the name used in Firebird 2.5 and earlier) and <code>fbclient.dll/libfbclient.so</code>.</p>
</div>
<div class="paragraph">
<p>See also the <a href="#driver-native">NATIVE and LOCAL types</a> section.</p>
</div>
<div class="paragraph">
<p>When using Firebird 3.0 and higher embedded, you will need to make sure the necessary plugins like <code>engineNN.dll/libengineNN.so</code> (<em>NN</em> is 12 for Firebird 3.0, 13 for Firebird 4.0 and Firebird 5.0) are accessible to the client library, consult the Firebird 3.0 documentation for more information.
For an example, see the article <a href="https://www.lawinegevaar.nl/firebird/jaybird_embedded_example.html" target="_blank" rel="noopener">Jaybird with Firebird embedded example</a>.</p>
</div>
<div class="sect4">
<h5 id="driver-embedded-limitations"><a class="anchor" href="#driver-embedded-limitations"></a>Limitations</h5>
<div class="paragraph">
<p>Older versions of the Firebird embedded server for Linux are not thread safe;
as far as we know this concerns Firebird 2.1 or older.
Jaybird can provide the needed synchronization in Java code, as described for <a href="#driver-native-limitations">NATIVE type</a>.
This implies the same restrictions on the classloader that will load the Jaybird classes.</p>
</div>
<div class="paragraph">
<p>By default, the Firebird embedded library opens databases in exclusive mode.
This means that this particular database is accessible only to one Java virtual machine.
This can be changed with the <code>ServerMode</code> setting in <code>firebird.conf</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="driver-ooremote"><a class="anchor" href="#driver-ooremote"></a>2.2.4. OOREMOTE type</h4>
<div class="paragraph">
<p><em class="until">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>The <code>OOREMOTE</code> type is a JDBC Type 4 specifically for use with OpenOffice.org and LibreOffice.
It addresses some differences in interpretation of the JDBC specification, and provides alternative metadata in certain cases to allow OpenOffice.org and LibreOffice to function correctly.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This only describes connecting to Firebird using Jaybird from OpenOffice.org or LibreOffice, it is not about the Firebird embedded use that has been introduced in recent LibreOffice versions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To obtain a connection you have to use following URL:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>jdbc:firebirdsql:oo://host[:port]/&lt;path to database&gt;
jdbc:firebird:oo://host[:port]/&lt;path to database&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>All other notes for <a href="#driver-pure-java">PURE_JAVA type</a> apply.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">OOREMOTE deprecated in Jaybird 5, and removed in Jaybird 6</div>
<div class="paragraph">
<p><em class="since">Jaybird 5</em> The OOREMOTE protocol implementation is deprecated and has been removed in Jaybird 6.
To connect to Firebird, use LibreOffice Base with connection option &#8220;Firebird External&#8221;.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="connection-pooling"><a class="anchor" href="#connection-pooling"></a>2.3. Connection Pooling</h3>
<div class="paragraph">
<p>Each time a connection is opened via <code>DriverManager</code> or <code>FBSimpleDataSource</code>, a new physical connection to server is opened.
It is closed when the connection is closed.
To avoid the overhead of creating connections, you can use a connection pool implementation to maintain a cache of open physical connections that can be reused between user sessions.</p>
</div>
<div class="paragraph">
<p>Since Jaybird 3, Jaybird no longer provides its own connection pool implementation.
If you need a <code>javax.sql.DataSource</code> implementation that provides a connection pool, either use the connection pool support of your application server, or consider using <a href="https://brettwooldridge.github.io/HikariCP/" target="_blank" rel="noopener">HikariCP</a>, <a href="https://commons.apache.org/proper/commons-dbcp/" target="_blank" rel="noopener">DBCP</a>, or <a href="https://www.mchange.com/projects/c3p0/" target="_blank" rel="noopener">c3p0</a>.</p>
</div>
<div class="sect3">
<h4 id="connection-pooling-hikaricp"><a class="anchor" href="#connection-pooling-hikaricp"></a>2.3.1. HikariCP example</h4>
<div class="paragraph">
<p>This example shows how to configure <a href="https://brettwooldridge.github.io/HikariCP/" target="_blank" rel="noopener">HikariCP</a> to connect to Firebird.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package example;

import com.zaxxer.hikari.HikariConfig;
import com.zaxxer.hikari.HikariDataSource;
import org.firebirdsql.ds.FBSimpleDataSource;

import java.sql.Connection;
import java.sql.SQLException;

public class HikariConnectExample {

  public static void main(String[] args) {
    HikariDataSource hikariDataSource = initDataSource();

    try (Connection connection = hikariDataSource.getConnection()) {
      // use connection
    } catch (SQLException e) {
      System.getLogger("HikariConnectExample")
          .log(System.Logger.Level.ERROR, "Could not connect", e);
    }

    hikariDataSource.close();
  }

  private static HikariDataSource initDataSource() {
    var firebirdDataSource = new FBSimpleDataSource();
    firebirdDataSource.setServerName("localhost");
    firebirdDataSource.setDatabaseName("employee");
    firebirdDataSource.setUser("sysdba");
    firebirdDataSource.setPassword("masterkey");
    firebirdDataSource.setCharSet("utf-8");

    var config = new HikariConfig();
    config.setDataSource(firebirdDataSource);
    return new HikariDataSource(config);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>HikariCP provides multiple ways to configure the connection.
Some examples:</p>
</div>
<div class="listingblock">
<div class="title">Indirect use of <code>FBSimpleDataSource</code></div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private static HikariDataSource initDataSourceAlternative1() {
  var config = new HikariConfig();
  config.setDataSourceClassName("org.firebirdsql.ds.FBSimpleDataSource");
  config.setUsername("sysdba");
  config.setPassword("masterkey");
  config.addDataSourceProperty("serverName", "localhost");
  config.addDataSourceProperty("databaseName", "employee");
  config.addDataSourceProperty("charSet", "utf-8");
  return new HikariDataSource(config);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Using the Jaybird JDBC driver instead of a data source</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">private static HikariDataSource initDataSourceAlternative2() {
  var config = new HikariConfig();
  config.setDriverClassName("org.firebirdsql.jdbc.FBDriver");
  config.setJdbcUrl("jdbc:firebird://localhost/employee");
  config.setUsername("sysdba");
  config.setPassword("masterkey");
  config.addDataSourceProperty("charSet", "utf-8");
  return new HikariDataSource(config);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="data-source-implementation"><a class="anchor" href="#data-source-implementation"></a>2.4. The javax.sql.DataSource implementation</h3>
<div class="paragraph">
<p>Connection pool implementations, whether provided by a Java EE/Jakarta EE application server or a third-party library, are exposed as an implementation of the <code>javax.sql.DataSource</code> interface.</p>
</div>
<div class="paragraph">
<p>The most important method exposed by this interface is the <code>getConnection()</code> method, which will return a connection based on the configuration of the data source.
For a 'basic' (non-pooling) data source this will create a new, physical, connection.
For a connection pool, this will create a logical connection that wraps a physical connection from the pool.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The 'user' of a connection should not care whether the connection is pooled or not, the connection should behave the same from the perspective of the user, and the user should use the connection in the same way.
This should allow for swapping between a non-pooling and pooling data source in an application without any changes to the code using the data source.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When the application is done with the connection, it should call <code>close()</code> on the connection.
A connection from a non-pooling data source will be closed.
For a logical connection from a connection pool, <code>close()</code> will invalidate the logical connection (which will make it behave like a closed connection), and return the underlying physical connection to the connection pool, where it will be either kept for re-use, or maybe closed.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Use a connection for the shortest scope, and time, necessary for correct behaviour.
Get a connection, and close it as soon as you&#8217;re done.
When using a connection pool, this has the added benefit that just a few connections can serve the needs of the application.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="connection-pool-data-source-implementation"><a class="anchor" href="#connection-pool-data-source-implementation"></a>2.5. The javax.sql.ConnectionPoolDataSource implementation</h3>
<div class="paragraph">
<p>The <code>javax.sql.ConnectionPoolDataSource</code> interface represents a factory that creates <code>PooledConnection</code> objects for use by a connection pool.
For example, application servers support the use of a <code>ConnectionPoolDataSource</code> to populate their connection pool.</p>
</div>
<div class="paragraph">
<p>A <code>PooledConnection</code> instance represents a physical connection to a database and is a source of logical connections that a connection pool can hand out to the application.
Closing this logical connection returns the physical connection back into the pool.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Contrary to its name, a <code>ConnectionPoolDataSource</code> is not a connection pool!
It is a factory for physical connections that can be used by a connection pool.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Jaybird provides <code>org.firebirdsql.ds.FBConnectionPoolDataSource</code> as an implementation of the <code>javax.sql.ConnectionPoolDataSource</code> interface.</p>
</div>
</div>
<div class="sect2">
<h3 id="xa-data-source-implementation"><a class="anchor" href="#xa-data-source-implementation"></a>2.6. The javax.sql.XADataSource implementation</h3>
<div class="paragraph">
<p>The JDBC 2.0 specification introduced the <code>javax.sql.XADataSource</code> interface that should be used to access connections that can participate in distributed transactions with JTA-compatible transaction coordinator.
This gives applications possibility to use two-phase commit to synchronize multiple resource managers.</p>
</div>
<div class="paragraph">
<p>Just like <code>javax.sql.ConnectionPoolDataSource</code>, applications normally don&#8217;t access an <code>XADataSource</code> implementation directly, instead it is used as a factory of connections for an XA-enabled data source. To the application this is usually exposed as a <code>javax.sql.DataSource</code>.</p>
</div>
<div class="paragraph">
<p>Jaybird provides <code>org.firebirdsql.ds.FBXADataSource</code> as an implementation of the <code>javax.sql.XADataSource</code> interface.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exceptionhandling"><a class="anchor" href="#exceptionhandling"></a>3. Handling exceptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Exception handling is probably the most important aspect that
directly affects the stability of the application. Correct handling of
the error cases guarantees correct functioning of the client code as
well as the database server.</p>
</div>
<div class="paragraph">
<p>All methods of the interfaces defined in the JDBC specification throw instances of <code>java.sql.SQLException</code>&#8201;&#8212;&#8201;or a subclass&#8201;&#8212;&#8201;to notify about error conditions that happen during request processing.
<code>SQLException</code> is a checked exception, which forces Java programmers to either handle it with the try/catch clause or redeclare it in the method signature.</p>
</div>
<div class="sect2">
<h3 id="_working_with_exceptions"><a class="anchor" href="#_working_with_exceptions"></a>3.1. Working with exceptions</h3>
<div class="paragraph">
<p>Exception handling becomes even more important if we consider that this topic is either ignored or presented in incorrect form in most JDBC tutorials.
The <a href="https://docs.oracle.com/javase/tutorial/jdbc/index.html" target="_blank" rel="noopener">official JDBC tutorial from Oracle</a> briefly mentions that exceptions should be handled by using try/catch blocks only at the end of the course, but neither reasons for doing this nor the best practices are presented.</p>
</div>
<div class="paragraph">
<p>There are good reasons to think about exception handling in your
applications before you start coding. First of all, it is very hard to
change the exception handling pattern in existing code. The changes
will affect all layers above the place where the changes in exception
handling are made and the new application must be thoroughly tested
after the change.</p>
</div>
<div class="paragraph">
<p>Another reason was already mentioned on the beginning of this chapter: instances of <code>java.sql.SQLException</code> are the only way for the RDBMS server or JDBC driver to notify about the error condition that happened during request processing.
By checking the error code which is sent with the exception, an application can try to recover from the error.</p>
</div>
<div class="paragraph">
<p>And last but not least, there is resource management.
When an exception happens in a method, the execution flow of Java code differs from the normal flow, and only correctly coded application will ensure that all allocated resources will be released.
The resources in our case are JDBC connections, statements, result sets, etc.
All these objects not only take memory in the Java Virtual Machine of the application, but also consume memory and possibly hold locks on the server, which, worst case, can lead to an unintended Denial-of-Service attack, as the database server can no longer service requests.</p>
</div>
<div class="paragraph">
<p>A good exception handling strategy requires you do distinguish three
kinds of error conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>errors that the database access layer can detect and correctly handle;
for example, the application might decide to re-execute the business transaction if the database server returned a deadlock error;</p>
</li>
<li>
<p>errors that database access layer can detect, but is unable to handle;
usually those are all database errors that do not have special handling routines;</p>
</li>
<li>
<p>errors that database access layer cannot detect without additional code unrelated to the functionality of this layer;
basically, all runtime exceptions fall into this category.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The handling strategy then consists of</p>
</div>
<div class="ulist">
<ul>
<li>
<p>processing the selected error codes for cases described above;</p>
</li>
<li>
<p>converting the generic <code>SQLException</code> into a generic business error in the
application (this can be throwing some generic exception defined in the
application, but can also be an entry in the application event log and
short message that asks to retry the operation later);</p>
</li>
<li>
<p>some emergency tactics, since the error that happened (e.g.
<code>NullPointerException</code> or <code>OutOfMemoryError</code>) was not considered while the
application was created, thus possibly leaving it in an unknown state;
further operation should be considered dangerous and the corresponding
execution branch has to be halted.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The problem of resource management can be solved if resource allocation and release happens in the same code block and is protected with a try-with-resources block.
The code to recover from error conditions should use try/catch blocks.
An example of such error and resource handling code is presented below.</p>
</div>
<div class="listingblock">
<div class="title">Typical resource allocation and error handling patterns</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">String updateString = "update COFFEES " +
    "set SALES = ? where COF_NAME like ?";

try (PreparedStatement updateSales = con.prepareStatement(updateString)) {
  int [] salesForWeek = {175, 150, 60, 155, 90};
  String [] coffees = {"Colombian", "French_Roast",
      "Espresso", "Colombian_Decaf",
      "French_Roast_Decaf"};

  int len = coffees.length;

  for(int i = 0; i &lt; len; i++) {
    updateSales.setInt(1, salesForWeek[i]);
    updateSales.setString(2, coffees[i]);

    try {
      updateSales.executeUpdate();
    } catch(SQLException ex) {
      if (ex.getErrorCode() == ...) {
        // do something
      } else {
        throw new BusinessDBException(ex);
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The nested try/catch block shows you an example of handling a deadlock
error if it happens (first scenario according to our classification),
otherwise the exception is converted and passed to the upper layers
(second scenario). As you see, there is no special treatment to the
third scenario.</p>
</div>
<div class="paragraph">
<p>A possible bug in the JDBC driver could have generated runtime exception
in the <code>PreparedStatement.executeUpdate()</code> method, which would lead to
the statement handle leakage if the try-with-resource block had not been used to do the
resource cleanup. As a rule of thumb, always declare and allocate resources
in a try-with-resources block: the resource will be automatically closed/freed
at the end of the block, even if exceptions occur.</p>
</div>
<div class="paragraph">
<p>Such coding practice might look weird, because on first sight the whole purpose of using the <code>PreparedStatement</code> is neglected: the statement is prepared, used only once and then deallocated.
However, when this practice is combined with connection and statement pooling, it brings enormous advantage to the application code.
The code becomes much more manageable&#8201;&#8212;&#8201;resource allocations and release happen in the same method and the software developer does not need to remember the places where the same prepared statement might be used.
A statement pool will either reuse the statement or it will prepare a new one, if it detects that all pooled prepared statements are currently in use.
As a side effect, the application will always use the minimum number of statements handles, which in turn reduces the used resources on the database side.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Jaybird currently provides no statement pooling itself, availability will depend on the connection pool library used.
Consult the documentation of your connection pool to see if&#8201;&#8212;&#8201;and how&#8201;&#8212;&#8201;it provides statement pooling.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_warnings"><a class="anchor" href="#_warnings"></a>3.2. Warnings</h3>
<div class="paragraph">
<p>Some errors returned by Firebird are treated as warnings.
They are converted into instances of <code>java.sql.SQLWarning</code> class in the
JDBC layer. These exceptions are not thrown from the driver methods, but
added to a connection instance.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Currently, no warning is added to <code>Statement</code> or <code>ResultSet</code> objects.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each next warning is appended to the tail of the warning chain.
To read the warning chain, use the code presented below.</p>
</div>
<div class="listingblock">
<div class="title">Example how to work with warnings</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.sql.*;
....
SQLWarning warning = connection.getWarnings();
while (warning != null) {
  .... // do something with the warning
  warning = warning.getNextWarning();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="title">Alternative example how to work with warnings</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.sql.*;
....
for (Throwable throwable : connection.getWarnings()) {
  if (throwable instanceof SQLWarning) {
    SQLWarning warning = (SQLWarning) throwable;
    .... // do something with the warning
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This second example will iterate over the first warning, all its causes (if any), and then on
to other warnings (if any), and so on.</p>
</div>
<div class="paragraph">
<p>To clear existing warning, call <code>Connection.clearWarnings()</code> method.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> Some applications log or report <code>SQLWarning</code> in a way that can be confusing or annoying.
You can disable registration of <code>SQLWarning</code>s globally or per connection, see <a href="#ref-report-sql-warnings">Reporting of <code>SQLWarning</code>s</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_java_sql_sqlexception_in_jaybird"><a class="anchor" href="#_java_sql_sqlexception_in_jaybird"></a>3.3. java.sql.SQLException in Jaybird</h3>
<div class="paragraph">
<p><strong>TODO</strong> Information in section is possibly outdated or incomplete</p>
</div>
<div class="paragraph">
<p>An <code>SQLException</code> is a special exception that is thrown by the JDBC
connectivity component in case of an error. Each instance of this
exception is required to carry the vendor error code (if applicable) and
a SQL state according to the X/Open SQLstate or SQL:2003 specifications. Firebird
and Jaybird use SQL:2003 SQL state codes.<sup class="footnote" id="_footnote_sqlstate">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup></p>
</div>
<div class="paragraph">
<p>When multiple SQL errors happened, they are joined into a chain. Usually
the most recent exception is thrown to the application, the exceptions
that happened before can be obtained via <code>SQLException.getNextException()</code> method.
Alternatively, <code>SQLException.iterator()</code> can be used to walk over all exceptions in
the chain and their causes.</p>
</div>
<div class="paragraph">
<p>The JDBC specification provides an exception hierarchy that allows an application to
react on the error situations using regular exception handling rather than checking
the error code. Error codes may still be necessary for handling specific error cases.</p>
</div>
<div class="paragraph">
<p>The JDBC 4.3 specification defines the following exception hierarchy:<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.SQLException</code>&#8201;&#8212;&#8201;root of all JDBC exceptions</p>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.BatchUpdateException</code>&#8201;&#8212;&#8201;thrown when batch of the
statements did not execute successfully; contains the result of batch
execution.</p>
</li>
<li>
<p><code>java.sql.SQLClientInfoException</code>&#8201;&#8212;&#8201;thrown when client info properties
could not be set.</p>
</li>
<li>
<p><code>java.sql.SQLNonTransientException</code>&#8201;&#8212;&#8201;thrown when retrying the same action without fixing the
underlying cause would fail.</p>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.SQLDataException</code>&#8201;&#8212;&#8201;thrown for data-related errors,
for example conversion errors, too long values. (SQLstate class <code>22</code>)</p>
</li>
<li>
<p><code>java.sql.SQLFeatureNotSupportedException</code>&#8201;&#8212;&#8201;thrown to indicate that an optional
JDBC feature is not supported by the driver or the data source (Firebird).  (SQLstate class <code>0A</code>)</p>
</li>
<li>
<p><code>java.sql.SQLIntegrityConstraintViolationException</code>&#8201;&#8212;&#8201;thrown for constraint
violations. (SQLstate class <code>23</code>)</p>
</li>
<li>
<p><code>java.sql.SQLInvalidAuthorizationSpecException</code>&#8201;&#8212;&#8201;thrown for authorization
failures. (SQLstate class <code>28</code>)</p>
</li>
<li>
<p><code>java.sql.NonTransientConnectionException</code>&#8201;&#8212;&#8201;thrown for connection operations
that will not succeed on retry without fixing the underlying cause. (SQLstate class <code>08</code>)</p>
</li>
<li>
<p><code>java.sql.SQLSyntaxErrorException</code>&#8201;&#8212;&#8201;thrown for syntax errors. (SQLstate class <code>42</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.sql.SQLRecoverableException</code>&#8201;&#8212;&#8201;thrown when an action might be retried
by taking recovery actions and restarting the transaction.</p>
</li>
<li>
<p><code>java.sql.SQLTransientException</code>&#8201;&#8212;&#8201;thrown when the action might succeed if it is
retried without further recovery steps.</p>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.SQLTimeoutException</code>&#8201;&#8212;&#8201;thrown when the <code>queryTimeout</code> or
<code>loginTimeout</code> has expired.</p>
</li>
<li>
<p><code>java.sql.SQLTransactionRollbackException</code>&#8201;&#8212;&#8201;thrown when the statement was
automatically rolled back because of deadlock or other transaction serialization failures. (SQLstate class <code>40</code>)</p>
</li>
<li>
<p><code>java.sql.SQLTransientConnectionException</code>&#8201;&#8212;&#8201;thrown for connection operations
that might succeed on retry without any changes. (SQLstate class <code>08</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.sql.SQLWarning</code> should only be used to signal warnings, it should never be thrown
by a JDBC driver.</p>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.DataTruncation</code>&#8201;&#8212;&#8201;thrown when a data truncation
error happens, can also be used as a warning.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unfortunately Jaybird does not yet fully use this exception hierarchy, we are working to improve this with the next versions of Jaybird.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each of three layers in Jaybird use exceptions most appropriate to the specific layer.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subclasses of <code>java.sql.SQLException</code> are thrown by the JDBC, XCA, and GDS layers.
In addition to the JDBC-provided exceptions, Jaybird has a few subclasses that might be interesting to an application:</p>
<div class="ulist">
<ul>
<li>
<p><em class="until">Jaybird 6</em> <code>org.firebirdsql.jdbc.FBDriverConsistencyCheckException</code>&#8201;&#8212;&#8201;this exception is thrown when driver detects an internal inconsistent state.
SQL state is <code>HY000</code>.</p>
</li>
<li>
<p><code>org.firebirdsql.jdbc.FBDriverNotCapableException</code>&#8201;&#8212;&#8201;this exception is thrown when an unsupported method is called, extends <code>java.sql.SQLFeatureNotSupportedException</code>.
SQL state is <code>0A000</code>.</p>
</li>
<li>
<p><code>org.firebirdsql.jdbc.FBSQLParseException</code>&#8201;&#8212;&#8201;this exception is thrown when incorrect escaped syntax is detected when parsing JDBC escapes.
SQL state is <code>42000</code>.</p>
</li>
<li>
<p><code>org.firebirdsql.jdbc.field.TypeConversionException</code>&#8201;&#8212;&#8201;this exception is thrown when the driver is asked to perform a type conversion that is not defined in the JDBC specification, or otherwise not supported by Jaybird.
For a table of allowed type conversions see <a href="#datatypeconversion">Data Type Conversion Table</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><em class="until">Jaybird 5</em> Subclasses of <code>javax.resource.ResourceException</code> are thrown by the JCA layer when an error happens in the JCA-related code.
The upper layer converts this exception into a subclass of <code>java.sql.SQLException</code>.
If the <code>ResourceException</code> was caused by a <code>SQLException</code> or <code>GDSException</code>, the latter is extracted during conversion, preserving the error code.
If <code>ResourceException</code> was caused by an error condition not related to an error returned by the database engine, the error code of the <code>SQLException</code> remains 0.</p>
</li>
<li>
<p>Subclasses of <code>javax.transaction.XAException</code> are thrown when an XA protocol error happens in the JCA/XCA layer.
Similar to the previous case, <code>XAException</code> can wrap the <code>SQLException</code> or <code>GDSException</code>, which are extracted during exception conversion to preserve the error code.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_sql_states"><a class="anchor" href="#_sql_states"></a>3.4. SQL states</h3>
<div class="paragraph">
<p>Jaybird supports the SQLstate values from the SQL:2003 standard,<sup class="footnoteref">[<a class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>
however only few states nicely map into the Firebird error codes.</p>
</div>
<div class="paragraph">
<p>Applications can use the SQLstate codes in the error handling routines
which should handle errors that are returned from different databases.
But since there is little agreement between RDBMS vendors, this method
can be used only for very coarse error distinction.</p>
</div>
</div>
<div class="sect2">
<h3 id="_useful_firebird_error_codes"><a class="anchor" href="#_useful_firebird_error_codes"></a>3.5. Useful Firebird error codes</h3>
<div class="paragraph">
<p>Contrary to the SQLstates, the Firebird native error codes are
extremely useful to determine the type of an error that happened.</p>
</div>
<div class="paragraph">
<p>Here you can find a short list of error codes, symbolic names of a
corresponding constant in a <code>org.firebirdsql.gds.ISCConstants</code> class,
the error message and short explanation of an error.</p>
</div>
<div class="paragraph">
<p><strong>TODO</strong> Needs revising now Jaybird tries to pull the most important error code to the top</p>
</div>
<div class="sect3">
<h4 id="_ddl_errors"><a class="anchor" href="#_ddl_errors"></a>3.5.1. DDL Errors</h4>
<div class="paragraph">
<p>DDL errors happen during execution of DDL requests, and two primary error codes
are used in Firebird while executing the DDL operations. There are few
other rare cases not mentioned here, but the corresponding error
messages contain enough information to understand the reason of an
error.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544351L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_no_meta_update</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"unsuccessful metadata update"</code></p>
</div>
<div class="paragraph">
<p>This error is returned when the requested DDL operation cannot be completed, for
example the application tries to define a primary key that will exceed the
maximum allowed key size.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544510L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_lock_timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In combination with <code>isc_obj_in_use</code>
(335544453L), this means that the DDL command tries to modify an object that
is used in some other place, usually in another transaction. The
complete error message will contain the name of the locked object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544569L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_dsql_error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the third error code is either
<code>isc_dsql_datatype_err</code> or <code>isc_dsql_command_err</code>, then additional error
codes and arguments specify the reason why the operation has failed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_lock_errors"><a class="anchor" href="#_lock_errors"></a>3.5.2. Lock Errors</h4>
<div class="paragraph">
<p>Lock errors are reported by Firebird primarily when the application tries to
modify a record which is already modified by a concurrent transaction.
Depending on the transaction parameters such error can be reported
either right after detection or after waiting some defined timeout
hoping that concurrent transaction will either commit or rollback and
eventually release the resource. More information on transaction locking
modes can be found in section <a href="#transactions">Using transactions</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544345L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_lock_conflict</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"lock conflict on no wait transaction"</code></p>
</div>
<div class="paragraph">
<p>This error is returned when a "no wait" transaction needs to acquire a lock
but finds another concurrent transaction holding that lock.</p>
</div>
<div class="paragraph">
<p>Instead of waiting the predefined timeout hoping that concurrent
transaction will either commit or rollback, an error is returned to
notify an application about the situation.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544510L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_lock_timeout</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"lock time-out on wait transaction"</code></p>
</div>
<div class="paragraph">
<p>Similar to the <code>isc_lock_conflict</code>, but this error is returned when the lock timeout that
was specified for the current transaction expired while waiting for a lock.</p>
</div>
<div class="paragraph">
<p>Another source of this error are DDL operations that try to obtain a
lock on a database object that is currently used in some other place.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544336L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_deadlock</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"deadlock"</code></p>
</div>
<div class="paragraph">
<p>Two transactions experience a deadlock when each of them has a lock on a
resource on which the other is trying to obtain a lock.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_referential_integrity_errors"><a class="anchor" href="#_referential_integrity_errors"></a>3.5.3. Referential Integrity Errors</h4>
<div class="paragraph">
<p>Referential integrity constraints ensure that the database remains in a
consistent state after the DML operation and/or whole transaction is
completed. Three primary error codes are returned when the defined
constraints are violated. The error messages are self-explanatory.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544665L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_unique_key_violation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>violation of PRIMARY or UNIQUE KEY constraint "{0}" on table "{1}"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544558L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_check_constraint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Operation violates CHECK constraint {0} on view or table {1}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544466L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_foreign_key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>violation of FOREIGN KEY constraint "{0}" on table "{1}"</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dsql_errors"><a class="anchor" href="#_dsql_errors"></a>3.5.4. DSQL Errors</h4>
<div class="paragraph">
<p>This group contains secondary codes for the primary error code
<code>isc_dsql_error</code> (<code>335544569L</code>), that has a message
<code>"Dynamic SQL Error"</code>.</p>
</div>
<div class="paragraph">
<p>In most situations, Jaybird 3 and higher will put this secondary error code in the
<code>SQLException</code> instead of <code>isc_dsql_error</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544573L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_dsql_datatype_err</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"Data type unknown"</code></p>
</div>
<div class="paragraph">
<p>Usually this error is reported during DDL operation when the specified
data type is either unknown or cannot be used in the specified
statement. However it can also happen in DML operation, e.g. when an
<code>ORDER BY</code> clause contains unknown collation, or if a parameter is used
in a <code>SELECT</code> clause without explicit cast.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544570L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_dsql_command_err</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"Invalid command"</code></p>
</div>
<div class="paragraph">
<p>Error happens either during parsing the specified SQL request or by
handling the DDL command.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_other_errors"><a class="anchor" href="#_other_errors"></a>3.5.5. Other Errors</h4>
<div class="paragraph">
<p>This table contains other errors that might be interesting to the
application developer, however they do not fall into any of the previous
categories.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544321L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_arith_except</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"arithmetic exception, numeric overflow, or string truncation"</code></p>
</div>
<div class="paragraph">
<p>Happens at runtime when an arithmetic exception happens, like division
by zero or the numeric overflow (e.g. number does not fit the 64 bits
limit).</p>
</div>
<div class="paragraph">
<p>Another source of this error are string operations, like string
concatenation producing a too long string, impossibility to transliterate
characters between character sets, etc.</p>
</div>
<div class="paragraph">
<p>Future versions of Firebird will provide a secondary code to distinguish
the exact reason of an error.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544348L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_no_cur_rec</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"no current record for fetch operation"</code></p>
</div>
<div class="paragraph">
<p>Happens when the application asks Firebird to fetch a record, but no record
is available for fetching.</p>
</div>
<div class="paragraph">
<p>Java applications should never get this error, since checks in the JDBC
driver should prevent the application from executing a fetch operation on the server
side.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544374L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_stream_eof</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"attempt to fetch past the last record in a record stream"</code></p>
</div>
<div class="paragraph">
<p>Application tries to execute fetch operation after all records have
already been fetched.</p>
</div>
<div class="paragraph">
<p>Similar to the previous error, Java applications should not get this
error due to the checks that happen before issuing the fetch request to
the server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544517L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_except</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>"exception {0}"</code></p>
</div>
<div class="paragraph">
<p>An custom exception has been raised on the server. Java application can
examine the underlying GDSException to extract the exception message.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">335544721L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isc_network_error</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Unable to complete network request to host "{0}"</code></p>
</div>
<div class="paragraph">
<p>This error is thrown when Jaybird cannot establish a connection
to the database server due to a network issues, e.g. host name is
specified incorrectly, Firebird has not been started on the remote host,
firewall configuration prevents client from establishing the connection,
etc.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="statements"><a class="anchor" href="#statements"></a>4. Executing statements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After obtaining a connection, the next thing to do is to execute an SQL statement.
The JDBC specification distinguishes three kinds of statements:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Regular statements to execute constant SQL statements (statements without parameters),</p>
</li>
<li>
<p>prepared statements to execute SQL statements with parameters,</p>
</li>
<li>
<p>and callable statements to execute stored procedures.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_the_java_sql_statement_interface"><a class="anchor" href="#_the_java_sql_statement_interface"></a>4.1. The java.sql.Statement interface</h3>
<div class="paragraph">
<p>The <code>java.sql.Statement</code> interface is the simplest interface to execute SQL statements.
It distinguishes three types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>statements that return a result set, or, in other words, queries;</p>
</li>
<li>
<p>statements that change the state of the database but return no result set;</p>
</li>
<li>
<p><code>INSERT</code> statements (or other statements with similar behaviour) that return the values of the columns which were generated by the database engine while inserting the record.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s check one of the typical usages shown below.
In general the usage pattern of the statement consists of three steps.</p>
</div>
<div class="listingblock">
<div class="title">Typical way to execute query to get information about the user</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement stmt = connection.createStatement(); <i class="conum" data-value="1"></i><b>(1)</b>
     ResultSet rs = stmt.executeQuery(
         "SELECT firstName, lastName FROM users" +
         " WHERE userId = 5") <i class="conum" data-value="2"></i><b>(2)</b>
){
  if (rs.next()) {
    String firstName = rs.getString(1);
    String lastName = rs.getString(2);
  }
} <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a <code>Statement</code> object by calling the <code>createStatement()</code> method of the <code>Connection</code> object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use the Statement object by calling its methods, in our case we execute a simple query <code>SELECT firstName, lastName FROM users WHERE userId = 5</code>.
Processing of the query result will be discussed in details in <a href="#resultsets">Working with result sets</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Close the result set and statement to release all allocated resources.
In our example this is done using the try-with-resources block.
With try-with-resources, Java takes care of closing resources in the right order, even if exceptions occur, or if a resource was not allocated (say, if <code>executeQuery</code> throws an exception).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As the connection object is the factory for the statement objects, this puts a constraint on the object lifetime: statements are bound to the connection;
when the connection is closed, all statements that were created by that connection become invalid and the resources allocated by them are released.
However, despite that these resources are released when the connection closes, it is strongly recommended to use the try-with-resources block, to guarantee that resources are released as soon as possible because of reasons that will be discussed later.</p>
</div>
<div class="paragraph">
<p>A statement can be executed using the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Statement.executeQuery(String)</code>&#8201;&#8212;&#8201;executes a <code>SELECT</code> or other result set producing statement, and returns a result set.
If the specified statement does not produce a result set, an <code>SQLException</code> is thrown after statement execution<sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup>.</p>
</li>
<li>
<p><code>Statement.executeUpdate(String)</code>&#8201;&#8212;&#8201;executes other DML (Data Manipulation Language, e.g. <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>) or DDL (Data Definition Language<sup class="footnote">[<a id="_footnoteref_5" class="footnote" href="#_footnotedef_5" title="View footnote.">5</a>]</sup>) statements and returns the number of updated rows.
If the specified statement is a query or otherwise produces a result set, an <code>SQLException</code> is thrown.</p>
</li>
<li>
<p><code>Statement.execute(String)</code>&#8201;&#8212;&#8201;executes a statement and returns <code>true</code> when the statement returned a result set, or <code>false</code> if the result has no result set, but has an update count or nothing as its result.
You can use <code>Statement.getResultSet()</code> to get the result of the executed query, or you can use <code>Statement.getUpdateCount()</code> when you have executed an update statement.</p>
<div class="paragraph">
<p>Formally, this method is also used for statements with multiple results (result sets and update counts), but Firebird only supports at most one result set and at most one update count.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>These <code>execute</code> methods have several variants for additional features covered in the reference section <a href="#ref-generatedkeys">Generated keys retrieval</a>.</p>
</div>
<div class="paragraph">
<p>A statement is closed by calling the <code>Statement.close()</code> method, or by using a try-with-resources which calls <code>close()</code> behind the scenes.
After a close, the statement object is invalid and cannot be used anymore.</p>
</div>
<div class="paragraph">
<p>It is allowed to use the same statement object to execute different types of queries, one after another.
The code below contains a short example which first performs a select to find the ID of the user 'Joe Doe', and if the record is found, it enables his account.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Concatenation of values into a query string as done in this example is not a good practice as it can leave your code vulnerable to SQL injection.</p>
</div>
<div class="paragraph">
<p>In this specific case it is safe to do as the values are integers.
In general: don&#8217;t do this, use a prepared statement with parameters instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Using the same statement object multiple times to enable user account</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement stmt = connection.createStatement();
     ResultSet rs = stmt.executeQuery(
         "SELECT userId FROM users " +
         "WHERE lastName = 'Doe' AND firstName = 'Joe'")) {
  if (rs.next()) {
    int userId = rs.getInt(1);

    int rowsUpdated = stmt.executeUpdate(
        "UPDATE accounts SET accountEnabled = 1 " +
        "WHERE userId = " + userId);

    if (rowsUpdated == 0)
      rowsUpdated = stmt.executeUpdate(
          "INSERT INTO accounts (userId, enabled) " +
          "VALUES (" + userId + ", 1)");

    if (rowsUpdated != 1)
      throw new SomeException(
          "User was not updated correctly.");
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The way the code is constructed is quite tricky because of the result set lifetime constraints that are defined by the JDBC specification, please read the chapter <a href="#resultsets">Working with result sets</a> for more details.</p>
</div>
<div class="paragraph">
<p>However, here it is done intentionally to emphasize that a single object is used to execute <code>SELECT</code> and <code>UPDATE</code>/<code>INSERT</code> statements.
It also shows how to check whether the executed statement modified the expected number of rows&#8201;&#8212;&#8201;the application first tries to update the account and only if no rows were updated, it inserts new record into the <code>accounts</code> table.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This example of 'try update, then insert' approach can be better handled using <a href="https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref40/firebird-40-language-reference.html#fblangref40-dml-merge" target="_blank" rel="noopener"><code>MERGE</code></a> or <a href="https://www.firebirdsql.org/file/documentation/html/en/refdocs/fblangref40/firebird-40-language-reference.html#fblangref40-dml-update-or-insert" target="_blank" rel="noopener"><code>UPDATE OR INSERT</code></a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When an application needs to execute DDL statements, it is recommended to use the <code>Statement.execute(String)</code> method, as in this case the amount of modified records makes little sense.
The next example shows the creation of database tables using this method.</p>
</div>
<div class="listingblock">
<div class="title">Example of creating database tables</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement stmt = connection.createStatement()) {
  stmt.execute("CREATE TABLE customer(" +
      "customerId INTEGER NOT NULL PRIMARY KEY, " +
      "firstName VARCHAR(20) NOT NULL, " +
      "lastName VARCHAR(40) NOT NULL)");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As mentioned earlier, the <code>Statement.execute(String)</code> method can also be used to execute statements of an unknown type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement stmt = connection.createStatement()) {
  boolean hasResultSet = stmt.execute(sql);
  if (hasResultSet) {
    ResultSet rs = stmt.getResultSet();
    ...
  } else {
    int updateCount = stmt.getUpdateCount();
    ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>According to the JDBC specification, the <code>getResultSet()</code> and <code>getUpdateCount()</code> methods can be only called once per result.</p>
</div>
<div class="paragraph">
<p><em class="until">Jaybird 5.0.5</em> In Jaybird 5.0.4 and earlier, calling the <code>getResultset()</code> method a second time will throw an exception.<br>
<em class="since">Jaybird 5.0.5</em> Since Jaybird 5.0.5, calling <code>getResultSet()</code> multiple times will return the same instance of <code>ResultSet</code> it returned from the first call to <code>getResultSet()</code> or from <code>executeQuery()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_statement_behind_the_scenes"><a class="anchor" href="#_statement_behind_the_scenes"></a>4.2. Statement behind the scenes</h3>
<div class="paragraph">
<p>The previous examples requires us to discuss the statement object dynamics, its lifecycle and how it affects other subsystems in details.</p>
</div>
<div class="sect3">
<h4 id="_statement_dynamics"><a class="anchor" href="#_statement_dynamics"></a>4.2.1. Statement dynamics</h4>
<div class="paragraph">
<p>When a Java application executes a statement, a lot more operations happen behind the scenes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A new statement object is allocated on the server.
Firebird returns a 32-bit identifier of the allocated object, a statement handle, that must be used in next operations.</p>
</li>
<li>
<p>An SQL statement is compiled into an executable form and is associated with the specified statement handle.</p>
</li>
<li>
<p>Jaybird asks the server to describe the statement and Firebird returns information about the statement type and possible statement input parameters (we will discuss this with prepared statements) and output parameters, namely the result set columns.</p>
</li>
<li>
<p>If no parameters are required for the statement, Jaybird tells Firebird to execute the statement, passing the statement handle to the corresponding method.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After this Jaybird has to make a decision depending on the operation that was called.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>Statement.execute()</code> was used, Jaybird only checks the statement type to decide whether it should return <code>true</code>, telling the
application that there is a result set for this operation, or <code>false</code>, if the statement does not return any result set.</p>
</li>
<li>
<p>If <code>Statement.executeUpdate()</code> was called, Jaybird asks Firebird to give the information about the number of affected rows.
This method can be called only if the statement type tells that no result set can be returned by the statement.</p>
<div class="paragraph">
<p>When called for queries, an exception is thrown despite the fact that the statement was successfully executed on the server.</p>
</div>
</li>
<li>
<p>If <code>Statement.executeQuery()</code> was called and the statement type indicates that a result set can be returned, Jaybird constructs a <code>ResultSet</code> object and returns it to the application.
No additional checks, like whether the result set contains rows, are performed, as that is the responsibility of the <code>ResultSet</code> object.</p>
<div class="paragraph">
<p>If this method is used for statements that do not return result set, an exception is thrown despite the fact that the statement was successfully executed on the server.</p>
</div>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The described behaviour may change in the future by throwing the exception <strong>before</strong> executing the statement.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When an application does not need to know how many rows were modified, it should use the <code>execute()</code> method instead of <code>executeUpdate()</code>.
This saves an additional call to the server to get the number of modified rows which can increase the performance in situations where network latency is comparable with the statement execution times.</p>
</div>
<div class="paragraph">
<p>The <code>execute()</code> method is also the only method that can be used when the application does not know what kind of statement is being executed (for example, an application that allows the user to enter SQL statements to execute).</p>
</div>
<div class="paragraph">
<p>After using the statement object, an application should close it.
Two different possibilities exist: to close the result set object associated with the statement handle and to close the statement completely.</p>
</div>
<div class="paragraph">
<p>If, for example, we want to execute another query, it is not necessary to completely release the allocated statement.
Jaybird only needs to compile a new statement on the existing statement handle before using it, in other words we can skip step 1 (allocating a new statement handle).
This saves us one round-trip to the server over the network, which might improve the application performance.</p>
</div>
<div class="paragraph">
<p>If we close the statement completely, the allocated statement handle is no longer usable.
In theory, Jaybird could allocate a new statement handle, however the JDBC specification does not allow use of a <code>Statement</code> object after <code>close()</code> has been called.</p>
</div>
</div>
<div class="sect3">
<h4 id="_statement_lifetime_and_ddl"><a class="anchor" href="#_statement_lifetime_and_ddl"></a>4.2.2. Statement lifetime and DDL</h4>
<div class="paragraph">
<p>Step 2 (compiling the SQL statement) in the previous section is probably the most important, and usually, most expensive part of the statement execution life cycle.</p>
</div>
<div class="paragraph">
<p>When Firebird server receives a "prepare statement" call, it parses the SQL statement and converts it into the executable form: BLR, or Binary Language Representation.
BLR contains low-level commands to traverse the database tables, conditions that are used to filter records, defines the order in which records are accessed, indices that are used to improve the performance, etc.</p>
</div>
<div class="paragraph">
<p>When a statement is prepared, it holds the references to all database object definitions that are used during that statement execution.
This mechanism preserves the database schema consistency, it saves the statement objects from "surprises" like accessing a database table that has been removed by another application.</p>
</div>
<div class="paragraph">
<p>However, holding references to the database objects has one very unpleasant effect: it is not possible to upgrade the database schema, if there are active connections to the database with open statements referencing the objects being upgraded.
In other words, if two application are running and one is trying to modify the table, view, procedure or trigger definition while another one is accessing those objects, the first application will receive an error 335544453 &#8220;object is in use&#8221;.</p>
</div>
<div class="paragraph">
<p>To avoid this problem, it is strongly recommended to close the statement as soon as it is no longer needed.
This invalidates the BLR and release all references to the database objects, making them available for the modification.</p>
</div>
<div class="paragraph">
<p>Special care should be taken when statement pooling is used.
In that case, statements are not released even if the <code>close()</code> method is called.
The only possibility to close the pooled statements is to close the pooled connections.
Please check the documentation of your connection pool for more information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_java_sql_preparedstatement_interface"><a class="anchor" href="#_the_java_sql_preparedstatement_interface"></a>4.3. The java.sql.PreparedStatement interface</h3>
<div class="paragraph">
<p>As we have seen, Jaybird already performs internal optimization when it comes to multiple statement execution&#8201;&#8212;&#8201;it can reuse the allocated statement handle in subsequent calls.
However, this improvement is very small and sometimes can even be negligible compared to the time needed to compile the SQL statement into the BLR form.</p>
</div>
<div class="paragraph">
<p>The <code>PreparedStatement</code> interface addresses such inefficiencies.
An object that implements this interface represents a precompiled statement that can be executed multiple times.
If we use the execution flow described in the "<a href="#_statement_dynamics">Statement dynamics</a>" section, it allows us to go directly to step 4 for repeated executions.</p>
</div>
<div class="paragraph">
<p>However, executing the same statement with the same values rarely makes sense, unless we want to fill the table with the same data, which usually is not the case.
Therefore, JDBC provides support for parametrized statements&#8201;&#8212;&#8201;SQL statements where literals are replaced with question marks (&#8216;<code>?</code>&#8217;), so-called positional parameters.
The application then assigns values to the parameters before executing the statement.</p>
</div>
<div class="paragraph">
<p>Our first example in this chapter can be rewritten as shown below.
At first glance the code becomes more complicated without any visible advantage.</p>
</div>
<div class="listingblock">
<div class="title">Example for user account update rewritten using prepared statements</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (PreparedStatement stmt1 = connection.prepareStatement(
         "SELECT userId FROM users WHERE " +
         "lastName = ? AND firstName = ?")) {
  stmt1.setString(1, "Doe");
  stmt1.setString(2, "Joe");
  try (ResultSet rs = stmt1.executeQuery()) {

    if (rs.next()) {
      int userId = rs.getInt(1);

      try (PreparedStatement stmt2 =
               connection.prepareStatement(
                   "UPDATE accounts SET accountEnabled = 1 " +
                   "WHERE userId = ?" )) {
        stmt2.setInt(1, userId);

        int rowsUpdated = stmt2.executeUpdate();

        if (rowsUpdated == 0) {
          try (PreparedStatement stmt3 =
                   connection.prepareStatement(
                       "INSERT INTO accounts " +
                       "(userId, enabled) VALUES (?, 1)")) {
            stmt3.setInt(1, userId);
            rowsUpdated = stmt3.executeUpdate();
          }
        }
        if (rowsUpdated != 1)
          throw new SomeException(
              "User was not updated correctly.");
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>First, instead of using just one statement object we have to use three, one per statement.</p>
</li>
<li>
<p>Second, before executing the statement we have to set parameters first.
As is shown in the example, parameters are referenced by their position.
The <code>PreparedStatement</code> interface provides setter methods for all primitive types in Java as well as for some widely used SQL data types (BLOBs, CLOBs, etc).
The <code>NULL</code> value is set by calling the <code>PreparedStatement.setNull(int)</code> method.</p>
</li>
<li>
<p>Third, we are now forced to use four nested try-with-resources blocks, which makes code less readable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, where&#8217;s the advantage?
First of all, prepared statements parameters protect against SQL injection as the values are sent separately from the statement itself.
It is not possible to change the meaning of a statement due to incorrect string concatenation, so data leaks or other problems caused by SQL injection can be avoided.
Second of all, the driver handles conversion of Java object types to the correct format for the target datatype in Firebird: you don&#8217;t need to convert a Java value to the correct string literal format for Firebird&#8217;s SQL dialect.</p>
</div>
<div class="paragraph">
<p>To address some identified problems, we can redesign our application to prepare those statements before calling that code (for example in a constructor) and close them when the application ends.
In that case the code can be more compact (see the next example).
Unfortunately, the application is now responsible for prepared statement management.
When a connection is closed, the prepared statement object will be invalidated, but the application will not be notified.
And when the application uses similar statements in different parts of the application, the refactoring might affect many classes, possibly destabilizing the code.
So, the refactoring on this example is not something we want to do.</p>
</div>
<div class="listingblock">
<div class="title">Rewritten example to let application manage prepared statements</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// prepared statement management
PreparedStatement queryStmt =
    connection.prepareStatement(queryStr);
PreparedStatement updateStmt =
    connection.prepareStatement(updateStr);
PreparedStatement insertStmt =
    connection.prepareStatement(insertStr);

......................

// query management
queryStmt.clearParameters();
queryStmt.setString(1, "Doe");
queryStmt.setString(2, "Joe");
try (ResultSet rs = queryStmt.executeQuery()) {
  if (rs.next()) {
    int userId = rs.getInt(1);

    updateStmt.clearParameters();
    updateStmt.setInt(1, userId);
    int rowsUpdated = updateStmt.executeUpdate();

    if (rowsUpdated == 0) {
      insertStmt.clearParameters();
      insertStmt.setInt(1, userId);
      rowsUpdated = insertStmt.executeUpdate();
    }

    if (rowsUpdated != 1)
      throw new SomeException(
          "User was not updated correctly.");
  }
}
......................

// prepared statement cleanup
insertStmt.close();
updateStmt.close();
queryStmt.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The answer to the advantage question is hidden in the <code>prepareStatement(String)</code> call.
Since the same statement can be used for different parameter values, the connection object could have a possibility to perform prepared statement caching.
A JDBC driver can ignore the request to close the prepared statement, save it internally and reuse it each time application asks to prepare an SQL statement that is known to the connection.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Jaybird currently does not perform statement caching
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="callable-statement"><a class="anchor" href="#callable-statement"></a>4.4. The java.sql.CallableStatement interface</h3>
<div class="paragraph">
<p>The <code>CallableStatement</code> interface extends <code>PreparedStatement</code> with methods for executing and retrieving results from stored procedures.
It was introduced in the JDBC specification to unify access to the stored procedures across different database systems.
The main difference to <code>PreparedStatement</code> is that the procedure call is specified using the portable escape syntax<sup class="footnote">[<a id="_footnoteref_6" class="footnote" href="#_footnotedef_6" title="View footnote.">6</a>]</sup>:</p>
</div>
<div class="literalblock">
<div class="title">Unified escape syntax for stored procedure execution</div>
<div class="content">
<pre>procedure call ::= {[?=]call &lt;procedure-name&gt;(&lt;params&gt;)}
params ::= &lt;param&gt; [, &lt;param&gt; ...]</pre>
</div>
</div>
<div class="paragraph">
<p>Each stored procedure is allowed to take zero or more input parameters, similar to the <code>PreparedStatement</code> interface.
After being executed, a procedure can either return data in the output parameters or it can return a result set that can be traversed.
Though the interface is generic enough to support database engines that can return both and have multiple result sets.
These features are of no interest to Jaybird users, since Firebird does not support them.</p>
</div>
<div class="paragraph">
<p>The IN and OUT parameters are specified in one statement.
The syntax above does not allow to specify the type of the parameter, therefore additional facilities are needed to tell the driver which parameter is will contain output values, the rest are considered to be IN parameters.</p>
</div>
<div class="sect3">
<h4 id="_firebird_stored_procedures"><a class="anchor" href="#_firebird_stored_procedures"></a>4.4.1. Firebird stored procedures</h4>
<div class="paragraph">
<p>Firebird stored procedures represent a piece of code written in the PSQL language that allows SQL statement execution at the native speed of the engine and provides capabilities for a limited execution flow control.
The PSQL language is not a general purpose language, therefore its capabilities are limited when it comes to interaction with other systems.</p>
</div>
<div class="paragraph">
<p>Firebird stored procedures can be classified as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Procedures that do not return any results.
These are stored procedures that do not contain the <code>RETURNS</code> keyword in their header.</p>
</li>
<li>
<p>Procedures that return only a single row of results.
These are stored procedures that contain the <code>RETURNS</code> keyword in their header, but do not contain the <code>SUSPEND</code> keyword in their procedure body.
These procedures can be viewed as functions that return multiple values.
These procedures are executed by using the <code>EXECUTE PROCEDURE</code> statement.</p>
</li>
<li>
<p>Procedures that return a result set, also called &#8220;selectable stored procedures&#8221;.
These are stored procedures that contain the <code>RETURNS</code> keyword in their header and the <code>SUSPEND</code> keyword in their procedure body, usually within a loop.
Selectable procedures are executed using the <code>"SELECT * FROM myProcedure(&#8230;&#8203;)"</code> SQL statement.
It is also allowed to use the <code>EXECUTE PROCEDURE</code> statement, however that might produce strange results, since for selectable procedures it is equivalent to executing a <code>SELECT</code> statement, but doing only one fetch after the select.
If the procedure implementation relies on the fact that all rows that it returns must be fetched, the logic will be broken.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Consider the following stored procedure that returns factorial of the specified number.</p>
</div>
<div class="listingblock">
<div class="title">Source code for the procedure that multiplies two integers</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="sql">CREATE PROCEDURE factorial(
  max_value INTEGER
) RETURNS (
  factorial INTEGER
) AS
  DECLARE VARIABLE temp INTEGER;
  DECLARE VARIABLE counter INTEGER;
BEGIN
  counter = 0;
  temp = 1;
  WHILE (counter &lt;= max_value) DO BEGIN
    IF (counter = 0) THEN
      temp = 1;
    ELSE
      temp = temp * counter;
    counter = counter + 1;
  END
  factorial = temp;
END</code></pre>
</div>
</div>
<div class="paragraph">
<p>This procedure can be executed using the EXECUTE PROCEDURE call.
When it is done in isql, the output looks as follows.</p>
</div>
<div class="literalblock">
<div class="title">Output of the EXECUTE PROCEDURE call in isql</div>
<div class="content">
<pre>SQL&gt; EXECUTE PROCEDURE factorial(5);

   FACTORIAL
============
         120</pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s modify this procedure to return each intermediate result to the client.</p>
</div>
<div class="listingblock">
<div class="title">Modified procedure that returns each intermediate result</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="sql">CREATE PROCEDURE factorial_selectable(
  max_value INTEGER
) RETURNS (
  row_num INTEGER,
  factorial INTEGER
) AS
  DECLARE VARIABLE temp INTEGER;
  DECLARE VARIABLE counter INTEGER;
BEGIN
  counter = 0;
  temp = 1;
  WHILE (counter &lt;= max_value) DO BEGIN
    IF (row_num = 0) THEN
      temp = 1;
    ELSE
      temp = temp * counter;
    factorial = temp;
    row_num = counter;
    counter = counter + 1;
    SUSPEND;
  END
END</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you create this procedure using the isql command line tool and then execute <code>SELECT * FROM factorial_selectable(5)</code>, the output
will be like this:</p>
</div>
<div class="literalblock">
<div class="title">Output of the modified procedure</div>
<div class="content">
<pre>SQL&gt; SELECT * FROM factorial_selectable(5);

     ROW_NUM    FACTORIAL
============ ============
           0            1
           1            1
           2            2
           3            6
           4           24
           5          120</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_callablestatement"><a class="anchor" href="#_using_the_callablestatement"></a>4.4.2. Using the CallableStatement</h4>
<div class="paragraph">
<p>Let&#8217;s see how the procedures defined above can be accessed from Java.</p>
</div>
<div class="paragraph">
<p>First, we can execute this procedure from the first example in the previous section using <code>EXECUTE PROCEDURE</code> and <code>PreparedStatement</code>, however this approach requires some more code for result set handling.</p>
</div>
<div class="listingblock">
<div class="title">Example of using the PreparedStatement to call executable procedure</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (PreparedStatement stmt = connection.prepareStatement(
         "EXECUTE PROCEDURE factorial(?)")) {

  stmt.setInt(1, 2);

  try (ResultSet rs = stmt.executeQuery()) {
    rs.next(); // move cursor to the first row

    int result = rs.getInt(1);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, the standard for calling stored procedures in JDBC is to use the <code>CallableStatement</code>.
The call can be specified using the escaped syntax, but native Firebird <code>EXECUTE PROCEDURE</code> syntax is also supported.</p>
</div>
<div class="listingblock">
<div class="title">Accessing the executable procedure via CallableStatement</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (CallableStatement stmt = connection.prepareCall(
         "{call factorial(?,?)}")) {

  stmt.setInt(1, 2);
  stmt.registerOutParameter(2, Types.INTEGER);

  stmt.execute();

  int result = stmt.getInt(2);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note the difference in the number of parameters used in the examples.
The first example contained only IN parameter on position 1 and the OUT parameter was returned in the <code>ResultSet</code> on the first position, so it was accessed via index 1.</p>
</div>
<div class="paragraph">
<p>The latter example additionally contains the OUT parameter in the call.
We have used the <code>CallableStatement.registerOutParameter</code> method to tell the driver that the second parameter in our call is an OUT parameter of type INTEGER.
Parameters that were not marked as OUT are considered by Jaybird as IN parameters.
Finally, the <code>EXECUTE PROCEDURE factorial(?)</code> SQL statement is prepared and executed.
After executing the procedure call, we get the result from the appropriate getter method.</p>
</div>
<div class="paragraph">
<p>It is worth mentioning that the stored procedure call preparation happens in the <code>CallableStatement.execute</code> method, and not in the <code>prepareCall</code> method of the <code>Connection</code> object.
Reason for this deviation from the specification is that Firebird does not allow to prepare a procedure without specifying parameters and set them only after the statement is prepared.
It seems that this part of the JDBC specification is modelled after the Oracle RDBMS and a workaround for this issue had to be delivered.
Another side effect of this issue is, that it is allowed to intermix input and output parameters, for example in the "IN, OUT, IN, OUT, OUT, IN" order.
Not that it makes much sense to do this, but it might help in some cases when porting applications from another database server.</p>
</div>
<div class="paragraph">
<p>It is also allowed to use a procedure call parameter both as an input and output parameter.
It is recommended to use this only when porting applications from the database servers that allow INOUT parameter types, such as Oracle.</p>
</div>
<div class="paragraph">
<p>The actual stored procedure call using the <code>CallableStatement</code> is equivalent to the call using the prepared statement as shown in the first example.
There is no measurable performance differences when using the callable statement interface.</p>
</div>
<div class="paragraph">
<p>The JDBC specification allows another syntax for the stored procedure calls:</p>
</div>
<div class="listingblock">
<div class="title">Calling stored procedure using different syntax</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (CallableStatement stmt = connection.prepareCall(
         "{?= call factorial(?}")) {

  stmt.registerOutParameter(1, Types.INTEGER);
  stmt.setInt(2, 2);

  stmt.execute();

  int result = stmt.getInt(1);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note, that input parameter now has index 2, and not 1 as in the previous example.
This syntax seems to be more intuitive, as it looks like a function call.
It is possible to use this syntax for stored procedures that return more than one parameter by combining code from the second and the last examples.</p>
</div>
<div class="paragraph">
<p>Firebird stored procedures can also return result sets.
This is achieved by using the SUSPEND keyword inside the procedure body.
This keyword returns the current values of the output parameters as a single row to the client.</p>
</div>
<div class="paragraph">
<p>The following example is more complex and shows a stored procedure that computes a set of factorial of the numbers up to the specified number of rows.</p>
</div>
<div class="paragraph">
<p>The SELECT SQL statement is the natural way of accessing the selectable procedures in Firebird.
You &#8220;select&#8221; from such procedures using the <code>Statement</code> or <code>PreparedStatement</code> objects.</p>
</div>
<div class="paragraph">
<p>With minor issues it is also possible to access selectable stored procedures through the <code>CallableStatement</code> interface.
The escaped call must include all IN and OUT parameters.
After the call is prepared, parameters are set the same way.
However, the application must explicitly tell the driver that selectable procedure is used and access to the result set is desired.
This is done by calling a Jaybird-specific method as shown in the example below.
When this is not done, the application has access only to the first row of the result set. <strong>TODO</strong> Outdated?</p>
</div>
<div class="paragraph">
<p>The getter methods from the <code>CallableStatement</code> interface will provide you access only to the first row of the result set.
To get access to the complete result set you have to either call the <code>executeQuery</code> method or the <code>execute</code> method followed by <code>getResultSet</code> method.</p>
</div>
<div class="listingblock">
<div class="title">Example of using selectable stored procedure via escaped syntax</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">import java.sql.*;
import org.firebirdsql.jdbc.*;
...
try (CallableStatement stmt = connection.prepareCall(
         "{call factorial(?, ?, ?)}")) {

  FirebirdCallableStatement fbStmt =
      (FirebirdCallableStatement)stmt;
  fbStmt.setSelectableProcedure(true);

  stmt.setInt(1, 5);
  stmt.registerOutParameter(2, Types.INTEGER); // first OUT
  stmt.registerOutParameter(3, Types.INTEGER); // second OUT

  try (ResultSet rs = stmt.executeQuery()) {

    while(rs.next()) {
      int firstCol = rs.getInt(1);             // first OUT
      int secondCol = rs.getInt(2);            // second OUT
      int anotherSecondCol = stmt.getInt(3);   // second OUT
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that OUT parameter positions differ when they are accessed through the <code>ResultSet</code> interface (the <code>firstCol</code> and <code>secondCol</code> variables in our example).
They are numbered in the order of their appearance in the procedure call starting with 1.</p>
</div>
<div class="paragraph">
<p>When OUT parameter is accessed through the <code>CallableStatement</code> interface (the <code>anotherSecondCol</code> parameter in our example), the registered position should be used.
In this case the result set can be used for navigation only.</p>
</div>
</div>
<div class="sect3">
<h4 id="_describing_output_and_input_parameters"><a class="anchor" href="#_describing_output_and_input_parameters"></a>4.4.3. Describing Output and Input Parameters</h4>
<div class="paragraph">
<p>The <code>PreparedStatement.getMetaData</code> method is used to obtain description of the columns that will be returned by the prepared SELECT statement.
The method returns an instance of <code>java.sql.ResultSetMetaData</code> interface that among other descriptions provides the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>column type, name of the type, its scale and precision if relevant;</p>
</li>
<li>
<p>column name, its label and the display size;</p>
</li>
<li>
<p>name of the table, to which this column belongs;</p>
</li>
<li>
<p>information whether the column is read-only or writable, whether it contains signed numbers, whether it can contain NULL values, etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, the JDBC 3.0 specification introduced the interface <code>java.sql.ParameterMetaData</code> that provides similar information for the input parameters of both <code>PreparedStatement</code> and <code>CallableStatement</code> objects.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Due to the implementation specifics of the escaped syntax support for callable statements, it is not allowed to call <code>getParameterMetaData</code> before all OUT parameters are registered.
Otherwise, the driver will try to prepare a procedure with an incorrect number of parameters and the database server will generate an error.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_batch_updates"><a class="anchor" href="#_batch_updates"></a>4.5. Batch Updates</h3>
<div class="paragraph">
<p>Batch updates are intended to group multiple update operations to be submitted to a database server to be processed at once.
Firebird 3.0 and earlier did not provide support for such functionality, so Jaybird 4 and earlier emulate it by issuing separate update commands.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 5</em> Firebird 4.0 added support for server-side batch updates, which is implemented in Jaybird 5 for prepared statements, see <a href="#stmt-batch-server-side">Server-side Batch Updates</a>.</p>
</div>
<div class="sect3">
<h4 id="_batch_updates_with_java_sql_statement_interface"><a class="anchor" href="#_batch_updates_with_java_sql_statement_interface"></a>4.5.1. Batch Updates with java.sql.Statement interface</h4>
<div class="paragraph">
<p>The <code>Statement</code> interface defines three methods for batch updates: <code>addBatch</code>, <code>executeBatch</code> and <code>clearBatch</code>.
You can add arbitrary <code>INSERT</code>/<code>UPDATE</code>/<code>DELETE</code> or DDL statement to the batch group.
Adding a statement that returns a result set is an error.</p>
</div>
<div class="listingblock">
<div class="title">Example of batch updates using Statement object</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement stmt = connection.createStatement()) {
  stmt.addBatch("UPDATE products " +
      "SET amount = amount - 1 WHERE id = 1");
  stmt.addBatch("INSERT INTO orders(id, amount) VALUES(1, 1)");

  int[] updateCounts = stmt.executeBatch();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JDBC specification recommends to turn the auto-commit mode off to guarantee standard behavior for all databases.
The specification explicitly states that behavior in auto-commit case is implementation defined.</p>
</div>
<div class="paragraph">
<p>In auto-commit mode, Jaybird executes a batch in a single transaction, i.e. the "all-or-nothing" principle.
A new transaction is started before the batch execution and is committed if there were no exceptions during batch execution, or is rolled back if at least one batch command generated an error.</p>
</div>
<div class="paragraph">
<p>The <code>Statement.executeBatch</code> method submits the job to the database server.
In case of successful execution of the complete batch, it returns an array of integers containing update counts for each of the commands.
Possible values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0 or positive value&#8201;&#8212;&#8201;an update count for the corresponding update/DDL statement.</p>
</li>
<li>
<p><code>Statement.SUCCESS_NO_INFO</code>&#8201;&#8212;&#8201;driver does not have any information about the update count, but it knows that statement was executed successfully.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Statement.executeBatch</code> method closes the current result set if one is open.
After execution, the batch is cleared.
Calling <code>execute</code>, <code>executeUpdate</code> and <code>executeQuery</code> before the batch is executed does not have any effect on the currently added batch statements.</p>
</div>
<div class="paragraph">
<p>If at least one statement from the batch fails, a <code>java.sql.BatchUpdateException</code> is thrown.
Jaybird will stop executing statements from batch after the first error.
In auto-commit mode it will also roll back the transaction.
An application can obtain update counts for the already executed statements using <code>getUpdateCounts</code> method of the <code>BatchUpdateException</code> class.
The returned array will always contain fewer entries than there were statements in the batch, as it will only report the update counts of successfully executed statements.</p>
</div>
</div>
<div class="sect3">
<h4 id="_batch_updates_with_java_sql_preparedstatement_and_java_sql_callablestatement"><a class="anchor" href="#_batch_updates_with_java_sql_preparedstatement_and_java_sql_callablestatement"></a>4.5.2. Batch Updates with java.sql.PreparedStatement and java.sql.CallableStatement</h4>
<div class="paragraph">
<p>Using batch updates with a prepared statement is conceptually similar to the <code>java.sql.Statement</code> approach.
The main difference is that only one statement can be used, but with different sets of parameter values.</p>
</div>
<div class="listingblock">
<div class="title">Example of batch updates with PreparedStatement</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (PreparedStatement stmt = connection.prepareStatement(
    "INSERT INTO products(id, name) VALUES(?, ?)")) {
  stmt.setInt(1, 1);
  stmt.setString(2, "apple");
  stmt.addBatch();

  stmt.setInt(1, 2);
  stmt.setString(2, "orange");
  stmt.addBatch();

  int[] updateCounts = stmt.executeBatch();
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example of batch updates with CallableStatement</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (CallableStatement stmt = connection.prepareCall(
    "{call add_product(?, ?)")) {
  stmt.setInt(1, 1);
  stmt.setString(2, "apple");
  stmt.addBatch();

  stmt.setInt(1, 2);
  stmt.setString(2, "orange");
  stmt.addBatch();

  int[] updateCounts = stmt.executeBatch();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="stmt-batch-server-side"><a class="anchor" href="#stmt-batch-server-side"></a>4.5.3. Server-side Batch Updates</h4>
<div class="paragraph">
<p><em class="since">Jaybird 5</em><br>
<em class="since">Firebird 4.0</em></p>
</div>
<div class="paragraph">
<p>Jaybird 5 adds support for server-side batch updates when connecting to Firebird 4.0 or higher.
This support comes with a number of limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only supported on the pure Java protocol, not on native or embedded.</p>
</li>
<li>
<p>Only supported on <code>PreparedStatement</code>.</p>
<div class="ulist">
<ul>
<li>
<p>The <code>Statement</code> batch behaviour is not supported by server-side batch updates.</p>
</li>
<li>
<p>The <code>CallableStatement</code> implementation is more complex than prepared statement, so the decision was made not to reimplement this using server-side batch updates.
The implementation might be rewritten in a future Jaybird version, if there is sufficient demand.
As a workaround, use <code>execute procedure</code> or <code>{call procedure_name(...)}</code> from a <code>PreparedStatement</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Requesting generated-keys will fall back to emulated behaviour as server-side batches do not support returning values produced by the <code>RETURNING</code> clause.</p>
</li>
<li>
<p><em class="since">Jaybird 5.0.5</em> Using parameterless statements will fall back to emulated behaviour as server-side batches do not support executing parameterless statements.</p>
<div class="paragraph">
<p>In Jaybird 5.0.0 - 5.0.4 this results in error &#8220;Statement used in batch must have parameters&#8221; (<code>isc_batch_param</code>, <code>335545186</code>).
The workaround is to connect with property <code>useServerBatch</code> set to <code>false</code>, or to not use a prepared statement, or not use batch execution, for parameterless statements.</p>
</div>
</li>
<li>
<p>Firebird 4.0 has additional facilities to send <code>BLOB</code> values as part of the batch update, but this is not yet used by Jaybird.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When server-side batch support is unavailable, either because the server doesn&#8217;t support it, or because of above limitations, or if the <a href="#ref-batch-use-server-batch">connection property <code>useServerBatch</code></a> is <code>false</code>, Jaybird will fall back to the emulated behaviour.</p>
</div>
<div class="paragraph">
<p>By default, Jaybird will request the maximum server-side batch buffer size (256MB as of Firebird 4.0).
A smaller buffer can be requested with <a href="#ref-batch-server-batch-buffer-size">connection property <code>serverBatchBufferSize</code></a> (value in bytes).
Jaybird does not track the consumption of the server-side batch buffer.
Attempting to execute a batch larger than this buffer will fail with error &#8220;Internal buffer overflow - batch too big&#8221; (<code>isc_batch_too_big</code>, <code>335545198</code>).
The 256MB buffer used with Jaybird defaults on Firebird 4.0 is sufficient to accommodate several thousand rows at maximum row size (a naive calculation says around 4000 rows, but this doesn&#8217;t account for all overhead of a row).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_escape_syntax"><a class="anchor" href="#_escape_syntax"></a>4.6. Escape Syntax</h3>
<div class="paragraph">
<p>The escape syntax was introduced as a portable JDBC-specific syntax to represent parts of the SQL language that are (or were) usually implemented differently by database vendors.
The escaped syntax is also used to define features that might not be implemented by the database server, but can have an appropriate implementation in the driver.</p>
</div>
<div class="paragraph">
<p>The JDBC specification defines escaped syntax for the following</p>
</div>
<div class="ulist">
<ul>
<li>
<p>scalar functions</p>
</li>
<li>
<p>date and time literals</p>
</li>
<li>
<p>outer joins</p>
</li>
<li>
<p>calling stored procedures</p>
</li>
<li>
<p>escape characters for LIKE clauses</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_scalar_functions"><a class="anchor" href="#_scalar_functions"></a>4.6.1. Scalar Functions</h4>
<div class="paragraph">
<p>Escaped syntax for the scalar function call is defined as</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{fn &lt;function-name&gt; (argument list)}</pre>
</div>
</div>
<div class="paragraph">
<p>For example, <code>{fn concat('Firebird', 'Java')}</code> results in the code <code>('Firebird'||'Java')</code> in the actual statement sent to the server.
"<a href="#jdbcescape">Supported JDBC Scalar Functions</a>" provides a list of supported scalar functions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_date_and_time_literals"><a class="anchor" href="#_date_and_time_literals"></a>4.6.2. Date and Time Literals</h4>
<div class="paragraph">
<p>It is possible to include date and time literals in SQL statements.
To guarantee that each database will interpret the literal identically, the JDBC specification provides the following syntax to specify them:</p>
</div>
<div class="paragraph">
<p>Date literal escaped syntax:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{d 'yyyy-mm-dd'}</pre>
</div>
</div>
<div class="paragraph">
<p>Time literal escaped syntax:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{t 'hh:mm:ss'}</pre>
</div>
</div>
<div class="paragraph">
<p>Timestamp literal syntax (fractional seconds part <code>'.f&#8230;&#8203;'</code> can be
omitted):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{ts 'yyyy-mm-dd hh:mm:ss.f...'}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_outer_joins"><a class="anchor" href="#_outer_joins"></a>4.6.3. Outer Joins</h4>
<div class="paragraph">
<p>Due to the various approaches to specify outer joins (for instance, the Oracle "(+)" syntax), the JDBC specification provides the following syntax:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{oj &lt;outer join&gt;}</pre>
</div>
</div>
<div class="paragraph">
<p>where the outer join is specified as</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;outer join&gt; ::=
    &lt;table name&gt; {LEFT|RIGHT|FULL} OUTER JOIN
    {&lt;table name&gt; | &lt;outer join&gt;} ON &lt;search condition&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>An example SQL statement would look like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>SELECT * FROM {oj tableA a
    LEFT OUTER JOIN tableB b ON a.id = b.id}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_stored_procedures"><a class="anchor" href="#_stored_procedures"></a>4.6.4. Stored Procedures</h4>
<div class="paragraph">
<p>The escaped syntax for stored procedures is described in details in section <a href="#callable-statement">The java.sql.CallableStatement interface</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_like_escaped_characters"><a class="anchor" href="#_like_escaped_characters"></a>4.6.5. LIKE Escaped Characters</h4>
<div class="paragraph">
<p>The percent sign (&#8216;<code>%</code>&#8217;) and underscore (&#8216;<code>_</code>&#8217;) characters are wild cards in the LIKE predicate of SQL.
To interpret them literally they must be escaped using the escape character.
The escaped syntax for this case identifies which character is used as an escape character:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{escape '&lt;escape character&gt;'}</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resultsets"><a class="anchor" href="#resultsets"></a>5. Working with result sets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a <code>SELECT</code> statement is executed, the results of the query are returned through the implementation of the <code>java.sql.ResultSet</code> interface.</p>
</div>
<div class="sect2">
<h3 id="_resultset_properties"><a class="anchor" href="#_resultset_properties"></a>5.1. ResultSet properties</h3>
<div class="sect3">
<h4 id="resultsets-types"><a class="anchor" href="#resultsets-types"></a>5.1.1. ResultSet Types</h4>
<div class="paragraph">
<p>The JDBC specification defines three types of result sets</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TYPE_FORWARD_ONLY</code>&#8201;&#8212;&#8201;the result set is not scrollable, the cursor can only move forward.
When the <code>TRANSACTION_READ_COMMITTED</code> isolation level is used, the result set will return all rows that are satisfying the search condition at the moment of fetch (which&#8201;&#8212;&#8201;simplified&#8201;&#8212;&#8201;will be every <em>fetch size</em> calls to <code>ResultSet.next()</code>).
In other cases, the result set will return only rows that were visible at the moment of the transaction start.</p>
</li>
<li>
<p><code>TYPE_SCROLL_INSENSITIVE</code>&#8201;&#8212;&#8201;the result set is scrollable, the cursor can move back and forth, can be positioned on the specified row.
Only rows satisfying the condition at the time of query execution are visible.</p>
</li>
<li>
<p><code>TYPE_SCROLL_SENSITIVE</code>, is not supported by Firebird and Jaybird.
Jaybird allows an application to ask for this type of result set, however in compliance with the JDBC specification, the type is "downgraded" to the <code>TYPE_SCROLL_INSENSITIVE</code> and a corresponding warning is added to the connection object.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Due to a missing support of scrollable cursors in Firebird 4.0 and earlier, support for scrollable results set (<code>TYPE_SCROLL_INSENSITIVE</code> result set type) is implemented by fetching the complete result set to the client.
Scrolling happens in memory on the client.
This can have adverse effect on the system memory usage and performance when the result set is large.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 5</em><br>
<em class="since">Firebird 5.0</em></p>
</div>
<div class="paragraph">
<p>Starting with Firebird 5.0, server-side scrollable cursors are supported.
Jaybird 5 introduced support for scrolling non-holdable result set when the connection property <code>scrollableCursor</code> is set to value <code>SERVER</code>, and the connection is a pure Java connection (not native or embedded).
A future version may enable this behaviour by default.</p>
</div>
</div>
<div class="sect3">
<h4 id="resultsets-concurrency"><a class="anchor" href="#resultsets-concurrency"></a>5.1.2. ResultSet Concurrency</h4>
<div class="paragraph">
<p>Result set concurrency specifies whether the result set object can be updated directly or a separate SQL request should be used to update the row.
Result sets that allow direct modification using the <code>ResultSet.updateXXX</code> methods are usually used in GUI applications which allow in-place editing of the underlying result set.</p>
</div>
<div class="paragraph">
<p>The result set concurrency is specified during statement creation and cannot be changed later.
JDBC defines two types of result set concurrency, which are both supported by Jaybird:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>CONCUR_READ_ONLY</code> is available for all types of result sets.
It tells the driver that direct update of the result set is not possible and all <code>ResultSet.updateXXX</code> methods should throw an exception.</p>
</li>
<li>
<p><code>CONCUR_UPDATABLE</code> is supported only under certain conditions that are needed for the driver to correctly construct a DML request that will modify exactly one row.
These conditions are:</p>
<div class="ulist">
<ul>
<li>
<p>the SELECT statement that generated the result set references only one table;</p>
</li>
<li>
<p>all columns that are not referenced by the SELECT statement allow <code>NULL</code> values, otherwise it won&#8217;t be possible to insert new rows;</p>
</li>
<li>
<p>the SELECT statement does not contain the <code>DISTINCT</code> predicate, aggregate functions, joined tables, or stored procedures;</p>
</li>
<li>
<p>the SELECT statement references all columns of the tables primary key definition or the <code>RDB$DB_KEY</code> column.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="resultsets-holdability"><a class="anchor" href="#resultsets-holdability"></a>5.1.3. ResultSet Holdability</h4>
<div class="paragraph">
<p>Result set holdability informs the driver whether result sets should be kept open across commits.
<code>ResultSet.HOLD_CURSORS_OVER_COMMIT</code> tells the driver to keep the result set object open, while <code>ResultSet.CLOSE_CURSORS_AT_COMMIT</code> tells driver to close them on commit.</p>
</div>
<div class="paragraph">
<p>When an application calls <code>Connection.commit()</code>, the Firebird server closes all open result sets.
It is not possible to tell the server to keep a result set open over commit unless "commit retaining" mode is used.
This mode is global for the complete connection and is not suitable for holdability control on a statement level.
Use of "commit retaining" mode is believed to have an undesired side effect for read-write transactions as it inhibits garbage collection.
Because of these reasons "commit retaining" is not used in Jaybird during normal execution.
Applications can commit the transaction keeping the result sets open by executing a &#8220;COMMIT RETAIN&#8221; SQL statement.</p>
</div>
<div class="paragraph">
<p>To support holdable result sets, Jaybird will cache all rows locally.<br>
<em class="until">Jaybird 6</em> In Jaybird 5 and earlier, for <code>TYPE_FORWARD_ONLY</code>, this is achieved by upgrading to <code>TYPE_SCROLL_INSENSITIVE</code>. See also <a href="#resultsets-types">ResultSet Types</a>.<br>
<em class="since">Jaybird 6</em> Since Jaybird 6, the result set type is no longer upgraded, but all rows are still cached locally.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When connecting to Firebird 5.0 with Jaybird 5 or higher and connection property <code>scrollableCursor=SERVER</code>, a holdable result set will not use server-side scrollable cursor, but instead emulate by caching.
Server-side scrollable cursors do not support the holdable behaviour.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resultset_manipulation"><a class="anchor" href="#_resultset_manipulation"></a>5.2. ResultSet manipulation</h3>
<div class="paragraph">
<p><code>ResultSet</code> objects are created when either <code>Statement.executeQuery(String)</code> or <code>Statement.getResultSet()</code> methods are called, or when obtaining the generated keys from <code>Statement.getGeneratedKeys()</code>.
<code>Statement.getResultSet()</code> is used in combination with <code>Statement.execute(String)</code> and can be called only once per result set (see the following two examples; <em class="until">Jaybird 5.0.5</em>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em class="until">Jaybird 5.0.5</em> The implementation in Jaybird 5.0.4 and older does not allow calls to the <code>getResultSet()</code> method after using an <code>executeQuery</code> or the <code>getResultSet()</code> method of the <code>Statement</code> class.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 5.0.5</em> Starting with Jaybird 5.0.5, calls to <code>getResultSet()</code> will return the current result set, even if the result set was returned before by an <code>executeQuery</code> or the <code>getResultSet()</code> method.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Using Statement.executeQuery(String) method</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement stmt = connection.createStatement();
     ResultSet rs = stmt.executeQuery("SELECT * FROM myTable")) {
  // process result set
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Using Statement.getResultSet() method</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement stmt = connection.createStatement()) {
  boolean hasResultSet = stmt.execute("SELECT * FROM myTable");
  if (hasResultSet) {
    try (ResultSet rs = stmt.getResultSet()) {
      // process result set
    }
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_the_values_in_the_result_set"><a class="anchor" href="#_accessing_the_values_in_the_result_set"></a>5.2.1. Accessing the values in the result set</h4>
<div class="paragraph">
<p>Depending on the type of the result set, it is possible to move the cursor either forward only (<a href="#using-forward-only">next example</a>) or using absolute and relative positioning (<a href="#using-scrollable-updatable">second example below</a>).</p>
</div>
<div class="paragraph">
<p>Values of the result set are obtained by calling the corresponding getter method depending on the type of column.
For example, the <code>ResultSet.getInt(1)</code> method returns the value of the first column as an <code>int</code> value.
If the value of the column is not integer, Jaybird tries to convert it according to the "Data Type Conversion Table" specified in <a href="#datatypeconversion">Data Type Conversion Table</a>.
If conversion is not possible, an exception is thrown.</p>
</div>
<div class="paragraph">
<p>There are two possibilities to obtain data from the result set columns: by column label or by column position.
Position of the first column is 1.
Names supplied to getter methods are case-insensitive.
The search only happens in column aliases&#8201;&#8212;&#8201;or in JDBC terminology the <em>column label</em>.
If a column has no alias, the original column name is considered its alias.
If there is more than one column matching the specified name (even if the original names were quoted), the first match is taken.</p>
</div>
<div class="paragraph">
<p>When getters for primitive types are used and the value in the result set is <code>NULL</code>, the driver returns the default value for that type.
For example, <code>getInt()</code> method will return <code>0</code>.
To know whether the value is really <code>0</code> or <code>NULL</code>, you have to call <code>ResultSet.wasNull()</code> method <strong>after</strong> calling the <em>get</em> method.</p>
</div>
<div class="paragraph">
<p>Getters that return object values (<code>getString</code>, <code>getDate</code>, <code>getObject</code>, etc.) will return a <code>null</code> value for columns containing <code>NULL</code>.
Calling <code>wasNull</code> after object <em>get</em> methods is possible but unnecessary.</p>
</div>
<div id="using-forward-only" class="listingblock">
<div class="title">Example of using forward-only result sets</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement forwardStatement = connection.createStatement();
     ResultSet rs = forwardStatement.executeQuery(
         "SELECT id, name, price FROM myTable")) {

  while(rs.next()) {
    int id = rs.getInt(1);
    String name = rs.getString("name");
    double price = rs.getDouble(3);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_updating_records_in_the_result_set"><a class="anchor" href="#_updating_records_in_the_result_set"></a>5.2.2. Updating records in the result set</h4>
<div class="paragraph">
<p>Scrollable cursors are especially useful when result of some query is displayed by the application which also allows the user to directly edit the data and post the changes to the database.</p>
</div>
<div id="using-scrollable-updatable" class="listingblock">
<div class="title">Example of using scrollable and updatable result sets</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement scrollStatement = connection.createStatement(
         ResultSet.TYPE_SCROLL_INSENSITIVE,
         ResultSet.CONCUR_UPDATABLE);
     ResultSet rs = scrollStatement.executeQuery(
         "SELECT id, name, price FROM myTable");
  rs.absolute(1);                  // move to the first row
  rs.updateString(2, anotherName); // update the name
  rs.updateRow();                  // post changes to the db

  rs.moveToInsertRow();
  rs.updateInt(1, newId);
  rs.updateString(2, newName);
  rs.updateDouble(3, newPrice);
  rs.insertRow();
  rs.moveToCurrentRow();

  rs.relative(-2);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code example above shows how to update first row, insert new one and after that move two records backwards.</p>
</div>
<div class="paragraph">
<p>An application can also update the current row using so called &#8220;positioned updates&#8221; on named cursors.
This technique can be used only with forward-only cursors, since application can update only the row to which the server-side cursor points to.
In case of scrollable cursors the complete result set is fetched to the client and then the server-side cursor is closed.
<a href="#using-positioned-updates">The example below</a> shows how to use positioned updates.</p>
</div>
<div class="paragraph">
<p>First, the application has to specify the name of the cursor and the list of the columns that will be updated before the query is executed.
This name is later used in the <code>UPDATE</code> statement as shown in the example.</p>
</div>
<div id="using-positioned-updates" class="listingblock">
<div class="title">Example of using the positioned updates</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">connections.setAutoCommit(false);
try (Statement selectStmt = connection.createStatement();
     Statement updateStmt = connection.createStatement()) {
  selectStmt.setCursorName("someCursor");

  try (ResultSet rs = selectStmt.executeQuery(
           "SELECT id, name, price FROM myTable " +
           "FOR UPDATE OF myColumn")) {

    while(rs.next()) {
      ...
      if (someCondition) {
        updateStmt.executeUpdate("UPDATE myTable " +
            "SET myColumn = myColumn + 1 " +
            "WHERE CURRENT OF " + rs.getCursorName());
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_closing_the_result_set"><a class="anchor" href="#_closing_the_result_set"></a>5.2.3. Closing the result set</h4>
<div class="paragraph">
<p>A result set is closed by calling the <code>ResultSet.close()</code> method.
This releases the associated server resources and makes the <code>ResultSet</code> object available for garbage collection.
It is strongly recommended to explicitly close result sets in auto-commit mode or <code>ResultSet.TYPE_SCROLL_INSENSITIVE</code> result sets, because this releases memory used for the cached data.
Whenever possible, use try-with-resources.</p>
</div>
<div class="paragraph">
<p>The result set object is also closed automatically, when the statement that created it is closed or re-executed.
In auto-commit mode, the result set is closed automatically if any statement is executed on the same connection.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transactions"><a class="anchor" href="#transactions"></a>6. Using transactions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Transactions are used to group SQL statements into a single block that satisfies so-called ACID properties: atomicity, consistency, isolation and durability.
In other words, all statements executed within a transaction either succeed and their results will be permanently stored in the database, or the effect of the statement execution will be undone.</p>
</div>
<div class="sect2">
<h3 id="_jdbc_transactions"><a class="anchor" href="#_jdbc_transactions"></a>6.1. JDBC transactions</h3>
<div class="paragraph">
<p>Firebird supports multiple concurrent transactions over the same database connection.
This allows applications that work via the native Firebird API to save the number of network connections, which in turn saves the resources on the server<sup class="footnote">[<a id="_footnoteref_7" class="footnote" href="#_footnotedef_7" title="View footnote.">7</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>This model however cannot be applied to each database engine in the world and the designers of the JDBC API have chosen a model where each database connection has one and only one active transaction associated with it.
Also, unlike the Firebird model, where transactions require explicit start, the JDBC specification requires the driver to start transaction automatically as soon as a transactional context is needed.</p>
</div>
<div class="paragraph">
<p>The following code shows a very simple example of using transactions in JDBC where a hypothetical intruder that increases salary of each employee twice and uses explicit transaction control in JDBC.
They also try to hide their identity and if the operations succeed, they commit the transaction, otherwise the roll the changes back.</p>
</div>
<div class="listingblock">
<div class="title">Example of explicit transaction control</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Connection connection = ...

connection.setAutoCommit(false); <i class="conum" data-value="1"></i><b>(1)</b>

try (Statement stmt = connection.createStament()) {
  stmt.executeUpdate("UPDATE employee " +
      " SET salary = salary * 2"); <i class="conum" data-value="2"></i><b>(2)</b>

  // ... do some more changes to database
  // to hide the identity of the person
  // that messed up the salary information
  // by deleting the audit trails logs, etc.

  stmt.executeUpdate("DELETE FROM audit_trails");

  connection.commit(); <i class="conum" data-value="3"></i><b>(3)</b>
} catch(SQLException ex) {
  connection.rollback(); <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use transactions, the application first switches the auto-commit mode off (see below for more information), then creates a <code>java.sql.Statement</code> object, and executes an <code>UPDATE</code> statement.
Please note, that there is no explicit transaction start, a new transaction will be started right before executing the statement (step 2).</p>
</div>
<div class="paragraph">
<p>If we work with a database where not only referential integrity is preserved, but also reasonable security rules are encoded in the triggers, it will raise an error preventing cleaning the audit trails information.
In this case the intruder chooses to undo all the changes they made, so that nobody notices anything.
But if no security rules are implemented, they commit the transaction.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Firebird PSQL has an <code>IN AUTONOMOUS TRANSACTION</code> block that can be used to prevent such abuse and prevent audit-records from being wiped out by a transaction rollback.
Alternatively, you can use an external table to store the audit log.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a connection uses explicit transaction control, each transaction must be finished by calling the <code>commit()</code> or <code>rollback()</code> methods of the <code>Connection</code> object before the connection is closed.
If a transaction was not finished, but the <code>close</code> method is called, the active transaction is rolled back automatically.
This also happens when you did not commit or roll back the transaction, and did not close the connection explicitly and that <code>Connection</code> object became eligible for garbage collection.
<em class="until">Jaybird 5</em> In this case, the class finalizer implicitly invokes the <code>close()</code> method, which in turn rolls the transaction back.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Given the non-deterministic delay of garbage collection, make sure to explicitly end the transaction and close the connection.
Do not rely on the garbage collector for this.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 5</em> A number of finalizers have been removed in Jaybird 5, so transaction rollback through garbage collection has become even less deterministic (though it is likely still to occur when the connection is forcibly closed).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_auto_commit_mode"><a class="anchor" href="#_auto_commit_mode"></a>6.2. Auto-commit mode</h3>
<div class="paragraph">
<p>Each newly created connection by default has the auto-commit property enabled.
In other words, the duration of the transaction is limited by the duration of statement execution, or more formally&#8201;&#8212;&#8201;the transaction is ended when the statement is completed.
The point when statement execution is considered complete, is defined in the specification as:</p>
</div>
<div class="quoteblock">
<div class="title">Rules when the statement is completed in auto-commit mode</div>
<blockquote>
<div class="paragraph">
<p>A <code>ResultSet</code> object is explicitly closed when</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>close</code> method on the <code>ResultSet</code> is executed, thereby releasing any external resources</p>
</li>
<li>
<p>The <code>Statement</code> or <code>Connection</code> object that produced the <code>ResultSet</code> is explictly [sic] closed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>ResultSet</code> object is implicitly closed when</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The associated <code>Statement</code> object is re-executed</p>
</li>
<li>
<p>The <code>ResultSet</code> is created with a Holdability of <code>CLOSE_CURSORS_AT_COMMIT</code> and an implicit or explicit commit occurs</p>
</li>
</ul>
</div>
<hr>
<div class="paragraph">
<p>Note  Some JDBC driver implementations may also implicitly <code>close</code> the <code>ResultSet</code> when the <code>ResultSet</code> type is <code>TYPE_FORWARD_ONLY</code> and the <code>next</code> method of <code>ResultSet</code> returns <code>false</code>.</p>
</div>
<hr>
</blockquote>
<div class="attribution">
&#8212; JDBC 4.3 Specification
</div>
</div>
<div class="paragraph">
<p><em class="until">Jaybird 6</em> In Jaybird 5 and earlier, in auto-commit mode, a <code>TYPE_FORWARD_ONLY</code> result set was implicitly closed when <code>next()</code> returned false.
This was to conform to the requirements of JDBC 3.0, but since this was relaxed in JDBC 4.0 (see quote above), this behaviour was changed in Jaybird 6.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> In auto-commit mode, a result set will now remain open until explicitly closed using <code>ResultSet.close()</code>, when any statement is executed, when the auto-commit mode is disabled, or by the close of the <code>Statement</code> or <code>Connection</code>.</p>
</div>
<div class="paragraph">
<p>If there is an ongoing transaction and the value of the auto-commit property is changed, the current transaction is committed.</p>
</div>
<div class="paragraph">
<p>Note, when a connection is obtained via a <code>javax.sql.DataSource</code> object and container managed transactions are used (for example, the application is executing inside an EJB container), it is an error to call <code>setAutoCommit</code> method.</p>
</div>
<div class="paragraph">
<p>Special care should be taken when using multiple statements in auto-commit mode.
The JDBC 2.0 specification did not fully define the rules for the statement completion as it did not define the behavior of multiple <code>ResultSet</code> objects created using the same connection object in auto-commit mode.</p>
</div>
<div class="paragraph">
<p>Since Firebird does not allow the result set to remain open after the transaction ends, Jaybird 1.5.x and below cached the complete result set in memory when <code>SELECT</code> statements were executed and the transaction was committed.
This had an adverse effect on allocated memory when the result set is big, especially when it contains BLOB fields.
The JDBC 3.0 specification addressed this unclear situation (see above) and Jaybird 2.1 was improved to correctly handle them.
It also allowed to reduce the memory footprint&#8201;&#8212;&#8201;the driver no longer caches non-scrollable and non-holdable result sets in memory.</p>
</div>
<div class="paragraph">
<p>However, some Java applications that do not conform the current JDBC specification might no longer work with Jaybird 2.1 and above unless additional steps are taken.</p>
</div>
<div class="paragraph">
<p>The piece of code below works perfectly with explicit transaction control.
However, it won&#8217;t work correctly with auto-commit with a driver&#8201;&#8212;&#8201;like Jaybird&#8201;&#8212;&#8201;that complies with the JDBC 3.0 specification, when the <code>selectStmt</code> and <code>updateStmt</code> object are created by the same connection object (step 1).
When the UPDATE is executed in step 3, the result set produced by the SELECT statement must be closed before the execution.
When the Java application tries to fetch the next record by calling the <code>rs.next()</code> method, it will receive an <code>SQLException</code> with a message <em>"The result set is closed"</em>.</p>
</div>
<div class="paragraph">
<p>The only correct solution to this situation is to fix the application by either using explicit transaction control, or by using two connection objects, one for SELECT statement and one for UPDATE statement.</p>
</div>
<div class="listingblock">
<div class="title">Non-compliant usage of nested statements in auto-commit mode</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Statement selectStmt = connection.createStatement(); <i class="conum" data-value="1"></i><b>(1)</b>
     Statement updateStmt = connection.createStatement();
     ResultSet rs = selectStmt.executeQuery(
         "SELECT * FROM myTable")) {
  while(rs.next()) { <i class="conum" data-value="2"></i><b>(2)</b>
    int id = rs.getInt(1);
    String name = rs.getString(2);

    updateStmt.executeUpdate("UPDATE anotherTable SET " +
        " name = '" + name + "' WHERE id = " + id); <i class="conum" data-value="3"></i><b>(3)</b>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unfortunately, not all applications can be changed either because there is no source code available or, simply, because any change in the code requires complete release testing of the software.
To address this, Jaybird 2.1 introduced the connection parameter <code>defaultHoldable</code> which makes result sets holdable by default.
The holdable result sets will be fully cached in memory, but won&#8217;t be closed automatically when transaction ends.<sup class="footnote">[<a id="_footnoteref_8" class="footnote" href="#_footnotedef_8" title="View footnote.">8</a>]</sup>
This property also affects the default holdability of result sets when auto-commit is disabled.</p>
</div>
<div class="paragraph">
<p>See <a href="#ref-defaultholdable">Default holdable result sets</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_read_only_transactions"><a class="anchor" href="#_read_only_transactions"></a>6.3. Read-only Transactions</h3>
<div class="paragraph">
<p>A transaction can be declared read-only to reduce the possibility of lock conflicts.
In general, this makes little sense for Firebird, because of its multi-generational architecture, where readers do not block writers and vice versa.
However, in some cases it can be useful.</p>
</div>
<div class="paragraph">
<p>It is not allowed to connect with a read-write transaction to a database located on a read-only media, for example, a CD-ROM.
The reason is that, to guarantee consistency of the read-write transactions, Firebird has to increase the transaction identifier when the transaction starts, and store the new value on the so-called Transaction Inventory Page even if no changes are made in that transaction.
This requirement can be relaxed if a transaction is declared read-only and the engine ensures that no data can be modified.</p>
</div>
<div class="paragraph">
<p>Another reason is that long-running read-write transactions inhibit the process of collecting garbage, i.e. a process of identifying previous versions of the database records that are no longer needed and releasing the occupied space for the new versions.
Without garbage collection the database size will grow very fast and the speed of the database operations will decrease, because the database engine will have to check all available record versions to determine the appropriate one.</p>
</div>
<div class="paragraph">
<p>Therefore, if you are sure that application won&#8217;t modify the database in the transaction, use the <code>setReadOnly</code> method of the
<code>java.sql.Connection</code> object to tell the server that the transaction is read-only.</p>
</div>
</div>
<div class="sect2">
<h3 id="transactions-isolation-levels"><a class="anchor" href="#transactions-isolation-levels"></a>6.4. Transaction Isolation Levels</h3>
<div class="paragraph">
<p>The ANSI/ISO SQL standard defines four such levels, each next one weaker than the previous.
These isolation levels are also used in the JDBC specification:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. JDBC transaction isolation levels and their characteristics</caption>
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JDBC isolation level</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSACTION_SERIALIZABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transactions with this isolation level prohibit phantom reads, the situation when one transaction reads all rows satisfying the WHERE condition, another transaction inserts a row satisfying that condition, and first transaction re-executes the statement.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSACTION_REPEATABLE_READ</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This isolation level prevents non-repeatable reads, a situation when a row is read in one transaction, then modified in another transaction, and later re-read in the first transaction.
In this case different values had been read within the same transaction.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSACTION_READ_COMMITTED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transactions with this isolation level can see only committed records.
However, it does not prevent so-called non-repeatable reads and phantom reads.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSACTION_READ_UNCOMMITTED</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The weakest isolation level, or better to say level with no isolation.
Such transactions can see the not yet committed changes to the data in the database from the concurrently running transactions.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Firebird, however, defines other isolation levels: <code>read_committed</code>, <code>concurrency</code> and <code>consistency</code>.
Only the <code>read_committed</code> isolation level can be mapped to the same level defined by the ANSI/ISO SQL standard.
Dirty reads are prevented, non-repeatable reads as well as phantom reads can occur.</p>
</div>
<div class="paragraph">
<p>The <code>concurrency</code> isolation level is stronger than repeatable read isolation defined in ANSI/SQL standard and satisfies the requirements of a serializable isolation level, however, unlike RDBMSes with locking concurrency control, it guarantees better performance.</p>
</div>
<div class="paragraph">
<p>And finally Firebird provides a <code>consistency</code> isolation level which in combination with table reservation feature guarantees the deadlock-free execution of transactions.
A transaction will be prevented from starting if there is already another one with the overlapping sets of the reserved tables.
This isolation level guarantees truly serial history of transaction execution.</p>
</div>
<div class="paragraph">
<p>To satisfy the JDBC specification Jaybird provides a following default mapping of the JDBC transaction isolation levels into Firebird isolation levels:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TRANSACTION_READ_COMMITTED is mapped to <code>read_committed</code> isolation level in Firebird&#8201;&#8212;&#8201;any changes made inside a transaction are not visible outside a transaction until the transaction is committed.
A transaction in read-committed mode sees all committed changes made by other transactions even if that happened after start of the current transaction.</p>
</li>
<li>
<p>TRANSACTION_REPEATABLE_READ is mapped to <code>concurrency</code> isolation level in Firebird&#8201;&#8212;&#8201;any changes made inside this transaction are not visible outside a transaction until the transaction is committed.
A transaction in repeatable-read sees only those changes that were committed before the transaction started.
Any committed change in another transaction that happened after the start of this transaction is not visible in this transaction.</p>
</li>
<li>
<p>TRANSACTION_SERIALIZABLE is mapped into <code>consistency</code> isolation level in Firebird&#8201;&#8212;&#8201;any modification to a table happens in serial way: all transactions wait until the current modification is done.
This mode can be considered as a traditional pessimistic locking scheme, but the lock is placed on the whole table.
See section "<a href="#transactions-table-reservation">Table Reservation</a>" for more information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default mapping is specified in the Jaybird code and can be overridden via the connection properties.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>via the <code>tpbMapping</code> property that specifies the name of the <code>ResourceBundle</code> with the new mapping of the isolation level;</p>
</li>
<li>
<p>via the direct specification of the JDBC transaction isolation level.
The following code contains an example of such operation, the values in the mapping are described in section "<a href="#transactions-tpb">Transaction Parameter Buffer</a>".</p>
</li>
<li>
<p>via the data source configuration.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Overriding the default isolation level mapping</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Properties props = new Properties();
props.setProperty("user", "SYSDBA");
props.setProperty("password", "masterkey");
props.setProperty("TRANSACTION_READ_COMMITTED",
    "read_committed,no_rec_version,write,nowait");

Connection connection = DriverManager.getConnection(
    "jdbc:firebirdsql://localhost:3050/c:/example.fdb",
    props);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The property accepts the &#8220;short&#8221; names as shown, or the &#8220;long&#8221; names with the <code>isc_dpb_</code> prefix, as defined in <code>org.firebirdsql.jaybird.fb.constants.TpbItems</code> (Jaybird 5 and higher) or <code>org.firebirdsql.gds.ISCConstants</code> (older versions).
For readability, we recommend using the &#8220;short&#8221; names.</p>
</div>
<div class="paragraph">
<p>The overridden mapping is used for all transactions started within the database connection.
If the default mapping is overridden via the data source configuration, it will be used for all connections created by the data source.</p>
</div>
</div>
<div class="sect2">
<h3 id="transactions-savepoints"><a class="anchor" href="#transactions-savepoints"></a>6.5. Savepoints</h3>
<div class="paragraph">
<p>Savepoints provide finer-grained control over transactions by providing intermediate steps within a larger transaction.
Once a savepoint has been set, a transaction can be rolled back to that point without affecting preceding work.</p>
</div>
<div class="paragraph">
<p>To set a savepoint, use the following code:</p>
</div>
<div class="listingblock">
<div class="title">Example of using savepoints</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Connection connection = ...;
connection.setAutoCommit(false);

try (Statement stmt = connection.createStatement()) {
  stmt.executeUpdate(
      "INSERT INTO myTable(id, name) VALUES (1, 'John')");

  Savepoint savePoint1 =
      connection.setSavepoint("savepoint_1");

  stmt.executeUpdate(
      "UPDATE myTable SET name = 'Ann' WHERE id = 1");
  // ...

  connection.rollback(savePoint1);

  // at this point changes done by second update are undone
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note, rolling back to the savepoint automatically releases and invalidates any savepoints that were created after the released savepoint.</p>
</div>
<div class="paragraph">
<p>If the savepoint is no longer needed, you can use the <code>Connection.releaseSavepoint</code> method to release system resources.
After releasing a savepoint, it is no longer possible to roll back the current transaction to that savepoint.
Attempts to call the <code>rollback(Savepoint)</code> method will result in an <code>SQLException</code>.
Savepoints that have been created within a transaction are automatically released when that transaction is committed or rolled back.</p>
</div>
</div>
<div class="sect2">
<h3 id="transactions-tpb"><a class="anchor" href="#transactions-tpb"></a>6.6. Transaction Parameter Buffer</h3>
<div class="paragraph">
<p>The behavior of Firebird transactions is internally controlled by the <em>Transaction Parameter Buffer</em> (TPB), which specifies different transaction properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the transaction isolation level;</p>
</li>
<li>
<p>the transaction&#8217;s read-only or read-write mode;</p>
</li>
<li>
<p>the lock conflict resolution mode&#8201;&#8212;&#8201;wait or no wait;</p>
</li>
<li>
<p>the lock wait timeout;</p>
</li>
<li>
<p>and, finally, the table reservations&#8201;&#8212;&#8201;their names and reservation modes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The TPB is automatically generated depending on the transaction isolation level specified for the <code>java.sql.Connection</code> object.
Additionally, if the connection is set to read-only mode, this is reflected in the TPB by appropriate constant.</p>
</div>
<div class="paragraph">
<p>Usually there is no need to manipulate the TPB directly.
However, the lock resolution mode as well as table reservations cannot be specified by using the standard JDBC interfaces.
For the cases where this is needed, Jaybird provides an extension of the JDBC standard.</p>
</div>
<div class="listingblock">
<div class="title">Example of specifying custom TPB</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">FirebirdConnection fbConnection =
    connection.unwrap(FirebirdConnection.class);

TransactionParameterBuffer tpb =
    fbConnection.createTransactionParameterBuffer();

tpb.addArgument(TpbItems.isc_tpb_read_committed);
tpb.addArgument(TpbItems.isc_tpb_rec_version);
tpb.addArgument(TpbItems.isc_tpb_write);
tpb.addArgument(TpbItems.isc_tpb_wait);
tpb.addArgument(TpbItems.isc_tpb_lock_timeout, 15);

fbConnection.setTransactionParameters(tpb);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above presents an example of populating the TPB with custom parameters.</p>
</div>
<div class="paragraph">
<p>The constants used in the examples in this chapter were introduced in Jaybird 5.
Earlier versions have constants of the same name defined in <code>org.firebirdsql.gds.ISCConstants</code>, and similarly named constants in <code>org.firebirdsql.gds.TransactionParameterBuffer</code> (i.e. without <code>isc_tpb_</code> prefix and fully capitalized).
Those older constants will be removed in Jaybird 6 in favour of <code>org.firebirdsql.jaybird.fb.constants.TpbItems</code>.</p>
</div>
<div class="sect3">
<h4 id="_isolation_level"><a class="anchor" href="#_isolation_level"></a>6.6.1. Isolation level</h4>
<div class="paragraph">
<p>Firebird supports three isolation levels: <code>read_committed</code>, <code>concurrency</code> and <code>consistency</code> which are represented by appropriate constants in the <code>TpbItems</code> class.
The isolation level specifies the way the database engine processes the record versions on read operations.
The <code>concurrency</code> isolation level is also often called <code>SNAPSHOT</code> and the <code>consistency</code> isolation level&#8201;&#8212;&#8201;<code>SNAPSHOT TABLE STABILITY</code>.</p>
</div>
<div class="paragraph">
<p>In <code>consistency</code> and <code>concurrency</code> modes, the Firebird database engine loads the different versions of the same record from disk and checks the &#8220;timestamps&#8221; of each version and compares it with the &#8220;timestamp&#8221; of the current transaction.
The record version with the highest timestamp that is however lower or equal to the timestamp of the current transaction is returned to the application.
This effectively returns the version of the record that was committed before the current transaction started, and guarantees that neither non-repeatable reads nor phantom reads can ever occur.</p>
</div>
<div class="paragraph">
<p>In <code>read_committed</code> mode, the Firebird database engine accesses the record version with the highest timestamp for which the corresponding transaction is marked as committed.
This prevents the engine from reading the record versions which were modified in concurrent transactions that are not yet committed or were rolled back for whatever reason.
However, such mode allows non-repeatable reads as well as phantom reads if a concurrent transaction that modified records or inserted new ones has been committed.</p>
</div>
<div class="paragraph">
<p>The <code>read_committed</code> isolation mode requires another constant that specifies the behavior of the transaction when it sees a record version with a timestamp that belongs to a currently running transaction which is not yet committed.</p>
</div>
<div class="paragraph">
<p>Most applications require the <code>TpbItems.isc_tpb_rec_version</code> mode, or <code>READ COMMITTED RECORD VERSION</code>, which is shown in the code above.
In this mode database engine fetches the latest committed version as described before.</p>
</div>
<div class="paragraph">
<p>The <code>TpbItems.isc_tpb_no_rec_version</code> constant tells the database engine to report a lock conflict when an uncommitted record version is seen while fetching data from the database, also known as <code>READ COMMITTED NO RECORD VERSION</code>.
The outcome of the operation is then controlled by the lock resolution mode (see section <a href="#transactions-lock-resolution">Lock resolution mode</a>).</p>
</div>
<div class="paragraph">
<p>The <code>TpbItems.isc_tpb_read_consistency</code> uses the <code>READ COMMITTED READ CONSISTENCY</code> mode introduced in Firebird 4.0.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Firebird 4.0 and higher default to always use <code>isc_tpb_read_consistency</code></div>
<div class="paragraph">
<p>With default settings, Firebird 4.0 and higher will ignore <code>isc_tpb_rec_version</code> and <code>isc_tpb_no_rec_version</code>, and behave as if <code>isc_tpb_read_consistency</code> was specified.
This is controlled through the <code>ReadConsistency</code> setting in <code>firebird.conf</code> or&#8201;&#8212;&#8201;per database&#8201;&#8212;&#8201;in <code>databases.conf</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="transactions-read-only"><a class="anchor" href="#transactions-read-only"></a>6.6.2. Read-only transactions</h4>
<div class="paragraph">
<p>The read-only or read-write transaction mode is controlled by two constants:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TpbItems.isc_tpb_read</code> and</p>
</li>
<li>
<p><code>TpbItems.isc_tpb_write</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the read-write mode (constant <code>isc_tpb_write</code>) is specified, the database engine stores the &#8220;timestamp&#8221; of the new transaction in the database even when no modification will be made in the transaction.
The &#8220;timestamp&#8221; affects the garbage collection process, since the database engine cannot release records that were modified in transactions with higher &#8220;timestamps&#8221; even when these record versions are no longer needed (in other words, when there are already newer versions of the records).
Thus, long-running read-write transaction inhibits the garbage collection even when no modifications are done in it.</p>
</div>
<div class="paragraph">
<p>Therefore, it is recommended to set the read-only mode for the transaction when it is used for read operations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em class="since">Firebird 4.0</em> With the <code>READ COMMITTED CONSISTENCY</code> mode introduced in Firebird 4.0, even read-only transactions will inhibit garbage collection.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="transactions-lock-resolution"><a class="anchor" href="#transactions-lock-resolution"></a>6.6.3. Lock resolution mode</h4>
<div class="paragraph">
<p>Relational database systems that use pessimistic locking for concurrency control lock the records regardless of the operation type, read or write.
When an application tries to read a record from the database, the database engine tries to obtain a "read lock" to that record.
If the operation succeeds and the application later tries to update the record, the lock is upgraded to a &#8220;write lock&#8221;.
And finally, if the resource is already locked for write, a concurrent transactions cannot lock it for reading, since the system cannot allow the transaction to make a decision based on data that might be rolled back later.
This approach significantly decreases concurrency.
However, databases systems that employ a record versioning mechanism do not have such restrictions because each transaction &#8220;sees&#8221; its own version of the record.
The only possible conflict happens when two concurrent transactions try to obtain a &#8220;write lock&#8221; for the same database record.</p>
</div>
<div class="paragraph">
<p>Firebird belongs to the latter, and on <code>read_committed</code> and <code>concurrency</code> isolation levels it behaves appropriately&#8201;&#8212;&#8201;there are no
lock conflicts between readers and writers, and only writers competing for the same resource raise a lock conflict.
However, on the <code>consistency</code> isolation level Firebird emulates the behavior of systems with pessimistic locking&#8201;&#8212;&#8201;read operations will conflict with write operations.
Even more, the locks are obtained for whole tables (see "<a href="#transactions-table-reservation">Table Reservation</a>" for details).</p>
</div>
<div class="paragraph">
<p>The following table summarizes the above for Firebird 2.0.
It shows that read-committed or repeatable read transactions conflict only when they simultaneously update the same rows.
In contrast, a <code>consistency</code> transaction conflicts with any transaction running in read-write mode, e.g. as soon as a <code>consistency</code> transaction gets write access to a table, other read-write transactions are not allowed to make changes in that table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Lock conflicts within one table depending on the isolation level</caption>
<colgroup>
<col style="width: 34%;">
<col style="width: 18%;">
<col style="width: 18%;">
<col style="width: 15%;">
<col style="width: 15%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read-committed, Concurrency read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read-committed, Concurrency read-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consistency, read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consistency, read-only</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read-committed, Concurrency read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">some updates may conflict</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">conflict</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">conflict</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read-committed, Concurrency read-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consistency read-write</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">conflict</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">conflict</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">conflict</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Consistency read-only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">conflict</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">conflict</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="transactions-table-reservation"><a class="anchor" href="#transactions-table-reservation"></a>6.7. Table Reservation</h3>
<div class="paragraph">
<p>Table reservation allows you to specify the database tables and their corresponding access modes at the beginning of the transaction.
When the transaction is started, the engine tries to obtain the requested locks for the specified tables and proceeds only when all of them were successfully obtained.
Such behavior allows to create a deadlock-free execution history<sup class="footnote">[<a id="_footnoteref_9" class="footnote" href="#_footnotedef_9" title="View footnote.">9</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>The table reservation is specified via a TPB and includes the table to lock, the lock mode (read or write) and lock type (shared, protected and exclusive).</p>
</div>
<div class="listingblock">
<div class="title">Example of using table reservation facility in Firebird</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">FirebirdConnection connection = ...
TransactionParameterBuffer tpb =
    connection.createTransactionParameterBuffer(); <i class="conum" data-value="1"></i><b>(1)</b>

tpb.addArgument(TpbItems.isc_tpb_consistency); <i class="conum" data-value="2"></i><b>(2)</b>
tpb.addArgument(TpbItems.isc_tpb_write);
tpb.addArgument(TpbItems.isc_tpb_nowait);

tpb.addArgument(TpbItems.isc_tpb_lock_write,
    "TEST_LOCK");
tpb.addArgument(TpbItems.isc_tpb_protected);

connection.setTransactionParameters(tpb); <i class="conum" data-value="3"></i><b>(3)</b>

// next transaction will lock TEST_LOCK table for writing
// in protected mode</code></pre>
</div>
</div>
<div class="paragraph">
<p>This shows an example of reserving the <code>TEST_LOCK</code> table for writing in a protected mode.
The code does the following:</p>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a new instance of <code>TransactionParameterBuffer</code> class.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Populate the TPB.
The first three statements were described in "<a href="#transactions-tpb">Transaction Parameter Buffer</a>".
The fourth call specifies that the application wants to obtain a lock on the table <code>TEST_LOCK</code> for writing.
The fifth call specifies the type of the lock to obtain, in our case the protected lock.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set the new TPB to be used for the next transaction.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The lock mode to the table specified in the TPB can be either</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TpbItems.isc_tpb_lock_read</code> for read-only access to the table;</p>
</li>
<li>
<p>or <code>TpbItems.isc_tpb_lock_write</code> for read-write access to the table.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The lock type can be either</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TpbItems.isc_tpb_shared</code> for shared access to the table;</p>
</li>
<li>
<p>or, <code>TpbItems.isc_tpb_protected</code> for protected access to the table;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>TpbItems.isc_tpb_exclusive</code> mode was introduced in later versions of Firebird, however it behaves like <code>TpbItems.isc_tpb_protected</code> mode for all read-write transactions.</p>
</div>
<div class="paragraph">
<p>The lock conflict table depends on the isolation level of the transactions and has the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>isc_tpb_lock_write</code> mode always conflicts with another <code>isc_tpb_lock_write</code> mode regardless of the lock type and transaction isolation mode;</p>
</li>
<li>
<p><code>isc_tpb_lock_write</code> always conflicts with another <code>isc_tpb_lock_read</code> mode if both transactions have <code>consistency</code> isolation, but has no conflict with shared-read locks if the other transaction has either <code>concurrency</code> or <code>read_committed</code> isolation level;</p>
</li>
<li>
<p><code>isc_tpb_lock_read</code> mode never conflicts with <code>isc_tpb_lock_read</code> mode.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="transactions-mgmt-stmts"><a class="anchor" href="#transactions-mgmt-stmts"></a>6.8. Transaction management statements</h3>
<div class="paragraph">
<p>The Firebird syntax also defines a number of transaction management statements.
In this section we discuss the <code>COMMIT [WORK]</code>, <code>ROLLBACK [WORK]</code> and <code>SET TRANSACTION</code> statements, which have a hard transaction boundary (either ending or starting a transaction).</p>
</div>
<div class="paragraph">
<p>In general, you should not execute these methods with Jaybird.
The JDBC specification formally discourages use of statements or functionality which is accessible through the JDBC API:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note:</strong> When configuring a <code>Connection</code>, JDBC applications should use the appropriate <code>Connection</code> method such as <code>setAutoCommit</code> or <code>setTransactionIsolation</code>.
Applications should not invoke SQL commands directly to change the connection&#8217;s configuration when there is a JDBC method available.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; java.sql.Connection<br>
<cite>JDBC API documentation</cite>
</div>
</div>
<div class="paragraph">
<p>In Jaybird 5 and older, the <code>COMMIT</code> and <code>ROLLBACK</code> statements can&#8201;&#8212;&#8201;sometimes&#8201;&#8212;&#8201;be executed, but they bring the connection in an inconsistent state, which will prevent further use of the connection, and execution of the <code>SET TRANSACTION</code> statement will always fail as the statement is executed with an active transaction.</p>
</div>
<div class="paragraph">
<p>Since Jaybird 6, these statements are rejected by default, but support can be enabled with the <a href="#ref-allowtxstmts">connection property <code>allowTxStmts</code></a>.</p>
</div>
<div class="paragraph">
<p>Allowing execution of these statements can sometimes be helpful, for example for executing scripts, or simplifying access to more advanced features of transaction configuration like <a href="#transactions-table-reservation">Table Reservation</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="services"><a class="anchor" href="#services"></a>7. Working with Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to normal database connections, Firebird features server-wide connections.
These are used to perform various administrative tasks in Firebird, e.g. database backup, maintenance, statistics.
The set of API calls to perform such tasks are known under the name &#8220;Services API&#8221;.
Additionally, client applications can use the Services API to get some limited information about the server environment and configuration.</p>
</div>
<div class="paragraph">
<p>The actual execution of the Services API calls can be viewed as a tasks triggered from the client application to be executed on server.
The parameters passed in the calls are internally used to construct the arguments similar to the ones that are passed to command-line tools.
Later these arguments are passed into the entry routines of the <em>gbak</em>, <em>gfix</em>, <em>gsec</em> or <em>gstat</em> utility.
The output of the utility, which in normal case is printed to standard out, is in this case transmitted over the network to the client application.</p>
</div>
<div class="paragraph">
<p>Jaybird attempts to hide the complexity of the original API by providing a set of interfaces and their implementations to perform the administrative tasks regardless of the usage mode (i.e. remote server and embedded engine, wire protocol and access via native client library).</p>
</div>
<div class="paragraph">
<p>This chapter describes the Java API for the administrative tasks.
All classes and interfaces described below are defined in the <code>org.firebirdsql.management</code> package.
Each management class works as a standalone object and does not require an open connection to the server.</p>
</div>
<div class="sect2">
<h3 id="servicemanager"><a class="anchor" href="#servicemanager"></a>7.1. ServiceManager<a id="_servicemanager"></a></h3>
<div class="paragraph">
<p>The <code>ServiceManager</code> interface and the <code>FBServiceManager</code> class are defined as the common superclasses providing setters and getters for common properties as well as some common routines.
The following properties can be specified:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>host</code><br>
<code>serverName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name or the IP address of the host to which we make the Service API request. <em>Required</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>port</code><br>
<code>portNumber</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port to which we make the request, 3050 by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><div class="content"><div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em class="since">Jaybird 5</em> <code>serverName</code> and <code>portNumber</code> are replacements for <code>host</code> and <code>port</code>, which have been deprecated for removal in Jaybird 6.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>database</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the database.
The meaning of the property depends on the service being invoked and will be described in each of chapters below.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the user on behalf of which all Service API calls will be executed. <em>Required</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password corresponding to the specified user. <em>Required</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role name. <em>Optional</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expectedDb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> With Firebird 3.0 and higher, this is used to find the non-default security database to use when authenticating.
Value is a database path or alias the user can connect to. <em>Optional</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authPlugins</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Comma-separated list of authentication plugins to use (ignored for Firebird 2.5 or earlier).
Use <code>null</code> (the default) to use Jaybird defaults.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>processId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Process id to report to the server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>processName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Process name to report to the server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>socketBufferSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Socket buffer size in bytes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>soTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Socket blocking read timeout in milliseconds (<code>0</code> is OS default timeout)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connectTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Socket connect timeout in milliseconds (<code>0</code> is OS default timeout)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wireCrypt</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code> or <code>WireCrypt</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Wire encryption level (<code>DISABLED</code>, <code>ENABLED</code>, <code>REQUIRED</code>, <code>DEFAULT</code>).
In Jaybird 3.0.4+ and Jaybird 4, the property is type <code>WireCrypt</code>.
In Jaybird 5, the property is type <code>String</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wireCryptAsEnum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WireCrypt</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Alternative to <code>WireCrypt</code> to use <code>WireCrypt</code> enum.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbCryptConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Database encryption config.
See <a href="#ref-dbcrypt">Database encryption support</a> for details.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wireCompression</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable wire compression (requires Firebird 3.0 or higher).
Default is <code>false</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>logger</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.io.OutputStream</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stream into which the output of the remote service will be written to. <em>Optional</em>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The last parameter requires some explanation.
The calls to all Services API routines are asynchronous.
The client application can start the call, but there are no other means to find out whether execution of the service call is finished or not except reading the output of the service call&#8201;&#8212;&#8201;EOF in this case means that execution is finished.</p>
</div>
<div class="paragraph">
<p>The <code>FBServiceManager</code> converts the asynchronous calls into a synchronous call by constantly polling the service output stream.
If the <code>logger</code> property is specified the received data is copied into the specified <code>OutputStream</code>, otherwise it is simply ignored and the EOF-marker is being watched.</p>
</div>
<div class="paragraph">
<p>This behavior can be changed by overriding the appropriate method in the <code>FBServiceManager</code> class and/or subclasses.
The only requirement is to detach from the service manager when it is no longer needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="services-backup-and-restore"><a class="anchor" href="#services-backup-and-restore"></a>7.2. Backup and restore<a id="_backup_and_restore"></a></h3>
<div class="paragraph">
<p>Jaybird supports <em>gbak</em>, <em>gbak</em> streaming, and <em>nbackup</em> backup and restore.</p>
</div>
<div class="sect3">
<h4 id="services-backup-and-restore-gbak"><a class="anchor" href="#services-backup-and-restore-gbak"></a>7.2.1. Gbak backup and restore</h4>
<div class="paragraph">
<p>The <em>gbak</em> backup and restore routines are defined in the <code>BackupManager</code> interface and are implemented in the <code>FBBackupManager</code> class.
This class provides server-side <em>gbak</em> backups.
For details on <em>gbak</em> itself, consult the <a href="https://firebirdsqlsbak.html" target="_blank" rel="noopener">Firebird Backup &amp; Restore Utility</a> documentation.</p>
</div>
<div class="paragraph">
<p>In addition to the setters and getters described in the previous section, the following methods are used to specify the backup and restore paths and properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>database</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For a backup operation, it specifies the path or alias of the database to back up.</p>
<p class="tableblock">For a restore operation, it specifies the path to the database into which the backup file will be restored.
In case when multi-file database should be created, use the <code>addRestorePath(String, int)</code> method instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backupPath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the backup file.
For a backup operation, specifies the path and the file name of the newly created backup file.
If multi-file backup files are to be created, use the <code>addBackupPath(String, int)</code> method instead.
For a restore operation, it specifies the path to the single backup file.
If a database should be restored from a multi-file backup, use the <code>addBackupPath(String)</code> method instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restorePageBufferCount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of pages that will be cached of this particular database.
Should be used only for restore operation.
If not set, the page cache size recorded in the backup is used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restorePageSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size of the database page.
Should be used only for restore operation.
Valid values depend on the Firebird version, but should be one of the 1024, 2048, 4096, 8192, 16384 or 32768.
If not set, the page size recorded in the backup is used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restoreReadOnly</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set to <code>true</code> if the database should be restored in read-only mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restoreReplace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set to <code>true</code> if restore should replace the existing database with the one from backup.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
It is easy to drop an existing database if the backup can&#8217;t be restored, as the existing database is first deleted and only after that the restore process starts.
To avoid such situation it is recommended to restore a database into some dummy file first and then use file system commands to replace the existing database with the newly created one.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>verbose</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Be verbose when writing to the log.</p>
<p class="tableblock">The service called on the server will produce lots of output that will be written to the output stream specified in logger property.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition to the properties, the following methods are used to configure the paths to back up and database files when multi-file back up or restore operations are used.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addBackupPath(String)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a path to a backup file from a multi-file backup.
Should be used for restore operation only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addBackupPath(String, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a path to the multi-file backup.
The second parameter specifies the maximum size of the particular file in bytes.
Should be used for backup operation only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addRestorePath(String, int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a path for the multi-file database.
The second parameter specifies the maximum size of the database file in pages (in other words, the maximum size in bytes can be obtained by multiplying this value by <code>restorePageSize</code> parameter)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clearBackupPaths()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear all the specified backup paths.
This method also clears the path specified in <code>backupPath</code> property.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clearRestorePaths()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clear all the specified restore paths.
This method also clears the path specified in the database property.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All paths specified are paths specifications on the remote server.
This has the following implications:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>it is not possible to back up to the local or network drive unless it is mounted on the remote server;</p>
</li>
<li>
<p>it is not possible to restore from the local or network drive unless it is mounted on the remote server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>FBStreamingBackupManager</code> can be used to perform remote backup and restore, see <a href="#services-backup-and-restore-gbak-streaming">Gbak streaming backup and restore</a>.</p>
</div>
<div class="paragraph">
<p>After specifying all the needed properties, the application developer can use <code>backupDatabase()</code>, <code>backupMetadata()</code> and <code>restoreDatabase()</code> methods to perform the backup and restore tasks.
These methods will block until the operation is finished.
If the <code>logger</code> property was set, the output of the service will be written into the specified output stream, otherwise it will be ignored.<sup class="footnote">[<a id="_footnoteref_10" class="footnote" href="#_footnotedef_10" title="View footnote.">10</a>]</sup></p>
</div>
<div class="listingblock">
<div class="title">Example of backup and restore process</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">// backup the database
BackupManager backupManager = new FBBackupManager();

backupManager.setServerName("localhost");
backupManager.setPortNumber(3050);
backupManager.setUser("SYSDBA");
backupManager.setPassword("masterkey");
backupManager.setLogger(System.out);
backupManager.setVerbose(true);

backupManager.setDatabase("C:/database/employee.fdb");
backupManager.setBackupPath("C:/database/employee.fbk");

backupManager.backupDatabase();
...
// and restore it back
BackupManager restoreManager = new FBBackupManager();

restoreManager.setServerName("localhost");
restoreManager.setPortNumber(3050);
restoreManager.setUser("SYSDBA");
restoreManager.setPassword("masterkey");
restoreManager.setLogger(System.out);
restoreManager.setVerbose(true);

restoreManager.setRestoreReplace(true); // attention!!!

restoreManager.setDatabase("C:/database/employee.fdb");
restoreManager.setBackupPath("C:/database/employee.fbk");

backupManager.restoreDatabase();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The methods <code>backupDatabase(int)</code> and <code>restoreDatabase(int)</code> provide a possibility to specify additional backup and restore options that cannot be specified via the properties of this class.
The parameter value is bitwise combination of the following constants:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constant</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BACKUP_CONVERT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backup external files as tables.</p>
<p class="tableblock">By default, external tables are not backed up, only references to the external files with data are stored in the backup file.
When this option is used, the backup will store the external table as if they were regular tables.
On restore the tables are created as regular tables.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BACKUP_EXPAND</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No data compression.</p>
<p class="tableblock">The <em>gbak</em> utility uses RLE compression for the strings in backup file.
Using this option tells it to write strings in their full length, possibly fully consisting of empty characters, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BACKUP_IGNORE_CHECKSUMS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore checksums.</p>
<p class="tableblock">The backup utility can&#8217;t back up a database with page checksum errors.
Such database is considered corrupted and the completeness and correctness of the backup cannot be guaranteed.
However, in some cases such errors can be ignored, e.g. when the index page is corrupted.
In such cases the data in the database are OK and the error disappears when the database is restored and index is recreated.</p>
<p class="tableblock">Use this option only when checksum errors are detected and can&#8217;t be corrected without full backup/restore cycle.
Ensure that the restored database contains correct data afterwards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BACKUP_IGNORE_LIMBO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore in-limbo transactions.</p>
<p class="tableblock">The backup utility can&#8217;t back up a database with in-limbo transactions.
When such situation appears, the backup has to wait until the decision about the outcome of the in-limbo transaction.
After a wait timeout, an exception is thrown and backup is aborted.
This option allows to work around this situation&#8201;&#8212;&#8201;<em>gbak</em> looks for the most recent committed version of the record and writes it into the backup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BACKUP_METADATA_ONLY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Backup metadata only.</p>
<p class="tableblock">When this option is specified, the backup utility creates a backup of only the metadata information (e.g. table an/or view structure, stored procedures, etc.), but no data are backed up.
This allows restoring a clean database from the backup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BACKUP_NO_GARBAGE_COLLECT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not collect garbage during backup.</p>
<p class="tableblock">The backup process reads all records in the tables one by one.
When cooperative garbage collection is enabled<sup class="footnote">[<a id="_footnoteref_11" class="footnote" href="#_footnotedef_11" title="View footnote.">11</a>]</sup>
the transaction that accesses the latest version of the record is also responsible for marking the previous versions as garbage.
This process is time-consuming and might be switched off when creating backup, where the most recent version will be read.</p>
<p class="tableblock">Later, an operator can restore the database from the backup.
In databases with many back-versions of the records, the backup-restore cycle can be faster than traditional garbage collection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BACKUP_NON_TRANSPORTABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use non-transportable backup format.</p>
<p class="tableblock">By default, <em>gbak</em> creates a so-called transportable backup where it does not make difference whether it is later restored on a big-endian or little-endian platform.
By using this option, a non-transportable format will be used which only allows restoring the database on the same architecture.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BACKUP_OLD_DESCRIPTIONS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Save old style metadata descriptions.</p>
<p class="tableblock">Actually no real information exist for this option, by default it is switched off.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RESTORE_DEACTIVATE_INDEX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deactivate indexes during restore.</p>
<p class="tableblock">By default, indexes are created at the beginning of the restore process, and they are updated with each record being restored from the backup file.
For big tables, it is more efficient first to store data in the database and to update the index afterwards.
When this option is specified, the indexes will be restored in the inactive state.
The downside of this option is that the database administrator is required to activate indexes afterwards;
it won&#8217;t happen automatically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RESTORE_NO_SHADOW</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not restore shadow database.</p>
<p class="tableblock">If the shadow database is configured, an absolute path to the shadow is stored in the backup file.
If such backup file is restored on a different system where the path does not exist (e.g. moving a database from Windows to Linux or otherwise), the restore will fail.
Using this option allows to overcome such situations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RESTORE_NO_VALIDITY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not restore validity constraints.</p>
<p class="tableblock">This option is usually needed when the validity constraints (e.g. <code>NOT NULL</code> constraints) were added after the data were already in the database, but the database contains records that do not satisfy such constraints<sup class="footnote">[<a id="_footnoteref_12" class="footnote" href="#_footnotedef_12" title="View footnote.">12</a>]</sup>.</p>
<p class="tableblock">When this option is specified, the validity constraints won&#8217;t be restored.
This allows to recover the data and perform cleanup tasks.
The application and/or database administrators are responsible for restoring the validity constrains afterwards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RESTORE_ONE_AT_A_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commit after completing restore of each table.</p>
<p class="tableblock">By default, all data is restored in one transaction.
If for some reason a complete restore is not possible, using this option will allow to restore at least some of the data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RESTORE_USE_ALL_SPACE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not reserve 20% on each page for the future versions, useful for read-only databases.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Example of using these options:</p>
</div>
<div class="listingblock">
<div class="title">Example of using extended options for restore</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">BackupManager restoreManager = new FBBackupManager();

restoreManager.setServerName("localhost");
restoreManager.setPortNumber(3050);
restoreManager.setUser("SYSDBA");
restoreManager.setPassword("masterkey");
restoreManager.setLogger(System.out);
restoreManager.setVerbose(true);

restoreManager.setRestoreReplace(true); // attention!!!

restoreManager.setDatabase("C:/database/employee.fdb");
restoreManager.setBackupPath("C:/database/employee.fbk");

// restore database with no indexes,
// validity constraints and shadow database
backupManager.restoreDatabase(
    BackupManager.RESTORE_DEACTIVATE_INDEX |
    BackupManager.RESTORE_NO_VALIDITY |
    BackupManager.RESTORE_NO_SHADOW |
    BackupManager.RESTORE_ONE_AT_A_TIME);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="services-backup-and-restore-gbak-streaming"><a class="anchor" href="#services-backup-and-restore-gbak-streaming"></a>7.2.2. Gbak streaming backup and restore</h4>
<div class="paragraph">
<p>The <code>FBStreamingBackupManager</code> class is a sibling of <code>FBBackupManager</code>, providing streaming backup and restore.
Streaming backup and restore allows client-server backup and restore, by streaming the backup from the server to the client&#8201;&#8212;&#8201;on backup, or from the client to the server&#8201;&#8212;&#8201;on restore.</p>
</div>
<div class="paragraph">
<p>The class implements interface <code>BackupManager</code>&#8201;&#8212;&#8201;just like <code>FBBackupManager</code>, but the methods to set backup files (<code>setBackupPath</code>, <code>addBackupPath</code>) are not supported and throw an <code>IllegalArgumentException</code>.
Verbose backups are not supported.</p>
</div>
<div class="paragraph">
<p>In addition, the class defines the following methods:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setBackupOutputStream(OutputStream)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OutputStream</code> to write the backup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setRestoreInputStream(InputStream)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>InputStream</code> to read the backup to restore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setBackupBufferSize(int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Size in bytes of the local buffer to use during backup, defaults to 30KB.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="services-backup-and-restore-nbackup"><a class="anchor" href="#services-backup-and-restore-nbackup"></a>7.2.3. Nbackup</h4>
<div class="paragraph">
<p>The <code>NBackupManager</code> interface and its implementation <code>FBNbackupManager</code> provides <em>nbackup</em> backup and restore through the service API.
This form of backup and restore is server-side, meaning that all paths are on the Firebird server.
For information about <em>nbackup</em>, consult the <a href="https://www.firebirdsql.org/file/documentation/html/en/firebirddocs/nbackup/firebird-nbackup.html" target="_blank" rel="noopener">Firebird&#8217;s nbackup tool</a> documentation.</p>
</div>
<div class="paragraph">
<p>In addition to the setters and getters described in the previous section, the following methods are used to specify the backup and restore paths and properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>database</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For a backup operation, it specifies the path or alias of the database to back up.</p>
<p class="tableblock">For a restore operation, it specifies the path to the database into which the backup file will be restored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backupFile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the backup file.
For a backup operation, it specifies the path and the file name of the newly created backup file on the server.
For a restore operation, it specifies the path to the single backup file.
If a database should be restored from a multi-file backup, use the <code>addBackupFile(String)</code> method for additional files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backupLevel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The level of backup to perform.
Setting a level of <code>0</code> performs a full backup.
A level of <code>N</code> with <code>N &gt; 1</code> will back up all data pages modified since the last level <code>N - 1</code> backup.
Defaults to <code>0</code> if <code>backupGuid</code> has not been set.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backupGuid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 4.0.4</em> Sets the GUID of a previous backup (requires Firebird 4.0 or higher).
This will back up all data pages modified since the backup identified by the GUID.
The GUID is enclosed in braces (<code>{</code> and <code>}</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>noDbTriggers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable database triggers for <em>nbackup</em> operations that connect to the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inPlaceRestore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 4.0.4</em> Enables in-place restore (requires Firebird 4.0 or higher).
This allows incremental restore, for example for a read-only replica, or a hot standby.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preserveSequence</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Enables preserve sequence for restore or fixup (requires Firebird 4.0 or higher).
This preserves the existing GUID and replication sequence of the original database.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cleanHistory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 4.0.7</em> Enable the <em>clean history</em> option (requires Firebird 4.0.3 or higher).
One of the properties <code>keepRows</code> <em>or</em> <code>keepDays</code> must also be set.
When enabled, after performing a backup, old records from the <code>RDB$BACKUP_HISTORY</code> will be removed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keepDays</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 4.0.7</em> Number of days to keep backup history when <code>cleanHistory</code> is enabled.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keepRows</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 4.0.7</em> Number of rows (including the new backup!) to keep backup history when <code>cleanHistory</code> is enabled.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition to the properties, the following methods are used to configure the paths to backup-files when multi-file restore operations are used.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addBackupFile(String)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add a path to a backup file from a multi-file backup.
In practice, <code>setBackupFile</code> does the same as <code>addBackupFile</code>.
For backup, only the first file set or added is used.
For restore, the files must be in the correct order to form the chain of the level <code>0</code> backup up to the highest level or last GUID-based backup to restore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clearBackupFiles()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clears the list of backup files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backupDatabase()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform backup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restoreDatabase()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform restore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fixupDatabase()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Perform the nbackup fixup operation.
A fixup will switch a locked database back to &#8220;normal&#8221; state without merging the delta, so this is a potentially destructive action.
The normal use-case of this option is to unlock a copy of a database file where the source database file was locked with <code>nbackup -L</code> or <code>ALTER DATABASE BEGIN BACKUP</code>.
Enable <code>preserveSequence</code> to preserve the original database GUID and replication sequence.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>After specifying all the needed properties, the application developer can use the <code>backupDatabase()</code>, <code>restoreDatabase()</code> and <code>fixupDatabase</code> methods to perform the backup and restore tasks.
These methods will block until the operation is finished.
No output is written to the <code>logger</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example of nbackup backup and restore process</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">NBackupManager backupManager = new FBNBackupManager();

backupManager.setServerName("localhost");
backupManager.setPortNumber(3050);
backupManager.setUser("SYSDBA");
backupManager.setPassword("masterkey");

// backup level 1 increment against a previously performed level 0
backupManager.setDatabase("/path/to/database.fdb");
backupManager.setBackupFile("/path/to/backup_lvl_1.nbk");
backupManager.setBackupLevel(1);
backupManager.backupDatabase();

// restore level 0 and level 1 in new db restored.fdb
backupManager.clearBackupFiles();
backupManager.setDatabase("/path/to/restored.fdb");
backupManager.addBackupFile("/path/to/backup_lvl_0.nbk");
backupManager.addBackupFile("/path/to/backup_lvl_1.nbk");
backupManager.restoreDatabase();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_management"><a class="anchor" href="#_user_management"></a>7.3. User management</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Starting with Firebird 3.0, user management through the Services API has been deprecated.
You should use the SQL DDL statements for user management instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The next service available is the user management.
The routines are defined in the <code>UserManager</code> interface and are implemented in the <code>FBUserManager</code> class.
Additionally, there is an <code>User</code> interface providing getters and setters for properties of a user account on the server and corresponding implementation in the <code>FBUser</code> class.<sup class="footnote">[<a id="_footnoteref_13" class="footnote" href="#_footnotedef_13" title="View footnote.">13</a>]</sup>
The available properties of the <code>FBUser</code> class are:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique name of the user on the Firebird server. Required.
Maximum length is 31 byte.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corresponding password.
Getter return value only if the password had been set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First name of the user. Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>middleName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Middle name of the user. Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lastName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Last name of the user. Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the user on Unix. Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the group on Unix. Optional.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The management class, <code>FBUserManager</code> has the following methods to manipulate the user accounts on the server:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getUsers():Map</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method delivers a map containing usernames as keys and instances of <code>FBUser</code> class as values containing all users that are registered on the server.
The instances of <code>FBUser</code> class do not contain passwords, the corresponding property is <code>null</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>addUser(User)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register the user account on the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>updateUser(User)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the user account on the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deleteUser(User)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete the user account on the server.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An example of using the <code>FBUserManager</code> class:</p>
</div>
<div class="listingblock">
<div class="title">Example of FBUserManager class usage</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">UserManager userManager = new FBUserManager();

userManager.setServerName("localhost");
userManager.setPortNumber(3050);
userManager.setUser("SYSDBA");
userManager.setPassword("masterkey");

User user = new FBUser();
user.setUserName("TESTUSER123");
user.setPassword("test123");
user.setFirstName("John");
user.setMiddleName("W.");
user.setLastName("Doe");

userManager.add(user);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_database_maintenance"><a class="anchor" href="#_database_maintenance"></a>7.4. Database maintenance</h3>
<div class="paragraph">
<p>Database maintenance is something that everybody would prefer to
avoid, and, contrary to the backup/restore and user management
procedures, there is little automation that can be done here. Usually the
maintenance tasks are performed on the server by the database
administrator, but some routines are needed to perform the automated
database upgrade or perform periodic checks of the database validity.</p>
</div>
<div class="paragraph">
<p>This chapter describes the methods declared in the <code>MaintenanceManager</code>
interface and its implementation, the <code>FBMaintenanceManager</code> class.</p>
</div>
<div class="sect3">
<h4 id="_database_shutdown_and_restart"><a class="anchor" href="#_database_shutdown_and_restart"></a>7.4.1. Database shutdown and restart</h4>
<div class="paragraph">
<p>One of the most often used maintenance operations is database shutdown and/or bringing it back online.
When a  database was shutdown, only the user that initiated the shutdown, either SYSDBA or the database owner, can connect to the database and perform other tasks, e.g. metadata modification or database validation and repair.</p>
</div>
<div class="paragraph">
<p>The database shutdown is performed by <code>shutdownDatabase(int, int)</code> method.
The first parameter is the shutdown mode, the second&#8201;&#8212;&#8201;the maximum allowed time for operation.</p>
</div>
<div class="paragraph">
<p>There are three shutdown modes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Shutdown mode</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHUTDOWN_ATTACH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shutdown process is initiated, and it is not possible to obtain a new connection to the database, but the currently open connections are fully functional.</p>
<p class="tableblock">When, after the maximum allowed time for operation, there are still open connections to the database, the shutdown process is aborted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHUTDOWN_TRANSACTIONAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shutdown process is started, and it is not possible to start new transactions or open new connections to the database.
The transactions that were running at the time of shutdown initiation are fully functional.</p>
<p class="tableblock">When, after the maximum allowed time for operation, there are still running transactions, the shutdown process is aborted.</p>
<p class="tableblock">If no running transactions are found, the currently open connections are allowed to disconnect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SHUTDOWN_FORCE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shutdown process is started and will be completed before or when the maximum allowed time for operation is reached.
New connections and transactions are not prohibited during the wait.</p>
<p class="tableblock">After the timeout, any running transaction won&#8217;t be able to commit.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>After database shutdown, the owner of the database or SYSDBA can connect to it and perform maintenance tasks, e.g. migration to the new data model<sup class="footnote">[<a id="_footnoteref_14" class="footnote" href="#_footnotedef_14" title="View footnote.">14</a>]</sup>,
validation of the database, changing the database file configuration.</p>
</div>
<div class="paragraph">
<p>To bring the database back online use the <code>bringDatabaseOnline()</code> method.</p>
</div>
</div>
<div class="sect3">
<h4 id="_shadow_configuration"><a class="anchor" href="#_shadow_configuration"></a>7.4.2. Shadow configuration</h4>
<div class="paragraph">
<p>A database shadow is an in-sync copy of the database that is usually
stored on a different hard disk, possibly on a remote
computer<sup class="footnote">[<a id="_footnoteref_15" class="footnote" href="#_footnotedef_15" title="View footnote.">15</a>]</sup>, which can be used as a primary database if the main
database server crashes. Shadows can be defined using <code>CREATE SHADOW</code>
SQL command and are characterized by a <em>mode</em> parameter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in <code>AUTO</code> mode, the database continues operating even if the shadow becomes unavailable (disk or file system failure, remote node is not accessible, etc.)</p>
</li>
<li>
<p>in <code>MANUAL</code> mode all database operations are halted until the problem is fixed.
Usually this means that the DBA has to kill the unavailable shadow and define a new one.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>MaintenanceManager</code> provides a <code>killUnavailableShadows()</code> method to
kill the unavailable shadows. This is equivalent to the <code>gfix -kill</code>
command.</p>
</div>
<div class="paragraph">
<p>Additionally, if the main database becomes unavailable, the DBA can decide
to switch to the shadow database. In this case the shadow must be
activated before use. To activate the shadow use the
<code>activateShadowFile()</code> method. Please note, that in this case the
<code>database</code> property of the <code>MaintenanceManager</code> must point to the shadow
file which must be located on the local file system of the server to
which the management class is connected.</p>
</div>
</div>
<div class="sect3">
<h4 id="_database_validation_and_repair"><a class="anchor" href="#_database_validation_and_repair"></a>7.4.3. Database validation and repair</h4>
<div class="paragraph">
<p>The Firebird server does its best to keep the database file in a consistent state.
This is achieved by an algorithm called <em>careful writes</em>, which guarantees that the server writes data on disk in such a manner that despite events like a server crash, the database file always remains in a consistent state.
Unfortunately, it is still possible that under certain conditions, e.g. a crash of the file system or hardware failure, the database file becomes corrupted.
Firebird server can detect such cases including</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Orphan pages.
These are database pages that were allocated for subsequent write, but due to a crash were not used.
Such pages have to be marked as unused, so the server can use them again;</p>
</li>
<li>
<p>Corrupted pages.
These are database pages that were corrupted/damaged by operating system or hardware failures.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>MaintenanceManager</code> class provides a <code>validateDatabase()</code> method to perform a simple health check of the database, releasing orphan pages if needed.
It also reports presence of the checksum errors.
The output of the routine is written to the output stream configured in the <code>logger</code> property.</p>
</div>
<div class="paragraph">
<p>The <code>validateDatabase(int)</code> method can be used to customize the validation process:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Validation mode</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VALIDATE_READ_ONLY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform read-only validation.
In this case the database file won&#8217;t be repaired, only the presence of database file errors will be reported.</p>
<p class="tableblock">Can be used for a periodical health-check of the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VALIDATE_FULL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do a full check on record and pages structures, releasing unassigned record fragments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VALIDATE_IGNORE_CHECKSUM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore checksums during repair operations.</p>
<p class="tableblock">The checksum error means that the database page was overwritten in a random order and the data stored on it are corrupted.
When this option is specified, the validation process will succeed even if checksum errors are present.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To repair the corrupted database use the <code>markCorruptRecords()</code> method which marks the corrupted records as unavailable.
This method is equivalent to <code>gfix -mend</code> command.
After this operation database can be backed up and restored to a different place.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The presence of checksum errors and subsequent use of <code>markCorruptedRecords()</code> method will mark all corrupted data as unused space.
You have to perform a careful check after a backup and restore cycle to assess the damage.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_limbo_transactions"><a class="anchor" href="#_limbo_transactions"></a>7.4.4. Limbo transactions</h4>
<div class="paragraph">
<p>Limbo transactions&#8201;&#8212;&#8201;or in-limbo transactions&#8201;&#8212;&#8201;are transactions that were prepared for commit but were never committed or rolled back;
or in other words, an incomplete two-phase commit.
This can happen, for example, with a database used by JTA-enabled applications from Java<sup class="footnote">[<a id="_footnoteref_16" class="footnote" href="#_footnotedef_16" title="View footnote.">16</a>]</sup>.
A limbo transactions affects the normal database operation, since the records that were modified in that transactions are not available, as Firebird does not know whether the new version will be committed or rolled back and blocks access to them.
Also, limbo transactions prevent garbage collection, since the garbage collector does not know whether it can discard the record versions of the limbo transaction.</p>
</div>
<div class="paragraph">
<p>Jaybird contains functionality to allow the JTA-enabled transaction coordinator to recover the limbo transactions and either commit them or perform a rollback.
For cases where this is not possible, <code>MaintenanceManager</code> provides the following methods to perform this in interactive mode:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>listLimboTransactions()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method lists IDs of all in-limbo transactions to the output stream specified in logger property.</p>
<p class="tableblock">The application has to either parse the output to commit or rollback the transactions in some automated fashion, or it should present the output to the user and let him/her make a decision.
Alternatively, use one of the following two methods</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>limboTransactionsAsList()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a <code>List&lt;Long&gt;</code> of the IDs of all in-limbo transactions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getLimboTransactions()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns an array of <code>long</code> with the IDs of all in-limbo transactions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commitTransaction(long)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Commit the transaction with the specified ID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rollbackTransaction(long)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rollback the transaction with the specified ID.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_sweeping_the_database"><a class="anchor" href="#_sweeping_the_database"></a>7.4.5. Sweeping the database</h4>
<div class="paragraph">
<p>The in-limbo transactions are not the only kind of transactions that prevent garbage collection.
Another type are transactions are those that were finished by &#8220;rollback&#8221; and the changes made in such transactions were not automatically undone by the internal savepoint mechanism, e.g. when there were a lot of changes made in the transaction (e.g. 10,000 records and more), or for transactions started with &#8220;NO AUTO UNDO&#8221;/<code>isc_tpb_no_auto_undo</code>.
Such transactions are marked as "rollback" transactions on the Transaction Inventory Page and this prevents advancing the so-called Oldest Interesting Transaction (OIT), the ID of the oldest transaction which created record versions that are relevant to any of the currently running transactions.
On each access to the records, Firebird has to check all the record versions between the current transaction and the OIT, which leads to performance degradation on large databases.
To solve the issue, Firebird periodically starts a database sweeping process, that traverses all database records, removes the changes made by the rolled back transactions and moves forward the OIT.<sup class="footnote">[<a id="_footnoteref_17" class="footnote" href="#_footnotedef_17" title="View footnote.">17</a>]</sup></p>
</div>
<div class="paragraph">
<p>The sweep process is controlled by a threshold parameter, a difference between the Next Transaction and OIT, by default it is set to 20,000.
While this value is OK for the average database, a DBA can decide to increase or decrease the number to fit the database usage scenario.
Alternatively, a DBA can trigger the sweep process manually, regardless of the current difference between Next Transaction and OIT, for example during a maintenance window or hours with low load on the server.</p>
</div>
<div class="paragraph">
<p>The <code>MaintenanceManager</code> provides following methods to help with database sweeping:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setSweepThreshold(int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the threshold between Next Transaction and OIT that will trigger the automatic sweep process.
Default value is 20,000.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sweepDatabase()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Perform the sweep regardless of the current difference between Next Transaction and OIT.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_other_database_properties"><a class="anchor" href="#_other_database_properties"></a>7.4.6. Other database properties</h4>
<div class="paragraph">
<p>There are a few other properties of the database that can be set via <code>MaintenanceManager</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setDatabaseAccessMode(int)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Change the access mode of the database.
Possible values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ACCESS_MODE_READ_ONLY</code> to make database read-only;</p>
</li>
<li>
<p><code>ACCESS_MODE_READ_WRITE</code> to allow writes into the database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please note, only read-only databases can be placed on read-only media, read-write databases will need to be able to write even if only accessed with read-only transactions.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setDatabaseDialect(int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change the database SQL dialect.
Allowed values are 1 (deprecated) and 3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setDefaultCacheBuffer(int)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change the number of database pages to cache.</p>
<p class="tableblock">This setting applies to this specific database, overriding the system-wide configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setForcedWrites(boolean)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Change the forced writes setting for the database.</p>
<p class="tableblock">When forced writes are switched off, the database engine does not enforce flushing pending changes to disk, and they are kept in OS cache.
If the same page is changed again later, the write happens in memory, which in many cases increases the performance.
However, in case of OS or hardware crashes, the database might get corrupted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>setPageFill(int)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set the page fill factor.</p>
</div>
<div class="paragraph">
<p>Firebird leaves 20% of free space on each database page for future record versions.
It is possible to tell Firebird not to reserve the space.
This makes sense for read-only databases, since more data fit the page, which increases performance.</p>
</div>
<div class="paragraph">
<p>Allowed values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PAGE_FILL_FULL</code>&#8201;&#8212;&#8201;do not reserve additional space for future versions;</p>
</li>
<li>
<p><code>PAGE_FILL_RESERVE</code>&#8201;&#8212;&#8201;reserve the free space for future record versions.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="services-table-statistics-manager"><a class="anchor" href="#services-table-statistics-manager"></a>7.5. Table statistics of a connection (experimental)</h3>
<div class="paragraph">
<p><em class="since">Jaybird 5</em></p>
</div>
<div class="paragraph">
<p>The class <code>org.firebirdsql.management.FBTableStatisticsManager</code> can be used to retrieve the table statistics of a connection.</p>
</div>
<div class="paragraph">
<p>Create an instance with <code>FBTableStatisticsManager#of(java.sql.Connection)</code>&#8201;&#8212;&#8201;the connection must unwrap to a <code>FirebirdConnection</code>&#8201;&#8212;&#8201;and retrieve a snapshot of the statistics with <code>FBTableStatisticsManager#getTableStatistics()</code>.</p>
</div>
<div class="paragraph">
<p>The method <code>getTableStatistics()</code> returns a <code>Map&lt;String, TableStatistics&gt;</code>, where the keys are table names, and the values statistics of tables.</p>
</div>
<div class="paragraph">
<p>A <code>TableStatistics</code> object has the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tableName</code></p>
</li>
<li>
<p><code>readSeqCount</code></p>
</li>
<li>
<p><code>readIdxCount</code></p>
</li>
<li>
<p><code>insertCount</code></p>
</li>
<li>
<p><code>updateCount</code></p>
</li>
<li>
<p><code>deleteCount</code></p>
</li>
<li>
<p><code>backoutCount</code></p>
</li>
<li>
<p><code>purgeCount</code></p>
</li>
<li>
<p><code>expungeCount</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is an experimental feature.
Its API may change in point releases, or it may be removed or replaced entirely in a future major release.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_database_statistics"><a class="anchor" href="#_database_statistics"></a>7.6. Database statistics</h3>
<div class="paragraph">
<p>And last but not least is the <code>StatisticsManager</code> interface and corresponding implementation in the <code>FBStatisticsManager</code> class, which allow to obtain statistical information for the database, like page size, values of OIT and Next transactions, database dialect, database page allocation and its distribution.</p>
</div>
<div class="paragraph">
<p>The following methods provide the functionality equivalent to the <em>gstat</em> command line tool, the output of the commands is written to the output stream specified in the <code>logger</code> property.
It is the responsibility of the application to correctly parse the text output if needed.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getDatabase&#8203;Statistics()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get complete statistics about the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getDatabase&#8203;Statistics(int)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Get the statistical information for the specified options.</p>
</div>
<div class="paragraph">
<p>Possible values are (bit mask, can be combined):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DATA_TABLE_STATISTICS</code></p>
</li>
<li>
<p><code>SYSTEM_TABLE_STATISTICS</code></p>
</li>
<li>
<p><code>INDEX_STATISTICS</code></p>
</li>
<li>
<p><code>RECORD_VERSION_STATISTICS</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getHeader&#8203;Page()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get information from the header page (e.g. page size, OIT, OAT and Next transaction values, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getTable&#8203;Statistics(String[])</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get statistic information for the specified tables.</p>
<p class="tableblock">This method allows to limit the reported statistical information to a single or couple of the tables, not for the whole database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>getDatabase&#8203;Transaction&#8203;Info()</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Get transaction information of a database</p>
</div>
<div class="paragraph">
<p>The returned <code>DatabaseTransactionInfo</code> object has the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>oldestTransaction</code></p>
</li>
<li>
<p><code>oldestActiveTransaction</code></p>
</li>
<li>
<p><code>oldestSnapshotTransaction</code></p>
</li>
<li>
<p><code>nextTransaction</code></p>
</li>
<li>
<p><code>activeTransactionCount</code></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>static getDatabase&#8203;Transaction&#8203;Info(Connection)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as previous, but using an existing connection (must unwrap to <code>FirebirdConnection</code>)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events"><a class="anchor" href="#events"></a>8. Working with Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Firebird supports events.
Events are a feature that provides asynchronous notification to the connected applications about events triggered by the database or other applications.
Instead of requiring applications to reread the database tables to check for the changes, events make it possible to avoid that: triggers in the database can post an event in case of a change.
And even more, the event can be so specific that an application would need to reread only a limited set of records, possibly only one.</p>
</div>
<div class="paragraph">
<p>This chapter describes the event mechanism in Firebird and the common usage scenarios.</p>
</div>
<div class="sect2">
<h3 id="_database_events"><a class="anchor" href="#_database_events"></a>8.1. Database events</h3>
<div class="paragraph">
<p>An <em>event</em> is a message generated in a trigger, stored procedure or execute block that is delivered to subscribed applications.
The event is characterized only by a name which is used when the event is posted, therefore two different events must have two different names.
The applications that subscribe for events are required to specify the event names of interest, no wildcards are allowed;
and applications either provide a callback function that will be invoked in case of event or are required to poll for the posted events periodically.</p>
</div>
<div class="paragraph">
<p>Events are delivered to the application only on (after) commit of the transaction that generated the event.
Firebird does not provide any guarantees about the time of event delivery, it depends on the load of the Firebird engine, application load, network delays between application and the database system.
The database engine will continue operating even if no application subscribes to events or when the subscribed application crashed in the meantime.</p>
</div>
<div class="paragraph">
<p>It can also happen that multiple transactions will be committed before the events are delivered to the client system.
But even in such case the callback function will be invoked only once, and only the event name and the count of the events will be passed as parameters.
The same applies to periodical polling, the application will receive event names and counts of the events since last polling.</p>
</div>
<div class="paragraph">
<p>Internally, Firebird can be thought to store the subscription information in a table where columns contain event names, rows correspond to the subscribed applications and the cells contain the count of the particular event for a particular application.
When an event is posted in trigger or stored procedure, Firebird checks the subscription information and increases the event count for the subscribed applications.
Another thread checks the table periodically and notifies the application about all new events relevant to the particular application.
Such mechanism allows Firebird to keep the event notification table very small<sup class="footnote">[<a id="_footnoteref_18" class="footnote" href="#_footnotedef_18" title="View footnote.">18</a>]</sup>
and to reduce the number of messages sent to the application.</p>
</div>
<div class="paragraph">
<p>It is not possible to pass parameters with the event, e.g. an ID of the modified records.
It is also not possible to encode such information in the event names, wildcards are not supported.
For such cases, applications should maintain a change tracking table where the IDs of the modified records are stored and the event mechanism is used to tell the application that new records were added to the table.</p>
</div>
</div>
<div class="sect2">
<h3 id="_posting_events"><a class="anchor" href="#_posting_events"></a>8.2. Posting events</h3>
<div class="paragraph">
<p>Events are posted from PSQL code (trigger, stored procedure, execute block, function) using the <code>POST_EVENT</code> command.
It is possible to create a stored procedure with the sole purpose of posting events:</p>
</div>
<div class="listingblock">
<div class="title">Example of posting events from PSQL code</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="sql">CREATE PROCEDURE sp_post_event(event_name VARCHAR(72))
AS BEGIN
  POST_EVENT :event_name;
END</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>EXECUTE BLOCK</code> statement can be used to execute PSQL statements within DSQL code:</p>
</div>
<div class="listingblock">
<div class="title">Using EXECUTE BLOCK to post events</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="sql">try (Statement stmt = connection.createStatement()) {
  stmt.execute(
      "EXECUTE BLOCK AS BEGIN POST_EVENT 'some_evt'; END");
} finally {
  stmt.close();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_subscribing_to_events"><a class="anchor" href="#_subscribing_to_events"></a>8.3. Subscribing to events</h3>
<div class="paragraph">
<p>The design of the classes and interfaces in the <code>org.firebirdsql.event</code> package is similar to the Services API support;
there is a central manager-class that establishes a database connection and provides service methods to work with the events, a callback interface that applications must implement to use the asynchronous event notification and an interface representing a database event with two properties, event name and occurrence count.</p>
</div>
<div class="paragraph">
<p>Applications have to configure the following properties before starting use of the implementation <code>EventManager</code> interface:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 28.5714%;">
<col style="width: 57.1429%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>host</code><br>
<code>serverName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name or the IP address of the host to which we subscribe for events. <em>Required</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>port</code><br>
<code>portNumber</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port to which we connect to, 3050 by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><code>database</code><br>
<code>databaseName</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the database.
The path is specified for the remote host but must be absolute. <em>Required</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><div class="content"><div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<em class="since">Jaybird 5</em> <code>serverName</code>, <code>portNumber</code> and <code>databaseName</code> are replacements for <code>host</code>, <code>port</code> and <code>databaseName</code>, which have been deprecated for removal in Jaybird 6.
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the user on behalf of which we connect to the database. <em>Required</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password corresponding to the specified user. <em>Required</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Role name. <em>Optional</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expectedDb</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> With Firebird 3.0 and higher, this is used to find the non-default security database to use when authenticating.
Value is a database path or alias the user can connect to. <em>Optional</em>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authPlugins</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Comma-separated list of authentication plugins to use (ignored for Firebird 2.5 or earlier).
Use <code>null</code> (the default) to use Jaybird defaults.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>processId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Process id to report to the server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>processName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Process name to report to the server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>socketBufferSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Socket buffer size in bytes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>soTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Socket blocking read timeout in milliseconds (<code>0</code> is OS default timeout)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connectTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>int</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Socket connect timeout in milliseconds (<code>0</code> is OS default timeout)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wireCrypt</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code> or <code>WireCrypt</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Wire encryption level (<code>DISABLED</code>, <code>ENABLED</code>, <code>REQUIRED</code>, <code>DEFAULT</code>).
In Jaybird 3.0.4+ and Jaybird 4, the property is type <code>WireCrypt</code>.
In Jaybird 5, the property is type <code>String</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wireCryptAsEnum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WireCrypt</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em class="since">Jaybird 5</em> Alternative to <code>WireCrypt</code> to use <code>WireCrypt</code> enum.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dbCryptConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Database encryption config.
See <a href="#ref-dbcrypt">Database encryption support</a> for details.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>wireCompression</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>boolean</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable wire compression (requires Firebird 3.0 or higher).
Default is <code>false</code>.</p>
</div>
<div class="paragraph">
<p>This property only affects the primary connection, not the event channel (secondary connection).</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>After configuring these properties, the application has to invoke the <code>connect()</code> method to establish a physical connection to the database.
At this point the <code>EventManager</code> is ready to receive event notifications.</p>
</div>
<div class="paragraph">
<p>Now the application developer has two choices: use asynchronous event notification or use methods that will block until an event is delivered or a timeout occurs.</p>
</div>
<div class="sect3">
<h4 id="_asynchronous_event_notification"><a class="anchor" href="#_asynchronous_event_notification"></a>8.3.1. Asynchronous event notification</h4>
<div class="paragraph">
<p>The asynchronous event notification uses a separate daemon thread to wait for the event notifications and to deliver the events to the registered listeners.
The listeners are added using the <code>addEventListener(String, EventListener)</code> method, where the first parameter contains the name of the event to register on and the second parameter, an instance of <code>EventListener</code> interface that will be notified about occurrences of this event.
It is allowed to use the same instance of <code>EventListener</code> interface to listen on different events.
The code below shows an example of using asynchronous event notification.</p>
</div>
<div class="listingblock">
<div class="title">Example of registering an event listener for asynchronous event notification</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">var eventManager = new FBEventManager();
eventManager.setServerName("localhost");
eventManager.setUser("SYSDBA");
eventManager.setPassword("masterkey");
eventManager.setDatabaseName("c:/database/employee.fdb");

eventManager.connect();

eventManager.addEventListener("test_event",
    event -&gt;
        System.out.printf("Event [%s] occured %d time(s)%n",
            event.getEventName(), event.getEventCount()));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_blocking_methods"><a class="anchor" href="#_using_blocking_methods"></a>8.3.2. Using blocking methods</h4>
<div class="paragraph">
<p>Alternatively, an application can use the synchronous methods, one that blocks until the named event is received&#8201;&#8212;&#8201;the <code>waitForEvent(String)</code> method, or one that will block until the named event is received or timeout specified in the second parameter occurs&#8201;&#8212;&#8201;the <code>waitForEvent(String, int)</code> method.
The following shows an example of using the blocking methods.</p>
</div>
<div class="listingblock">
<div class="title">Example of blocking waiting for event with a specified timeout</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">EventManager eventManager = new FBEventManager();

eventManager.setServerName("localhost");
eventManager.setUser("SYSDBA");
eventManager.setPassword("masterkey");
eventManager.setDatabaseName("c:/database/employee.fdb");

eventManager.connect();

int eventCount =
    eventManager.waitForEvent("test_event", 10 * 1000);

System.out.println(
    "Received " + eventCount + " event(s) during 10 sec.");</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="reference" class="sect0"><a class="anchor" href="#reference"></a>Reference Manual</h1>
<div class="sect1">
<h2 id="ref-connection"><a class="anchor" href="#ref-connection"></a>9. Connection reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ref-auth-plugins"><a class="anchor" href="#ref-auth-plugins"></a>9.1. Authentication plugins</h3>
<div class="paragraph">
<p><em class="since">Firebird 3.0</em></p>
</div>
<div class="paragraph">
<p>Firebird 3.0 introduced authentication plugins together with a new authentication model.
By default, Firebird 3.0 uses the authentication plugin <code>Srp</code> (<em>Secure remote password</em>).
It also includes plugins <code>Legacy_Auth</code> that supports the pre-Firebird-3 authentication mechanism, and&#8201;&#8212;&#8201;<em class="since">Firebird 3.0.4</em>&#8201;&#8212;&#8201;<code>Srp256</code>.
Firebird 4.0 introduced the plugins <code>Srp224</code>, <code>Srp384</code> and <code>Srp512</code>.</p>
</div>
<div class="paragraph">
<p>The original <code>Srp</code> plugin uses SHA-1, the new Srp-variants use SHA-224, SHA-256, SHA-384 and SHA-512 respectively.<sup class="footnote">[<a id="_footnoteref_19" class="footnote" href="#_footnotedef_19" title="View footnote.">19</a>]</sup></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Support for these plugins depends on support of these hash algorithms in the JVM.
For example, SHA-224 is not supported in Oracle Java 7 by default and may require additional JCE libraries.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-auth-plugins-default"><a class="anchor" href="#ref-auth-plugins-default"></a>9.1.1. Default authentication plugins</h4>
<div class="sect4">
<h5 id="ref-auth-plugins-default-jb6"><a class="anchor" href="#ref-auth-plugins-default-jb6"></a>Jaybird 6</h5>
<div class="paragraph">
<p>The default plugins applied by Jaybird 6 are&#8201;&#8212;&#8201;in order&#8201;&#8212;&#8201;<code>Srp256</code> and <code>Srp</code>.
This applies only for the pure Java protocol and only when connecting to Firebird 3.0 or higher.
The native implementation will use its own default or the value configured through its <code>firebird.conf</code>.</p>
</div>
<div class="paragraph">
<p>When connecting to Firebird 3.0 or higher, the pure Java protocol in Jaybird 4 and higher will no longer try the <code>Legacy_Auth</code> plugin by default as it is an unsafe authentication mechanism.
We strongly suggest to use SRP users only, but if you really need to use legacy authentication, you can specify connection property <code>authPlugins=Legacy_Auth</code>, see <a href="#ref-auth-plugins-config">Configure authentication plugins</a> for details.</p>
</div>
<div class="paragraph">
<p>When connecting to Firebird 3.0 versions earlier than 3.0.4, or if <code>Srp256</code> has been removed from the <code>AuthServer</code> setting in Firebird, this might result in slightly slower authentication because more roundtrips to the server are needed.
After an attempt to use <code>Srp256</code> fails, authentication continues with <code>Srp</code>.</p>
</div>
<div class="paragraph">
<p>To avoid this, consider explicitly configuring the authentication plugins to use, see <a href="#ref-auth-plugins-config">Configure authentication plugins</a> for details.</p>
</div>
<div class="paragraph">
<p>Firebird 2.5 and earlier&#8201;&#8212;&#8201;if enabled&#8201;&#8212;&#8201;will always use legacy authentication.</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-auth-plugins-default-jb5"><a class="anchor" href="#ref-auth-plugins-default-jb5"></a>Jaybird 5</h5>
<div class="paragraph">
<p>The default plugins applied by Jaybird 5 are&#8201;&#8212;&#8201;in order&#8201;&#8212;&#8201;<code>Srp256</code> and <code>Srp</code>.</p>
</div>
<div class="paragraph">
<p>Firebird 2.5 and earlier will always use legacy authentication.</p>
</div>
<div class="paragraph">
<p>See section on <a href="#ref-auth-plugins-default-jb6">Jaybird 6</a> for further details.</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-auth-plugins-default-jb4"><a class="anchor" href="#ref-auth-plugins-default-jb4"></a>Jaybird 4</h5>
<div class="paragraph">
<p>The default plugins applied by Jaybird 4 are&#8201;&#8212;&#8201;in order&#8201;&#8212;&#8201;<code>Srp256</code> and <code>Srp</code>.</p>
</div>
<div class="paragraph">
<p>Firebird 2.5 and earlier will always use legacy authentication.</p>
</div>
<div class="paragraph">
<p>See section on <a href="#ref-auth-plugins-default-jb6">Jaybird 6</a> for further details.</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-auth-plugins-default-jb3"><a class="anchor" href="#ref-auth-plugins-default-jb3"></a>Jaybird 3</h5>
<div class="paragraph">
<p>Jaybird 3 will try&#8201;&#8212;&#8201;in order&#8201;&#8212;&#8201;<code>Srp256</code>, <code>Srp</code> and <code>Legacy_Auth</code>.
It is not possible to specify a different configuration in Jaybird 3.</p>
</div>
<div class="paragraph">
<p>Firebird 2.5 and earlier will always use legacy authentication.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-auth-plugins-config"><a class="anchor" href="#ref-auth-plugins-config"></a>9.1.2. Configure authentication plugins</h4>
<div class="paragraph">
<p>The connection property <code>authPlugins</code> (alias <code>auth_plugin_list</code>) specifies the authentication plugins to try when connecting.
The value of this property is a comma-separated list with the plugin names.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>authPlugins</code> values can be separated by comma, space, tab, or semicolon.
We recommend using comma as the separator.
The semicolon should not be used in a JDBC URL as there the semicolon is a separator between connection properties.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Unknown or unsupported plugins will be logged and skipped.
When no known plugins are specified, Jaybird will throw an exception with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For pure Java</p>
<div class="paragraph">
<p><em>Cannot authenticate. No known authentication plugins, requested plugins: [&lt;plugin-names&gt;] [SQLState:28000, ISC error code:337248287]</em></p>
</div>
</li>
<li>
<p>For native</p>
<div class="paragraph">
<p><em>Error occurred during login, please check server firebird.log for details [SQLState:08006, ISC error code:335545106]</em></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>authPlugins</code> property only affects connecting to Firebird 3.0 or later.
It will be ignored when connecting to Firebird 2.5 or earlier.
The setting will also be ignored for native connections when using a fbclient library of version 2.5 or earlier.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDBC URL to connect using <code>Srp256</code> only:</p>
<div class="listingblock">
<div class="content">
<pre>jdbc:firebirdsql://localhost/employee?authPlugins=Srp256</pre>
</div>
</div>
</li>
<li>
<p>JDBC URL to connect using <code>Legacy_Auth</code> only (this is unsafe!)</p>
<div class="listingblock">
<div class="content">
<pre>jdbc:firebirdsql://localhost/employee?authPlugins=Legacy_Auth</pre>
</div>
</div>
</li>
<li>
<p>JDBC URL to try <code>Legacy_Auth</code> before <code>Srp512</code> (this order is unsafe!)</p>
<div class="listingblock">
<div class="content">
<pre>jdbc:firebirdsql://localhost/employee?authPlugins=Legacy_Auth,Srp512</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The property is also supported by the data sources, service managers and event manager.</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-auth-plugins-external"><a class="anchor" href="#ref-auth-plugins-external"></a>9.1.3. External authentication plugin support (experimental)</h4>
<div class="paragraph">
<p>If you develop your own Firebird authentication plugin (or use a third-party authentication plugin), it is possible&#8201;&#8212;&#8201;for pure Java only&#8201;&#8212;&#8201;to add your own authentication plugin by implementing the interfaces</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.firebirdsql.gds.ng.wire.auth.AuthenticationPluginSpi</code></p>
</li>
<li>
<p><code>org.firebirdsql.gds.ng.wire.auth.AuthenticationPlugin</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The SPI implementation needs to be listed in <code>META-INF/services/org.firebirdsql.gds.ng.wire.auth.AuthenticationPluginSpi</code> in your JAR.</p>
</div>
<div class="paragraph">
<p>For a modular JAR, using Jaybird 6 or higher, the plugin will also need to be declared in <code>module-info.java</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">module org.example.auth {
  requires org.firebirdsql.jaybird;

  provides org.firebirdsql.gds.ng.wire.auth.AuthenticationPluginSpi
    with org.example.MyAuthPlugin;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This support is experimental and comes with a number of caveats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We haven&#8217;t tested this extensively (except for loading Jaybird&#8217;s own plugins internally)</p>
</li>
<li>
<p>The authentication plugin (and provider) interfaces should be considered unstable;
they may change with point-releases (although we will try to avoid that)</p>
</li>
<li>
<p>For now, it is probably necessary for the JAR containing the authentication plugin to be loaded by the same class loader&#8201;&#8212;&#8201;or at least, from the same classpath&#8201;&#8212;&#8201;as Jaybird itself</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you implement a custom authentication plugin and run into problems, contact us on the <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java Google Group</a>.</p>
</div>
<div class="paragraph">
<p>If you use a native connection, check the Firebird documentation how to add third-party authentication plugins to fbclient.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-wirecrypt"><a class="anchor" href="#ref-wirecrypt"></a>9.2. Wire encryption support</h3>
<div class="paragraph">
<p><em class="since">Firebird 3.0</em></p>
</div>
<div class="paragraph">
<p>Firebird 3.0 and higher have support for encrypting the data sent over the network.
This <em>wire encryption</em> is configured using the connection property <code>wireCrypt</code>, with the following (case-insensitive) values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>DEFAULT</code></dt>
<dd>
<p>default (value used when <code>wireCrypt</code> is not specified; you&#8217;d normally not specify <code>DEFAULT</code> explicitly)</p>
</dd>
<dt class="hdlist1"><code>ENABLED</code></dt>
<dd>
<p>enable, but not require, wire encryption</p>
</dd>
<dt class="hdlist1"><code>REQUIRED</code></dt>
<dd>
<p>require wire encryption (only if Firebird version is 3.0 or higher)</p>
</dd>
<dt class="hdlist1"><code>DISABLED</code></dt>
<dd>
<p>disable wire encryption</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The default value acts as <code>ENABLED</code> for pure Java connections, for native connections this wil use the fbclient default (either <code>Enabled</code> or the configured value of <code>WireCrypt</code> from a <code>firebird.conf</code> read by the native library).</p>
</div>
<div class="paragraph">
<p>Connection property <code>wireCrypt=REQUIRED</code> will <strong>not</strong> reject unencrypted connections when connecting to Firebird 2.5 or lower.
This behavior matches the Firebird 3.0 client library behavior.
The value will also be ignored when using native connections with a Firebird 2.5 client library.</p>
</div>
<div class="paragraph">
<p>Using <code>wireCrypt=DISABLED</code> when Firebird 3.0 or higher uses setting <code>WireCrypt = Required</code> (or vice versa) will yield error <em>"Incompatible wire encryption levels requested on client and server"</em> (error: <em>isc_wirecrypt_incompatible / 335545064</em>).</p>
</div>
<div class="paragraph">
<p>The same error is raised when connecting to Firebird 3.0 and higher with a legacy authentication user with connection property <code>wireCrypt=REQUIRED</code>, as the legacy authentication does not provide an encryption key to establish an encrypted connection.</p>
</div>
<div class="paragraph">
<p>Alternative wire encryption plugins are currently not supported, although we made some preparations to support this.
If you want to develop such a plugin, contact us on the <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java Google Group</a>, so we can work out the details of adding plugin support.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The implementation comes with a number of caveats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>we cannot guarantee that the session key cannot be obtained by someone with access to your application or the machine hosting your application (although that in itself would already imply a severe security breach)</p>
</li>
<li>
<p>the ARC4 encryption&#8201;&#8212;&#8201;the default provided by Firebird&#8201;&#8212;&#8201;is considered to be a weak (maybe even broken) cipher these days</p>
</li>
<li>
<p>the encryption cipher uses ARCFOUR with a 160 bits key, this means that the unlimited Cryptographic Jurisdiction Policy needs to be used (or at minimum a custom policy that allows ARCFOUR with 160 bits keys). See also FAQ entry <a href="https://firebirdsql.org/docs/drivers/java/faq.html#encryption-key-did-not-meet-algorithm-requirements-of-symmetricarc4-337248282" target="_blank" rel="noopener">Encryption key did not meet algorithm requirements of Symmetric/Arc4 (337248282)</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ref-wirecompression"><a class="anchor" href="#ref-wirecompression"></a>9.3. Wire compression</h3>
<div class="paragraph">
<p><em class="since">Firebird 3.0</em></p>
</div>
<div class="paragraph">
<p>Jaybird supports zlib wire compression in the pure Java wire protocol.
Compression can be enabled using boolean connection property <code>wireCompression</code>.</p>
</div>
<div class="paragraph">
<p>The connection property only has effect for the pure Java wire protocol connections on Firebird 3.0 and higher, if the server has the zlib library.
Native connections will follow the <code>WireCompression</code> configuration in the <code>firebird.conf</code> read by the client library, if the zlib library is on the search path.</p>
</div>
<div class="paragraph">
<p>Compression is currently disabled by default.
This may change in future versions of Jaybird to be enabled by default.</p>
</div>
<div class="paragraph">
<p>The <code>wireCompression</code> property is also available on data sources and the management classes in <code>org.firebirdsql.management</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-dbcrypt"><a class="anchor" href="#ref-dbcrypt"></a>9.4. Database encryption support</h3>
<div class="paragraph">
<p><em class="since">Firebird 3.0</em></p>
</div>
<div class="paragraph">
<p>Jaybird 3.0.4 added support for Firebird 3.0 database encryption callbacks in the pure Java implementation of the version 13 protocol.</p>
</div>
<div class="paragraph">
<p>The current implementation is simple and only supports replying with a static value from a connection property.
Be aware that a static value response for database encryption is not very secure as it can easily lead to replay attacks or unintended key exposure.</p>
</div>
<div class="paragraph">
<p>Future versions of Jaybird may introduce plugin support for database encryption plugins that require a more complex callback.</p>
</div>
<div class="paragraph">
<p>The static response value of the encryption callback can be set through the <code>dbCryptConfig</code> connection property.
Data sources and <code>ServiceManager</code> implementations have an equivalent property with the same name.
This property can be set as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Absent or empty value&#8201;&#8212;&#8201;empty response to callback (depending on the database encryption plugin this may just work or yield an error later).</p>
</li>
<li>
<p>Strings prefixed with <code>base64:</code>&#8201;&#8212;&#8201;rest of the string is decoded as <em>base64</em> to bytes.
The <code>=</code> padding characters are optional, but when present they must be valid (that is: if you use padding, you must use the right number of padding characters for the length).</p>
</li>
<li>
<p><em class="since">Jaybird 5</em> Strings prefixed with <code>base64url:</code>&#8201;&#8212;&#8201;rest of the string is decoded as <em>base64url</em> to bytes (using &#8220;Base 64 URL and Filename safe&#8221; alphabet).
As <code>base64:</code>, the <code>=</code> padding characters are optional</p>
</li>
<li>
<p>Plain string value&#8201;&#8212;&#8201;string is encoded to bytes using UTF-8, and these bytes are used as the response.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because of the limitation of connection URL parsing, we strongly suggest to avoid plain string values with <code>&amp;</code> or <code>;</code>.
Likewise, avoid <code>:</code> so that we can support other prefixes similar to <code>base64:</code> and <code>base64url:</code> in the future.
If you need these characters, consider using a base64 encoded value instead.</p>
</div>
<div class="paragraph">
<p>Jaybird 3.0.9 and higher expects keys and values in the JDBC URL to be URL encoded.
When the <em>base64</em> encoded value contains <code>&#43;</code>, it must be escaped as <code>%2B</code> in the JDBC URL, otherwise it is decoded to a space and decoding will fail.
Jaybird 5 introduced <em>base64url</em>, an alternative to <em>base64</em>, which doesn&#8217;t use <code>&#43;</code>, thus avoiding the need to escape.</p>
</div>
<div class="paragraph">
<p>For service operations, as implemented in the <code>org.firebirdsql.management</code> package, Firebird requires the <code>KeyHolderPlugin</code> configuration to be globally defined in <code>firebird.conf</code>.
Database-specific configuration in <code>databases.conf</code> will be ignored for service operations.
Be aware that some service operations on encrypted databases are not supported by Firebird 3.0 (e.g. <code>gstat</code> equivalents other than <code>gstat -h</code> or <code>gstat -e</code>).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Other warnings and limitations</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Database encryption callback support is only available in the pure Java implementation.
Support for native and embedded connections may be added in a future version.</p>
</li>
<li>
<p>The database encryption callback does not require an encrypted connection, so the key can be exchanged unencrypted if wire protocol encryption has been disabled client-side or server-side, or if legacy authentication is used.
Consider setting connection property <code>wireCrypt=REQUIRED</code> to force encryption (caveat: see the next point).</p>
</li>
<li>
<p>Firebird may ask for the database encryption key before the connection has been encrypted (for example if the encrypted database itself is used as the security database).</p>
</li>
<li>
<p>We cannot guarantee that the <code>dbCryptConfig</code> value cannot be obtained by someone with access to your application or the machine hosting your application (although that in itself would already imply a severe security breach).</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ref-defaultholdable"><a class="anchor" href="#ref-defaultholdable"></a>9.5. Default holdable result sets</h3>
<div class="paragraph">
<p>This connection property enables a connection to create holdable result sets by default.
This property can be used as a workaround for applications that expect a result set to remain open after commit, or have expectations regarding result sets in auto-commit mode that do not conform to the JDBC specification.</p>
</div>
<div class="paragraph">
<p>Specifically, such applications open a result set and, while traversing it, execute other statements using the same connection.
According to the JDBC specification the result set has to be closed if another statement is executed using the same connection in auto-commit mode.
With the default result set holdability, close on commit, doing this yields a <code>SQLException</code> with message <em>"The result set is closed"</em>.</p>
</div>
<div class="paragraph">
<p>The property is accessible as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>connection property <code>defaultResultSetHoldable</code> with no value, empty value or <code>true</code> (aliases: <code>defaultHoldable</code> and <code>result_set_holdable</code>);</p>
</li>
<li>
<p><em class="until">Jaybird 5</em> database parameter buffer member <code>isc_dpb_result_set_holdable</code>;</p>
</li>
<li>
<p><code>FirebirdConnectionProperties</code> interface methods <code>isDefaultResultSetHoldable()</code> and <code>setDefaultResultSetHoldable(boolean)</code></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The price for using this feature is that each holdable result set will be fully cached in memory.
The memory occupied by this result set will be released when the result is closed, or the statement that produced the result set is closed or re-executed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ref-firebirdautocommit"><a class="anchor" href="#ref-firebirdautocommit"></a>9.6. Firebird auto commit mode (experimental)</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This functionality is experimental, and will remain so unless Firebird changes how its auto-commit mode works.
<strong>Do not use this unless you really know what you&#8217;re doing.</strong></p>
</div>
<div class="paragraph">
<p>Incorrect use of this functionality can result in excessive growth of the database due to increases in back-version chains of records, which can also cause performance degradation.
Additionally, when used with an isolation level other than READ COMMITTED, the connection will only see changes committed at the time the initial transaction was started;
the auto-commit barrier will not make new committed changes visible to the current transaction.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This option is enabled by specifying the connection property <code>useFirebirdAutocommit=true</code>.</p>
</div>
<div class="paragraph">
<p>With this option, a connection in auto-commit mode will configure the transaction to use <code>isc_tpb_autocommit</code>.
This means that Firebird server will internally commit the transaction after each statement completion using &#8220;<em>commit retain</em>&#8221;.
Jaybird itself will not commit until connection close (or disabling auto-commit).
The exception is if the statement was of type <code>isc_info_sql_stmt_ddl</code>, in that case Jaybird will commit on statement success and rollback on statement failure (just like it does for all statements in normal auto-commit mode).
The reason is that Firebird for some DDL commands only executes at a real commit boundary and relying on the Firebird auto-commit is insufficient.</p>
</div>
<div class="paragraph">
<p>On statement completion (as specified in JDBC), result sets will still close unless they are holdable over commit.
The result set is only closed client-side, which means that the cursor remains open server-side to prevent roundtrips.
This may lead to additional resource usage server-side unless explicitly closed in the code.
Note that any open blobs will be closed client- and server-side (until this is improved with <a href="https://github.com/FirebirdSQL/jaybird/issues/442" target="_blank" rel="noopener">jaybird#442</a>).</p>
</div>
<div class="paragraph">
<p>A connection can be interrogated using <code>FirebirdConnection.isUseFirebirdAutocommit()</code> if it uses <code>isc_tpb_autocommit</code>.</p>
</div>
<div class="paragraph">
<p>If you manually add <code>isc_tpb_autocommit</code> to the transaction parameter buffer, and you enable this option, the <code>isc_tpb_autocommit</code> will be removed from the TPB on <code>setAutoCommit(false)</code>.</p>
</div>
<div class="paragraph">
<p>Artificial testing with repeated inserts (using a prepared statement) against a Firebird server on localhost shows that this leads to a reduction of execution time of +/- 7%.</p>
</div>
<div class="paragraph">
<p>Support for this option is experimental, and should only be enabled if you 1) know what you&#8217;re doing, and 2) really need this feature.
Internally <code>isc_tpb_autocommit</code> uses <code>commit_retaining</code>, which means that using this feature may increase the transaction gap with associated sweep and garbage collection impact.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-processinfo"><a class="anchor" href="#ref-processinfo"></a>9.7. Process information</h3>
<div class="paragraph">
<p>Introduced in Firebird 2.1, the <code>MON$ATTACHMENTS</code> monitoring table contains information about database attachments, including information about the client process.</p>
</div>
<div class="paragraph">
<p>The columns <code>MON$REMOTE_PID</code> and <code>MON$REMOTE_PROCESS</code> report the process id and process name of the connected process.</p>
</div>
<div class="paragraph">
<p>Jaybird 5 and earlier do not provide this information by default, except for the process ID of native connections, but they can be specified with system or connection properties (see below).
This has two main reasons: until recently Java did not have a portable way of retrieving the process id, and in most cases the process name is just &#8220;java&#8221; (or similar), which is not very useful.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> Starting with Jaybird 6, pure Java connections will by default report the actual process ID, just like native connections.
When a <code>SecurityManager</code> is installed, the entire call-chain needs to have the <code>RuntimePermission("manageProcess")</code> to obtain the process ID in pure Java connections.
If this permission check fails, Jaybird will silently ignore it and not set the <code>isc_dpb_process_id</code> based on the actual process ID.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> The process name is returned from <code>Connection.getClientInfo("ApplicationName")</code>, if the client info property <code>ApplicationName</code> has not been set explicitly with <code>Connection.setClientInfo</code>, and/or if there is no property <code>ApplicationName</code> in the <code>USER_SESSION</code> context.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Do not use the process name and process id information for security decisions.
Treat it as informational only, as clients can report fake information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Native connections will always report the actual process ID, if a fbclient of Firebird 2.1 or higher is used.
This cannot be overridden using the options below.</p>
</div>
<div class="paragraph">
<p>Since Firebird 3.0, the <code>MON$ATTACHMENTS</code> table also includes the column <code>MON$CLIENT_VERSION</code>.
Jaybird will report its full version (e.g. <code>Jaybird jaybird-6.0.3</code>).</p>
</div>
<div class="paragraph">
<p>It is possible to specify the process name and process id in two ways:</p>
</div>
<div class="sect3">
<h4 id="ref-processinfo-systemprop"><a class="anchor" href="#ref-processinfo-systemprop"></a>9.7.1. System properties for process information</h4>
<div class="paragraph">
<p>It is possible to specify the process information through Java system properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.pid</code></dt>
<dd>
<p>Process id</p>
<div class="paragraph">
<p>This property is ignored on native connections, which will always report the actual process id.</p>
</div>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.processName</code></dt>
<dd>
<p>Process name</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>In Jaybird 5 and earlier, this is the preferred method because you only need to specify it once.
For Jaybird 6 and later, in case of the process id, the preferred method is to not set any option and use the actual process ID.</p>
</div>
<div class="paragraph">
<p>These properties are read every time a connection is created, so they can be changed during the lifetime of a program.
Changes to these system properties will only affect connections created after the change.</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-processinfo-connprops"><a class="anchor" href="#ref-processinfo-connprops"></a>9.7.2. Connection properties for process information</h4>
<div class="paragraph">
<p>It is also possible to specify the process information through connection properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>processId</code></dt>
<dd>
<p>Process id (alias: <code>process_id</code>)</p>
<div class="paragraph">
<p>This property is ignored on native connections, which will always report the actual process id.</p>
</div>
</dd>
<dt class="hdlist1"><code>processName</code></dt>
<dd>
<p>Process name (alias: <code>process_name</code>, <code>ApplicationName</code>, <code>applicationName</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The connection properties take precedence over the system properties.</p>
</div>
<div class="paragraph">
<p>Since Jaybird 5, these properties are also exposed on data sources.
In earlier versions, use <code>setNonStandardProperty</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-datatypebind"><a class="anchor" href="#ref-datatypebind"></a>9.8. Data type bind support</h3>
<div class="paragraph">
<p><em class="since">Firebird 4.0</em></p>
</div>
<div class="paragraph">
<p>Firebird 4.0 introduced the <code>SET BIND</code> statement and <code>isc_dpb_set_bind</code> DPB item.
This allows you to define data type conversion rules for compatibility or ease of processing data.</p>
</div>
<div class="paragraph">
<p>This feature is specifically necessary for using the <code>WITH TIME ZONE</code> types under Jaybird 3, or Jaybird 4 on Java 7.
See also <a href="#ref-datetime-timezonebind">Defining time zone data type bind</a>.</p>
</div>
<div class="paragraph">
<p>In Jaybird this is exposed as connection property <code>dataTypeBind</code> (alias <code>set_bind</code>).
The value of this connection property is a semicolon-separated list of data type bind definitions.</p>
</div>
<div class="paragraph">
<p>A data type bind definition is of the form <code>&lt;from-type&gt; TO &lt;to-type&gt;</code>.
A definition is the same as the second half of a <code>SET BIND</code> statement after the <code>OF</code>.
See the Firebird 5.0 documentation of <a href="https://firebirdsql.org/file/documentation/chunk/en/refdocs/fblangref50/fblangref50-management.html#fblangref50-management-setbind"><code>SET BIND</code></a> for more information.
Invalid values or impossible mappings will result in an error on connect.</p>
</div>
<div class="paragraph">
<p>When using the <code>dataTypeBind</code> connection property in a JDBC URL, the semicolons of the list need to be encoded as <code>%3B</code>, as unescaped semicolons in the JDBC URL are an alternative to <code>&amp;</code> as the separator between properties.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="title">JDBC url with dataTypeBind and encoded semicolon</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">String jdbcUrl = "jdbc:firebirdsql://localhost/database?charSet=utf-8"
    + "&amp;dataTypeBind=decfloat to varchar%3Btimestamp with time zone to legacy"</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the property is set through a <code>Properties</code> object or a <code>DataSource</code> configuration, you should not encode the semicolon as this will result in errors.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="title">Properties object with dataTypeBind</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Properties props = new Properties();
props.setProperty("dataTypeBind",
    "decfloat to varchar;timestamp with time zone to legacy"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Values set through this connection property will be the session default configuration, which means that they are retained (or reverted to) when executing <a href="https://firebirdsql.org/file/documentation/chunk/en/refdocs/fblangref50/fblangref50-management-session-reset.html#fblangref50-management-session-reset-alter"><code>ALTER SESSION RESET</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-enable-protocol"><a class="anchor" href="#ref-enable-protocol"></a>9.9. Enabling unsupported protocol versions</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>Since Jaybird 6, the pure Java protocol implementation will no longer attempt to connect with protocol versions of Firebird versions which are not supported.
Since the minimum supported Firebird version in Jaybird 6 is Firebird 3.0, this means that protocol versions 10, 11 and 12 are no longer tried by default.
Protocol versions higher than 19 (Firebird 5.0.3) will also not be attempted (assuming a protocol implementation with that version number exists on the classpath).</p>
</div>
<div class="paragraph">
<p>As a workaround, the connection property <code>enableProtocol</code> can enable unsupported protocols, assuming a suitable protocol implementation is available on the classpath.</p>
</div>
<div class="paragraph">
<p>This connection property can have the following values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A comma-separated list of additional protocol versions to try (e.g. <code>"11,12"</code>).
The listed versions are tried in addition to the supported protocol versions.
Non-integer values or unknown protocol versions are silently ignored.</p>
<div class="paragraph">
<p>It is possible to use the &#8220;masked&#8221; protocol version (e.g. <code>"32780"</code> for protocol version 12).
However, we recommend using the unmasked version (e.g. <code>"12"</code> for protocol version 12).</p>
</div>
</li>
<li>
<p><code>"*"</code>&#8201;&#8212;&#8201;enable all available protocol versions</p>
</li>
<li>
<p><code>null</code> or empty string (<code>""</code>)&#8201;&#8212;&#8201;default behaviour, only use supported protocols</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A different default value of <code>enableProtocol</code> can be set using the system property <a href="#systemproperties-default-enable-protocol"><code>org.firebirdsql.jdbc.defaultEnableProtocol</code></a>.
This system property is checked each time a connection configuration is created, so it can be changed at runtime.
If you use a Jaybird <code>DataSource</code> implementation, it uses the value at the time the <code>DataSource</code> is created;
if you use <code>DriverManager</code>&#8201;&#8212;&#8201;this can include third-party data sources, it uses the value at the time the connection is created.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Given these protocol versions and their Firebird version are not supported, there is no guarantee that the driver will function correctly when an unsupported protocol is enabled this way.
Especially things like database metadata could use features that are not supported by older Firebird versions.
We recommend upgrading your Firebird version, or downgrading to a Jaybird version which still supports your Firebird version.</p>
</div>
<div class="paragraph">
<p>For maximum compatibility, it is recommended to either use <code>"*"</code>, or to make sure to include the maximum protocol version of your Firebird version.</p>
</div>
<div class="paragraph">
<p>Unsupported protocol versions may be removed in future releases of Jaybird.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Firebird versions and protocol versions</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Firebird version</th>
<th class="tableblock halign-left valign-top">Maximum protocol</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0&#8201;&#8212;&#8201;2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15<sup class="footnote">[<a id="_footnoteref_20" class="footnote" href="#_footnotedef_20" title="View footnote.">20</a>]</sup><sup class="footnote">[<a id="_footnoteref_21" class="footnote" href="#_footnotedef_21" title="View footnote.">21</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16<sup class="footnote">[<a id="_footnoteref_22" class="footnote" href="#_footnotedef_22" title="View footnote.">22</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19<sup class="footnote">[<a id="_footnoteref_23" class="footnote" href="#_footnotedef_23" title="View footnote.">23</a>]</sup></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="ref-catalog-as-package"><a class="anchor" href="#ref-catalog-as-package"></a>9.10. Opt-in feature for package information in DatabaseMetaData</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em><br>
<em class="since">Firebird 3.0</em></p>
</div>
<div class="paragraph">
<p>Firebird 3.0 added packages, which can contain stored procedures and functions.
The JDBC API does not provide a &#8220;standard&#8221; way of accessing information about packages, or the routines defined in packages.
Instead of adding additional Jaybird-specific metadata methods, we&#8217;ve added an &#8220;opt-in&#8221; feature that provides access through normal metadata methods, using the &#8220;catalog&#8221; to report packages.</p>
</div>
<div class="paragraph">
<p>This feature can be enabled by setting the connection property <code>useCatalogAsPackage</code> to <code>true</code>.
When this connection property is enabled, the <code>DatabaseMetaData</code> of that connection will have the following changes in behaviour:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getCatalogs()</code> lists packages, with package names in <code>TABLE_CAT</code>.</p>
</li>
<li>
<p><code>getFunctions</code>, <code>getFunctionColumns</code>, <code>getProcedures</code>, and <code>getProcedureColumns</code> include information on procedures or functions in packages</p>
<div class="ulist">
<ul>
<li>
<p>Columns <code>FUNCTION_CAT</code>/<code>PROCEDURE_CAT</code> will report:</p>
<div class="ulist">
<ul>
<li>
<p>For packaged procedures and functions&#8201;&#8212;&#8201;the package name</p>
</li>
<li>
<p>For normal (non-package) procedures and functions&#8201;&#8212;&#8201;an empty string instead of <code>null</code> (because of the following rule)</p>
</li>
</ul>
</div>
</li>
<li>
<p>If parameter <code>catalog</code> is <code>""</code> (empty string), only normal stored procedures or stored functions are reported.</p>
</li>
<li>
<p>If parameter <code>catalog</code> is <code>null</code>, both packaged and normal stored procedures or stored functions are reported.</p>
</li>
<li>
<p>For other values of parameter <code>catalog</code>, these metadata methods will only return procedures, functions, or their columns of the specified package (exact match, case-sensitive; not a <code>LIKE</code> pattern)</p>
</li>
<li>
<p>For normal (non-package) procedures and functions, the <code>SPECIFIC_NAME</code> column will be the unquoted function or procedure name (same as when <code>useCatalogAsPackage</code> is not enabled), and for packaged procedures and functions, it will be <code><em>quoted-package-name</em> + '.' + <em>quoted-routine-name</em></code> (e.g. <code>"SOME_PACKAGE"."SOME_FUNCTION"</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>getCatalogSeparator()</code> returns <code>"."</code> (string with period).</p>
</li>
<li>
<p><code>getCatalogTerm()</code> returns <code>"PACKAGE"</code>.</p>
</li>
<li>
<p><code>isCatalogAtStart()</code> returns <code>true</code>.</p>
</li>
<li>
<p><code>getMaxCatalogNameLength()</code> returns 31 or 63 depending on the max identifier length of the database.</p>
</li>
<li>
<p><code>supportsCatalogsInDataManipulation()</code> returns <code>true</code> (i.e. access selectable stored procedures and functions from packages).</p>
</li>
<li>
<p><code>supportsCatalogsInProcedureCalls()</code> returns <code>true</code>.</p>
</li>
<li>
<p>The other <code>supportsCatalogsIn<em>type</em>()</code> methods continue to return <code>false</code>.</p>
</li>
<li>
<p>Other metadata methods with a <code>catalog</code> parameter continue to ignore it, just like they do when <code>useCatalogAsPackage</code> is disabled.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>useCatalogAsPackage</code> connection property does not result in any other behaviour.</p>
</div>
<div class="paragraph">
<p>Keep in mind, that this is non-standard behaviour, and standard JDBC tools or libraries may not work correctly when this property is enabled.
This feature may be discontinued and removed in the future if Jaybird needs to implement &#8220;real&#8221; catalogs (e.g. because Firebird started supporting catalogs).</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2023-09-use-catalog-as-package.adoc" target="_blank" rel="noopener">jdp-2023-08: Use Catalog as Package</a></p>
</div>
</div>
<div class="sect2">
<h3 id="ref-client-info"><a class="anchor" href="#ref-client-info"></a>9.11. Client info properties</h3>
<div class="paragraph">
<p>Client info properties allow you to set properties on a connection for informational purposes, or as the JDBC API documentation says &#8220;<em>used for accounting, diagnostics and debugging purposes only</em>&#8221;&#8203;<sup class="footnote">[<a id="_footnoteref_24" class="footnote" href="#_footnotedef_24" title="View footnote.">24</a>]</sup>.</p>
</div>
<div class="sect3">
<h4 id="ref-client-info-jb5"><a class="anchor" href="#ref-client-info-jb5"></a>9.11.1. Support in Jaybird 5 and earlier</h4>
<div class="paragraph">
<p>Support for client info properties was introduced in Jaybird 2.2, storing properties in the <code>USER_SESSION</code> context of <a href="https://firebirdsql.org/file/documentation/chunk/en/refdocs/fblangref50/fblangref50-functions.html#fblangref50-functions-workcontext"><code>RDB$GET/SET_CONTEXT</code></a>.
Support is quite limited, allowing you to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set properties individually or collectively using a <code>Properties</code> object (<code>Connection#setClientInfo(String,String)</code>, <code>Connection#setClientInfo(Properties)</code>)</p>
</li>
<li>
<p>Clear properties individually (setting them to <code>null</code>) (<code>Connection#setClientInfo(String,String)</code></p>
</li>
<li>
<p>Get individual properties (<code>Connection#getClientInfo(String)</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Properties are always stored in <code>USER_SESSION</code>.
Properties are retrieved from <code>USER_TRANSACTION</code>, falling back to <code>USER_SESSION</code> if the property was not present in <code>USER_TRANSACTION</code>.</p>
</div>
<div class="paragraph">
<p>Absent is support to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Get properties collectively (<code>Connection#getClientInfo()</code> always returns an empty <code>Properties</code> object)</p>
</li>
<li>
<p>Collectively clear properties by not including them in the <code>Properties</code> object passed to <code>Connection#setClientInfo(Properties)</code></p>
</li>
<li>
<p>retrieving supported client property names from <code>DatabaseMetaData#getClientInfoProperties()</code> (always returns an empty result set)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="ref-client-info-jb6"><a class="anchor" href="#ref-client-info-jb6"></a>9.11.2. Support in Jaybird 6 and later</h4>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>In Jaybird 6, the client info properties support was rewritten, improving and extending support of this feature.</p>
</div>
<div class="paragraph">
<p>The name of a client info property is classified in two types:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>without context;
<em>get</em>/<em>set</em> in <code>USER_SESSION</code> context of <code>RDB$GET/SET_CONTEXT</code></p>
</li>
<li>
<p>with context, when the name ends in <code>@USER_SESSION</code>, <code>@USER_TRANSACTION</code> or <code>@SYSTEM</code>;
<em>get</em>/<em>set</em> <em>without</em> that suffix in the specified context.
Properties with multiple contexts (e.g. <code>property@SYSTEM@USER_SESSION</code>) are not allowed to prevent ambiguity.
Everything else is a property without context.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A property named <code>&lt;name&gt;@USER_SESSION</code> is handled identical to <code>&lt;name&gt;</code>.
The &#8220;without context&#8221; name is preferred and recommended for <code>USER_SESSION</code> properties, and <code>Connection.getClientInfo()</code> will use the &#8220;without context&#8221; name as the key for <code>USER_SESSION</code> properties.</p>
</div>
<div class="paragraph">
<p>A property named <code>&lt;name&gt;@USER_TRANSACTION</code> is <em>set</em> and <em>get</em> as <code>&lt;name&gt;</code> in context <code>USER_TRANSACTION</code>.
When a connection is in auto-commit mode, attempts to <em>set</em> or <em>get</em> <code>USER_TRANSACTION</code> properties are ignored (nothing is stored, and <code>null</code> is returned without accessing the database).</p>
</div>
<div class="paragraph">
<p>A property named <code>&lt;name&gt;@SYSTEM</code> is retrieved as <code>&lt;name&gt;</code> in the context <code>SYSTEM</code>.
Properties in the <code>SYSTEM</code> context are read-only, so they cannot be <em>set</em>.
For <code>Connection.setClientInfo(String, String)</code>, attempts to <em>set</em> a <code>SYSTEM</code> property result in a <code>SQLClientInfoException</code>, for <code>Connection.setClientInfo(Properties)</code>, <code>SYSTEM</code> properties are silently ignored.</p>
</div>
<div class="paragraph">
<p>Attempts to retrieve non-existent properties, even from <code>SYSTEM</code> will return <code>null</code> and will not result in an exception.</p>
</div>
<div class="paragraph">
<p>A connection registers properties known to that specific connection.
By default, only the JDBC-specified properties <code>ApplicationName</code>, <code>ClientUser</code> and <code>ClientHostName</code> (see also <a href="#client-info-jdbc-props">JDBC-specified properties</a> below) are known.
A successful <em>get</em> or <em>set</em> of a property will register that property as a known property for the current connection only.</p>
</div>
<div class="paragraph">
<p>The method <code>Connection.getClientInfo()</code> will retrieve only known properties (the default properties and those registered for the current connection).
It will not attempt to query or identify other variables registered in any context.</p>
</div>
<div class="paragraph">
<p>The method <code>Connection.setClientInfo(Properties)</code> clears (sets to <code>NULL</code>) known properties in <code>USER_SESSION</code> and&#8201;&#8212;&#8201;if not in auto-commit&#8201;&#8212;&#8201;<code>USER_TRANSACTION</code> if they are not included in the <code>Properties</code> object.</p>
</div>
<div class="paragraph">
<p><code>DatabaseMetaData.getClientInfoProperties()</code> reports the JDBC-specified properties only;
it will not report the additional properties registered for the current connection.</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2023-11-new-design-client-info-properties.adoc" target="_blank" rel="noopener">jdp-2023-11: New design client info properties</a></p>
</div>
<div class="sect4">
<h5 id="client-info-jdbc-props"><a class="anchor" href="#client-info-jdbc-props"></a>JDBC-specified properties</h5>
<div class="paragraph">
<p>The JDBC-specified properties are:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ApplicationName</code></dt>
<dd>
<p>The name of the application currently utilizing the connection</p>
</dd>
<dt class="hdlist1"><code>ClientUser</code></dt>
<dd>
<p>The name of the user that the application using the connection is performing work for.
This may not be the same as the user name that was used in establishing the connection.</p>
</dd>
<dt class="hdlist1"><code>ClientHostname</code></dt>
<dd>
<p>The hostname of the computer the application using the connection is running on.</p>
</dd>
</dl>
</div>
</blockquote>
<div class="attribution">
<cite>JDBC API documentation of java.sql.Connection</cite>
</div>
</div>
<div class="paragraph">
<p>All JDBC-specified properties are <em>get</em> and <em>set</em> in <code>USER_SESSION</code>.
On <em>get</em> of <code>ApplicationName</code>, if this property is not currently set in <code>USER_SESSION</code>, it falls back to <em>get</em> the value from <code>CLIENT_PROCESS@SYSTEM</code>.
The <code>CLIENT_PROCESS@SYSTEM</code> value can be specified using the connection property <code>processName</code> or system property <code>org.firebirdsql.jdbc.processName</code>.
The <code>ClientUser</code> and <code>ClientHostname</code> properties are considered application-specific and have no default value or fallback.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="client-info-pool"><a class="anchor" href="#client-info-pool"></a>9.11.3. Connection pools and client info properties</h4>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>If you use a connection pool populated from <code>org.firebirdsql.ds.FBConnectionPoolDataSource</code> or <code>org.firebirdsql.ds.FBXADataSource</code>, the known properties are reset each time the connection is handed out by the pool.
This assumes the pool uses <code>getConnection()</code> from <code>PooledConnection</code>/<code>XAConnection</code> each time it hands out the connection.
This reset only removes the property name from the list of known properties of the connection, it does not clear the property values from <code>USER_SESSION</code>.
If properties contain <em>sensitive</em> values, you will need to explicitly clear them.</p>
</div>
<div class="paragraph">
<p>This reset is not applied when using a connection pool which is populated by different means (e.g. from <code>DriverManager</code> or from a normal <code>javax.sql.DataSource</code> like <code>org.firebirdsql.ds.FBSimpleDataSource</code>).
If your connection pool implementation supports custom code to reset a connection, and you need known properties to reset when a connection is reused, make it call <code>FirebirdConnection.resetKnownClientInfoProperties()</code>, or call it yourself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">if (connection.isWrapperFor(FirebirdConnection.class)) {
    connection.unwrap(FirebirdConnection.class)
            .resetKnownClientInfoProperties();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the future, Jaybird may be changed to also perform this reset in <code>Connection.beginRequest()</code> and/or <code>Connection.endRequest()</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-create-database-if-not-exist"><a class="anchor" href="#ref-create-database-if-not-exist"></a>9.12. Create database if it does not exist</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>The Boolean connection property <code>createDatabaseIfNotExist</code> instructs Jaybird to attempt to create the database if it does not exist yet.
This property can be used in the JDBC URL, in the <code>Properties</code> object passed to <code>DriverManager</code>, and can be set on data sources.</p>
</div>
<div class="paragraph">
<p>Jaybird also allows you to create databases using <code>org.firebirdsql.management.FBManager</code>, but this is not always accessible, for example in tools or libraries that only expose or use the JDBC API.
This property provides an alternative to create databases in those cases.</p>
</div>
<div class="paragraph">
<p>Jaybird also allows you to set or override connection properties specifically for creating the database by suffixing the property name with <code>@create</code> (case-sensitive).
This can be used to set configuration properties that are only relevant for creating the database, or&#8201;&#8212;&#8201;for example&#8201;&#8212;&#8201;to use a different user or role for creating the database than used for normal connections.</p>
</div>
<div class="paragraph">
<p>As an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>String jdbcUrl = "jdbc:firebird://localhost/exampledb" +
    "?createDatabaseIfNotExist=true&amp;" +
    "user@create=sysdba&amp;password@create=masterkey";
try (Connection connection = DriverManager.getConnection(
    jdbcUrl, "normaluser", "password")) {
  // ...
}</pre>
</div>
</div>
<div class="paragraph">
<p>If the database already exists, the connection will be made with user <code>normaluser</code>, but if the database does not exist, the database will be created with user <code>sysdba</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The errors Firebird returns do not make it possible to determine definitively if the database does not exist, or if there is another reason that the connection failed.
Jaybird applies some simple rules to exclude some classes of errors, and not attempt to create a database in those cases.</p>
</div>
<div class="paragraph">
<p>If you find cases where you think Jaybird should not (or on the contrary should) attempt to create a database, please report them on <a href="https://github.com/FirebirdSQL/jaybird/issues" class="bare" target="_blank" rel="noopener">https://github.com/FirebirdSQL/jaybird/issues</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information, see also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-02-create-database-through-jdbc-url.adoc" target="_blank" rel="noopener">jdp-2024-02: Create database through JDBC URL</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-report-sql-warnings"><a class="anchor" href="#ref-report-sql-warnings"></a>9.13. Reporting of <code>SQLWarning</code>s</h3>
<div class="paragraph">
<p>The JDBC Specification requires that a JDBC driver reports a <code>SQLWarning</code> when it deviates from certain JDBC-specified behaviour (for example, changing a requested result set type), or when the server reports a warning.</p>
</div>
<div class="paragraph">
<p>These warnings are reported on the <code>Connection</code>, <code>Statement</code>, or <code>ResultSet</code><sup class="footnote">[<a id="_footnoteref_25" class="footnote" href="#_footnotedef_25" title="View footnote.">25</a>]</sup>, and can be retrieved with <code>getWarnings()</code>.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> The connection property <code>reportSQLWarnings</code> can be used to disable the reporting of <code>SQLWarning</code>s.</p>
</div>
<div class="paragraph">
<p>This connection property supports the following values (case-insensitive):</p>
</div>
<div class="hdlist compact">
<table>
<tr>
<td class="hdlist1">
<code>ALL</code>
</td>
<td class="hdlist2">
<p>(default) report all <code>SQLWarning</code>s</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>NONE</code>
</td>
<td class="hdlist2">
<p>Do not report any <code>SQLWarning</code>s</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Invalid values on the connection property will be rejected.</p>
</div>
<div class="paragraph">
<p>The default value can be overridden with the system property <a href="#systemproperties-default-report-sql-warnings"><code>org.firebirdsql.jdbc.defaultReportSQLWarnings</code></a>.
It supports the same values as connection property <code>reportSQLWarnings</code>.
Invalid values of the system property are ignored.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-socket-factory"><a class="anchor" href="#ref-socket-factory"></a>9.14. Custom socket factory</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>A custom socket factory can be specified to customize the creation of the <code>java.net.Socket</code> instance of a pure Java database or service connection.</p>
</div>
<div class="paragraph">
<p>The connection property <code>socketFactory</code> accepts the class name of an implementation of <code>javax.net.SocketFactory</code>.
This socket factory is created anew for each connection.
If <code>socketFactory</code> is not specified, Jaybird will use <code>SocketFactory.getDefault()</code> as its factory.</p>
</div>
<div class="paragraph">
<p>The <code>SocketFactory</code> implementation must adhere to the following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The class must have a public constructor accepting a <code>java.util.Properties</code> object, or a public no-arg constructor.</p>
</li>
<li>
<p>The implementation of <code>SocketFactory#createSocket()</code> must return an unconnected socket;
the other <code>createSocket</code> methods are not called by Jaybird.</p>
<div class="paragraph">
<p>If you don&#8217;t want to implement the other <code>createSocket</code> methods, we recommend throwing <code>java.lang.UnsupportedOperationException</code> with a clear message from those methods.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is possible to pass custom connection properties to the socket factory if it has a public single-arg constructor accepting a <code>Properties</code> object.
Jaybird will instantiate the socket factory with a <code>Properties</code> object containing <em>only</em> the connection properties with the suffix <code>@socketFactory</code> and non-<code>null</code> values;
non-string values are converted to string.
In the future, we may also&#8201;&#8212;&#8201;selectively&#8201;&#8212;&#8201;pass other connection properties, but for now we only expose those properties that are explicitly set for the socket factory.</p>
</div>
<div class="paragraph">
<p>For example, say we have some custom socket factory called <code>org.example.CustomProxySocketFactory</code> with a <code>CustomProxySocketFactory(Properties)</code> constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">var props = new Properties()
props.setProperty("user", "sysdba");
props.setProperty("password", "masterkey");
props.setProperty("socketFactory", "org.example.CustomProxySocketFactory");
props.setProperty("proxyHost@socketFactory", "localhost");
props.setProperty("proxyPort@socketFactory", "1234");
props.setProperty("proxyUser@socketFactory", "proxy-user");
props.setProperty("proxyPassword@socketFactory", "proxy-password");

try (var connection = DriverManager.getConnection(
        "jdbc:firebird://remoteserver.example.org/db", props)) {
    // use connection
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create the specified socket factory, passing a <code>Properties</code> object containing <strong>only</strong> the four custom properties ending in <code>@socketFactory</code>.
The other properties&#8201;&#8212;&#8201;here <code>user</code>, <code>password</code> and <code>socketFactory</code>&#8201;&#8212;&#8201;are <strong>not</strong> passed to the socket factory.</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-09-custom-socket-factory-for-pure-java-connections.adoc">jdp-2024-09: Custom socket factory for pure Java connections</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ref-statement"><a class="anchor" href="#ref-statement"></a>10. Statement reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ref-async-fetch"><a class="anchor" href="#ref-async-fetch"></a>10.1. Async fetch</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>For pure Java connections, non-holdable forward-only result sets perform asynchronous fetches by default.
Asynchronous fetches are implemented for protocol implementation version 11 and higher (i.e. Firebird 2.1 or higher), but are formally only supported for protocol version 13 and higher (i.e. Firebird 3.0 or higher).</p>
</div>
<div class="paragraph">
<p>In normal usage of a result set, the first fetch will be a normal synchronous fetch.
If certain conditions are met, subsequent fetches will be performed asynchronously.</p>
</div>
<div class="paragraph">
<p>The conditions for using asynchronous fetch are considered an implementation detail and may change in point releases.
In Jaybird 6.0.0, the conditions to enable asynchronous fetching are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The result set has type <code>FORWARD_ONLY</code>.</p>
</li>
<li>
<p>The result set does not have a cursor name set.</p>
</li>
<li>
<p>Any synchronous fetch on the statement cursor retrieved at least 15 rows.
Be aware that the server may return fewer rows than the configured fetch size (default is 400), depending on Firebird version, row size and other factors.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When the asynchronous fetch is triggered is also an implementation detail and may change in point releases.
In Jaybird 6.0.0, the conditions to perform an asynchronous fetch are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Size of the row buffer is equal to the &#8220;low-water mark&#8221;.</p>
<div class="paragraph">
<p>This &#8220;low-water mark&#8221; is calculated as ~33% of the maximum number of rows returned by previous fetches, with a minimum of 10 rows.</p>
</div>
<div class="paragraph">
<p>As a consequence of this condition, reducing the fetch size equal to or less than the &#8220;low-water mark&#8221; may cause asynchronous fetches to stop being triggered, as the buffer size may remain smaller than this &#8220;low-water mark&#8221; (this effect may be reduced if there is other activity on the connection after the asynchronous fetch was performed).
In that case, a synchronous fetch is triggered when the buffer is empty.</p>
</div>
</li>
<li>
<p>Fetch size at time of async fetch is larger than 1.
This may be the configured fetch size, or the fetch size derived taking into account the configured maximum row count.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Native connections do not support this type of asynchronous fetching, but <code>fbclient</code> itself provides a different form of internal asynchronous fetching for native connections.</p>
</div>
<div class="paragraph">
<p>Asynchronous fetching&#8201;&#8212;&#8201;for pure Java&#8201;&#8212;&#8201;can be disabled with the Boolean connection property <code>asyncFetch</code>, by setting it to <code>false</code>.
The system property <a href="#systemproperties-default-async-fetch"><code>org.firebirdsql.jdbc.defaultAsyncFetch</code></a> can be used to disable it globally;
this system property is checked dynamically when the connection configuration is created.
These properties are primarily intended for troubleshooting or workarounds if it turns out this feature has problems;
they may be removed in a future Jaybird version once this feature has proven itself.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-generatedkeys"><a class="anchor" href="#ref-generatedkeys"></a>10.2. Generated keys retrieval</h3>
<div class="paragraph">
<p>Jaybird provides support for the <code>getGeneratedKeys()</code> JDBC feature for <code>Statement</code> and <code>PreparedStatement</code>.
This feature can be used to retrieve the generated ids (and other columns) from DML statements.</p>
</div>
<div class="paragraph">
<p>This feature is available for <code>Connection.prepareStatement</code>, and <code>Statement.execute</code>, <code>Statement.executeUpdate</code> and <code>Statement.executeLargeUpdate</code>.</p>
</div>
<div class="paragraph">
<p>There are four distinct use-cases:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Methods accepting an <code>int</code> parameter with values of <code>Statement.NO_GENERATED_KEYS</code> and <code>Statement.RETURN_GENERATED_KEYS</code>, see <a href="#ref-generatedkeys-RETURN-GENERATED-KEYS">Basic generated keys retrieval</a>,</p>
</li>
<li>
<p>Methods accepting an <code>int[]</code> parameter with column indexes, see <a href="#ref-generatedkeys-column-index">Generated keys by column index</a>.</p>
</li>
<li>
<p>Methods accepting a <code>String[]</code> parameter with column names, see <a href="#ref-generatedkeys-column-name">Generated keys by column name</a>.</p>
</li>
<li>
<p>Providing a query already containing a <code>RETURNING</code> clause to any of these methods.</p>
<div class="paragraph">
<p>In this case all the previous cases are ignored and the query is executed as is.
It is possible to retrieve the result set using <code>getGeneratedKeys()</code>.</p>
</div>
</li>
</ol>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">ANTLR Runtime required in Jaybird 4.0.7 and earlier</div>
<div class="paragraph">
<p>For Jaybird 4.0.7 and earlier, the generated keys functionality will only be available if the ANTLR runtime classes are on the classpath.
Except for calling methods with <code>NO_GENERATED_KEYS</code>, absence of the ANTLR runtime will throw <code>FBDriverNotCapableException</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The required ANTLR runtime version depends on the Jaybird version, check the release notes of your version for details.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since Jaybird 4.0.8, Jaybird uses a custom parser and no longer requires ANTLR for the generated keys feature.
If you previously relied on absence of ANTLR to disable generated keys support, the generated keys feature can be disabled by setting <a href="#ref-generatedkeys-config">connection property <code>generatedKeysEnabled</code></a> to <code>disabled</code>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>This functionality is available for <code>INSERT</code>, <code>UPDATE</code>, <code>UPDATE OR INSERT</code>, <code>DELETE</code>, and&#8201;&#8212;&#8201;<em class="since">Firebird 3.0</em>&#8201;&#8212;&#8201;<code>MERGE</code>.</p>
</div>
<div class="paragraph">
<p>Generated keys retrieval modifies the statement to add a <code>RETURNING</code>-clause.
Firebird 4.0 and earlier only support <code>RETURNING</code> for DML operations that affect a single row.
Attempting to use generated keys retrieval with a statement that affects multiple rows will yield the error <em>"multiple rows in singleton select"</em>.</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 5</em> <em class="since">Firebird 5.0</em> Support for multi-row <code>RETURNING</code> is introduced in Firebird 5.0.
Support for multi-row <code>RETURNING</code> is available since Jaybird 5.</p>
</div>
<div class="paragraph">
<p>The examples in this section use the following (Firebird 3.0) table:</p>
</div>
<div class="listingblock">
<div class="title">Example person table</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="sql">create table PERSON (
  ID integer generated by default as identity constraint pk_employee primary key,
  FIRSTNAME varchar(20),
  LASTNAME varchar(20),
  BIRTHDATE date,
  "age" integer generated always as (datediff(year, birthdate, current_date))
)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-generatedkeys-RETURN-GENERATED-KEYS"><a class="anchor" href="#ref-generatedkeys-RETURN-GENERATED-KEYS"></a>10.2.1. Basic generated keys retrieval</h4>
<div class="paragraph">
<p>This form of generated keys execution involves the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Connection.prepareStatement(String sql, int autoGeneratedKeys)</code></p>
</li>
<li>
<p><code>Statement.execute(String sql, int autoGeneratedKeys)</code></p>
</li>
<li>
<p><code>Statement.executeUpdate(String sql, int autoGeneratedKeys)</code></p>
</li>
<li>
<p><code>Statement.executeLargeUpdate(String sql, int autoGeneratedKeys)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When <code>NO_GENERATED_KEYS</code> is passed, the query will be executed as a normal query.</p>
</div>
<div class="paragraph">
<p>When <code>RETURN_GENERATED_KEYS</code> is passed, the driver will return <em>all</em> columns of the table as generated keys.
The columns are ordered by ordinal position (as reported in the JDBC metadata of the table).
It is advisable to retrieve the values from the <code>getGeneratedKeys()</code> result set by column name.</p>
</div>
<div class="paragraph">
<p>We opted to include all columns as it is next to impossible to decide which columns are populated by a trigger or otherwise.
Only returning the primary key will be too restrictive (consider computed columns, default values, etc).</p>
</div>
<div class="paragraph">
<p>Passing <code>NO_GENERATED_KEYS</code> hardcoded should normally not be done.
It would be better to use the equivalent <code>prepareStatement</code> or <code>executeXXX</code> method that only accepts a <code>String</code>.
Use of the value <code>NO_GENERATED_KEYS</code> only makes sense in code that dynamically decides between <code>NO_GENERATED_KEYS</code> and <code>RETURN_GENERATED_KEYS</code>.</p>
</div>
<div class="sect4">
<h5 id="ref-generatedkeys-examples-RETURN-GENERATED-KEYS"><a class="anchor" href="#ref-generatedkeys-examples-RETURN-GENERATED-KEYS"></a>Example using RETURN_GENERATED_KEYS</h5>
<div class="paragraph">
<p>The following will insert a person using a <code>Statement</code> and retrieve the generated id using <code>Statement.RETURN_GENERATED_KEYS</code>:</p>
</div>
<div class="listingblock">
<div class="title">Statement generated keys retrieval</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Connection connection = ...;
try (Statement statement = connection.createStatement()) {
  statement.executeUpdate(
      "insert into person(firstname, lastname, birthdate) "
          + "values ('Mark', 'Rotteveel', date'1979-01-12')",
      Statement.RETURN_GENERATED_KEYS);                 <i class="conum" data-value="1"></i><b>(1)</b>

  try (ResultSet keys = statement.getGeneratedKeys()) { <i class="conum" data-value="2"></i><b>(2)</b>
    if (keys.next()) {                                  <i class="conum" data-value="3"></i><b>(3)</b>
      int generatedId = keys.getInt("id");              <i class="conum" data-value="4"></i><b>(4)</b>
      int age = keys.getInt("age");                     <i class="conum" data-value="5"></i><b>(5)</b>
      String firstName = keys.getString("firstname");   <i class="conum" data-value="6"></i><b>(6)</b>

      System.out.printf("Inserted: %s, Id: %d, Age: %d%n",
          firstName, generatedId, age);
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use of <code>Statement.RETURN_GENERATED_KEYS</code> instructs Jaybird to parse the statement and add a <code>RETURNING</code> clause with all columns of the <code>PERSON</code> table</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Get the generated keys result set from the statement</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Just like a normal result set, it is positioned before the first row, so you need to call <code>next()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The generated value of the <code>ID</code> column</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The calculated value of the <code>AGE</code> column</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The generated keys result set also contains the normal columns like <code>FIRSTNAME</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The equivalent using <code>PreparedStatement</code> is:</p>
</div>
<div class="listingblock">
<div class="title">Prepared statement generated keys retrieval</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (PreparedStatement statement = connection.prepareStatement(
         "insert into person(firstname, lastname, birthdate) values (?, ?, ?)",
         Statement.RETURN_GENERATED_KEYS)) {            <i class="conum" data-value="1"></i><b>(1)</b>
  statement.setString(1, "Mark");
  statement.setString(2, "Rotteveel");
  statement.setObject(3, LocalDate.of(1979, 1, 12));

  statement.executeUpdate();
  try (ResultSet keys = statement.getGeneratedKeys()) { <i class="conum" data-value="2"></i><b>(2)</b>
    if (keys.next()) {                                  <i class="conum" data-value="3"></i><b>(3)</b>
      int generatedId = keys.getInt("id");              <i class="conum" data-value="4"></i><b>(4)</b>
      int age = keys.getInt("age");                     <i class="conum" data-value="5"></i><b>(5)</b>
      String firstName = keys.getString("firstname");

      System.out.printf("Inserted: %s, Id: %d, Age: %d%n",
          firstName, generatedId, age);
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Besides use of parameters, the only real difference is that use of <code>Statement.RETURN_GENERATED_KEYS</code> moved from execution to prepare.
This makes sense if you consider that once prepared, the statement can be reused.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-generatedkeys-column-index"><a class="anchor" href="#ref-generatedkeys-column-index"></a>10.2.2. Generated keys by column index</h4>
<div class="paragraph">
<p>This form of generated keys execution involves the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Connection.prepareStatement(String sql, int[] columnIndexes)</code></p>
</li>
<li>
<p><code>Statement.execute(String sql, int[] columnIndexes)</code></p>
</li>
<li>
<p><code>Statement.executeUpdate(String sql, int[] columnIndexes)</code></p>
</li>
<li>
<p><code>Statement.executeLargeUpdate(String sql, int[] columnIndexes)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The values in the <code>int[]</code> parameter are the ordinal positions of the columns as specified in the (JDBC) metadata of the table.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In Jaybird 3 and earlier, a null or empty array was silently ignored and the statement was executed normally (not producing generated keys).
In Jaybird 4, this behaviour has changed and instead will throw an exception with message &#8220;<em>Generated keys array columnIndexes was empty or null. A non-empty array is required.</em>&#8221;</p>
</div>
<div class="paragraph">
<p>In Jaybird 3 and earlier, invalid ordinal positions are ignored and silently dropped: passing <code>new int[] { 1, 5, 6 }</code> will work, even if there is no sixth column.
Since Jaybird 4, this behavior has changed and instead will throw an exception with message &#8220;<em>Generated keys column position &lt;position&gt; does not exist for table &lt;tablename&gt;. Check DatabaseMetaData.getColumns (column ORDINAL_POSITION) for valid values.</em>&#8221;</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="ref-generatedkeys-examples-column-index"><a class="anchor" href="#ref-generatedkeys-examples-column-index"></a>Example using column indexes</h5>
<div class="paragraph">
<p>Retrieval by column index uses the ordinal position as reported in <code>DatabaseMetaData.getColumns</code>, column <code>ORDINAL_POSITION</code>.
In practice this is the value of <code>RDB$RELATION_FIELDS.RDB$FIELD_POSITION + 1</code> of that column.</p>
</div>
<div class="paragraph">
<p>In our example, the columns are</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>ID</code></p>
</li>
<li>
<p><code>FIRSTNAME</code></p>
</li>
<li>
<p><code>LASTNAME</code></p>
</li>
<li>
<p><code>BIRTHDATE</code></p>
</li>
<li>
<p><code>age</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Prepared statement generated keys retrieval by index</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (PreparedStatement statement = connection.prepareStatement(
         "insert into person(firstname, lastname, birthdate) values (?, ?, ?)",
         new int[] { 1, 5 })) {                         <i class="conum" data-value="1"></i><b>(1)</b>
  statement.setString(1, "Mark");
  statement.setString(2, "Rotteveel");
  statement.setObject(3, LocalDate.of(1979, 1, 12));

  statement.executeUpdate();
  try (ResultSet keys = statement.getGeneratedKeys()) {
    if (keys.next()) {
      int generatedId = keys.getInt("id");              <i class="conum" data-value="2"></i><b>(2)</b>
      int age = keys.getInt(2);                         <i class="conum" data-value="3"></i><b>(3)</b>

      System.out.printf("Id: %d, Age: %d%n",
          generatedId, age);
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Instead of <code>Statement.RETURN_GENERATED_KEYS</code>, the column indices are passed in an array, in this case <code>1</code> for <code>ID</code> and <code>5</code> for <code>age</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Retrieval of the first column, <code>ID</code>, by name</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Retrieval of the second column, <code>age</code>, by result set position.
Notice that the index used for retrieval does not match the column position in the table (5) passed in the prepare.
As this is the second column in the result set, it is retrieved from the result set by <code>2</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In Jaybird 3 and earlier, the array of indices is sorted in ascending order before use: passing <code>new int[] { 4, 1, 3 }</code> will yield columns in order <code>ID</code>, <code>LASTNAME</code>, <code>BIRTHDATE</code>.
Since Jaybird 4, this sort is no longer applied, so columns will be in the order specified by the array: <code>BIRTHDATE</code>, <code>ID</code>, <code>LASTNAME</code>.
To avoid issues, we recommend specifying the columns in ascending order, or always retrieve them by name.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-generatedkeys-column-name"><a class="anchor" href="#ref-generatedkeys-column-name"></a>10.2.3. Generated keys by column name</h4>
<div class="paragraph">
<p>This form of generated keys execution involves the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Connection.prepareStatement(String sql, String[] columnNames)</code></p>
</li>
<li>
<p><code>Statement.execute(String sql, String[] columnNames)</code></p>
</li>
<li>
<p><code>Statement.executeUpdate(String sql, String[] columnNames)</code></p>
</li>
<li>
<p><code>Statement.executeLargeUpdate(String sql, String[] columnNames)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The values in the <code>String[]</code> are the column names to be returned.
The column names provided are processed as is and are not checked for validity or the need of quoting.
Providing non-existent or incorrectly (un)quoted columns will result in an exception when the statement is processed by Firebird (be aware: the JDBC specification is not entirely clear if this is valid behavior, so this might change in the future).
This method is the fastest as it does not retrieve metadata from the server.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In Jaybird 3 and earlier, a null or empty array was silently ignored and the statement was executed normally (not producing generated keys).
Since Jaybird 4, this behaviour has changed and instead will throw an exception with message &#8220;<em>Generated keys array columnNames was empty or null. A non-empty array is required.</em>&#8221;</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="ref-generatedkeys-examples-column-name"><a class="anchor" href="#ref-generatedkeys-examples-column-name"></a>Example using column names</h5>
<div class="listingblock">
<div class="title">Prepared statement generated keys retrieval by name</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (PreparedStatement statement = connection.prepareStatement(
         "insert into person(firstname, lastname, birthdate) values (?, ?, ?)",
         new String[] { "id", "\"age\"" })) {           <i class="conum" data-value="1"></i><b>(1)</b>
  statement.setString(1, "Mark");
  statement.setString(2, "Rotteveel");
  statement.setObject(3, LocalDate.of(1979, 1, 12));

  statement.executeUpdate();
  try (ResultSet keys = statement.getGeneratedKeys()) {
    if (keys.next()) {
      int generatedId = keys.getInt("id");
      int age = keys.getInt("age");

      System.out.printf("Id: %d, Age: %d%n",
          generatedId, age);
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The column names are passed as is, this means that correct quoting is required for case-sensitive columns (and other names that require quoting).</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The requirement to pass column names correctly quoted is not specified in the JDBC standard.
It may change in future Jaybird versions to conform with column names as returned from <code>DatabaseMetaData.getColumn</code>.
That is, unquoted exactly as stored in <code>RDB$RELATION_FIELDS.RDB$FIELD_NAME</code>.
Quoting the column names would then be done by Jaybird.</p>
</div>
<div class="paragraph">
<p>When this changes, a connection property for backwards compatibility will be provided.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="ref-generatedkeys-config"><a class="anchor" href="#ref-generatedkeys-config"></a>10.2.4. Configuring generated keys support</h4>
<div class="paragraph">
<p>The connection property <code>generatedKeysEnabled</code> (alias <code>generated_keys_enabled</code>) allows the behaviour of generated keys support to be configured.
This property is also available on data sources.</p>
</div>
<div class="paragraph">
<p>This property supports the following values (case-insensitive):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>default</code>: default behaviour to enable generated keys for statement types with <code>RETURNING</code> clause in the connected Firebird version.
Absence of this property, <code>null</code> or empty string implies <code>default</code>.</p>
</li>
<li>
<p><code>disabled</code>: disable support.
Attempts to use generated keys methods other than using <code>Statement.NO_GENERATED_KEYS</code> will throw a <code>SQLFeatureNotSupportedException</code>.</p>
</li>
<li>
<p><code>ignored</code>: ignore generated keys support.
Attempts to use generated keys methods will not attempt to detect generated keys support and execute as if the statement generates no keys.
The <code>Statement.getGeneratedKeys()</code> method will always return an empty result set.
This behaviour is equivalent to using the non-generated keys methods.</p>
</li>
<li>
<p>A comma-separated list of statement types to enable.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For <code>disabled</code> and <code>ignored</code>, <code>DatabaseMetaData.supportsGetGeneratedKeys</code> will report <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Because of the behaviour specified in the next section, typos in property values will behave as <code>ignored</code> (e.g. using <code>generatedKeysEnabled=disable</code> instead of <code>disabled</code> will behave as <code>ignored</code>).</p>
</div>
<div class="sect4">
<h5 id="ref-generatedkeys-config-stmt-types"><a class="anchor" href="#ref-generatedkeys-config-stmt-types"></a>Selectively enable statement types</h5>
<div class="paragraph">
<p>This last option allows you to selectively enable support for generated keys.
For example, <code>generatedKeysEnabled=insert</code> will only enable it for <code>insert</code> while ignoring it for all other statement types.
Statement types that are not enabled will behave as if they generate no keys and will execute normally.
For these statement types, <code>Statement.getGeneratedKeys()</code> will return an empty result set.</p>
</div>
<div class="paragraph">
<p>Possible statement type values (case-insensitive) are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>insert</code></p>
</li>
<li>
<p><code>update</code></p>
</li>
<li>
<p><code>delete</code></p>
</li>
<li>
<p><code>update_or_insert</code></p>
</li>
<li>
<p><code>merge</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Invalid values will be ignored.
If none of he specified statement types are supported by Firebird, it will behave as <code>ignored</code>.<sup class="footnote">[<a id="_footnoteref_26" class="footnote" href="#_footnotedef_26" title="View footnote.">26</a>]</sup></p>
</div>
<div class="paragraph">
<p>Some examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jdbc:firebird://localhost/testdb?generatedKeysEnabled=insert</code> will only enable insert support</p>
</li>
<li>
<p><code>jdbc:firebird://localhost/testdb?generatedKeysEnabled=merge</code> will only enable merge support.
But only on Firebird 3.0 and higher, for Firebird 2.5 this will behave as <code>ignored</code> given the lack of <code>RETURNING</code> support for merge.</p>
</li>
<li>
<p><code>jdbc:firebird://localhost/testdb?generatedKeysEnabled=insert,update</code> will only enable insert and update support</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This feature can be used to circumvent issues with frameworks or tools that always use generated keys methods for prepare or execution.
For example with <code>UPDATE</code> statements that touch multiple records and&#8201;&#8212;&#8201;given the Firebird 4.0 and earlier limitations for <code>RETURNING</code>&#8201;&#8212;&#8201;produce the error &#8220;<em>multiple rows in singleton select</em>&#8221;.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-inline-blob"><a class="anchor" href="#ref-inline-blob"></a>10.3. Inline blobs</h3>
<div class="paragraph">
<p><em class="since">Jaybird 5.0.8/6.0.2</em><br>
<em class="since">Firebird 5.0.3</em></p>
</div>
<div class="paragraph">
<p>Inline blobs are a performance optimization for reading blobs as part of the query.</p>
</div>
<div class="paragraph">
<p>When querying a blob column, the row data received from the server contains only the blob id, not the data of the blob.
Without inline blobs, the client will need to retrieve the blob data separately, requiring additional round trips between client and server for each blob.
With inline blobs, small blobs&#8201;&#8212;&#8201;default less than 65535 bytes&#8201;&#8212;&#8201;are sent together with the row data, and the client can then serve the blob from the data it has locally.
Inline blobs can also increase the effectiveness of wire compression&#8201;&#8212;&#8201;if enabled, assuming the blob data compresses well.</p>
</div>
<div class="paragraph">
<p>In short, inline blobs increase throughput when querying small blobs, especially on high latency network connections.</p>
</div>
<div class="paragraph">
<p>This is not entirely free:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fetching rows itself can be slower as more data is sent for a fetch.</p>
</li>
<li>
<p>Caching the inline blobs consumes memory.</p>
<div class="paragraph">
<p>By default, a maximum of 10 MiB per connection is used for this cache.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the maximum blob cache size is reached, received inline blobs will be discarded.
For pure Java connections, an inline blob is removed from the cache on first use, or when the transaction associated with the blob ends.
The native client implementation may have different cache eviction rules.</p>
</div>
<div class="paragraph">
<p>As pure Java connections remove the inline blob from the cache on first use, subsequent attempts to read the same blob&#8201;&#8212;&#8201;by getting a different instance of <code>java.sql.Blob</code> or through multiple calls to the <code>ResultSet.getXXX</code> methods&#8201;&#8212;&#8201;will use a server-side blob.
This can also happen if multiple columns or rows, even in different result sets on the same connection, point to the same blob id in the same transaction.</p>
</div>
<div class="paragraph">
<p>If you execute queries returning blobs, while those blobs are never actually opened, you may fill up the cache and later received inline blobs are then discarded.
Especially in long-running transactions, this may reduce the effectiveness of this feature.</p>
</div>
<div class="paragraph">
<p>Inline blobs are introduced in Firebird 5.0.3 (protocol 19).
For pure Java connections, you need Jaybird 5.0.8 or higher or Jaybird 6.0.2 or higher.
For native connections, you need <em>fbclient</em> 5.0.3 or higher, irrespective of the Jaybird version;
to configure inline blobs for native connections, you will also need Jaybird 5.0.8 or higher or Jaybird 6.0.2 or higher.</p>
</div>
<div class="sect3">
<h4 id="ref-inline-blob-config"><a class="anchor" href="#ref-inline-blob-config"></a>10.3.1. Configuring inline blobs</h4>
<div class="paragraph">
<p>There are two connection properties affecting inline blobs:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>maxInlineBlobSize</code> (aliases: <code>max_inline_blob_size</code>, <code>isc_dpb_max_inline_blob_size</code>)</dt>
<dd>
<p>Maximum size in bytes of the blob (default: <code>65535</code>).<br>
A value of <code>0</code> will disable sending of inline blobs.</p>
<div class="paragraph">
<p>The maximum allowed value is decided by the Firebird server, and is currently <code>65535</code>;
this may change in the future</p>
</div>
<div class="paragraph">
<p>If a blob is smaller than the specified size, the server will send it inline.
The size includes segment lengths, so the actual maximum blob data received is <code><em>N</em> * 2</code> bytes smaller, where <em>N</em> is the number of segments of the actual blob, or at least one segment for stream blobs.</p>
</div>
<div class="paragraph">
<p>The default can be changed with system property <a href="#systemproperties-default-inline-blob"><code>org.firebirdsql.jdbc.defaultMaxInlineBlobSize</code></a>.</p>
</div>
</dd>
<dt class="hdlist1"><code>maxBlobCacheSize</code> (aliases: <code>max_blob_cache_size</code>, <code>isc_dpb_max_blob_cache_size</code>)</dt>
<dd>
<p>Maximum size in bytes&#8201;&#8212;&#8201;per connection&#8201;&#8212;&#8201;of the blob cache (default: <code>10485760</code> or 10 MiB).<br>
A value of <code>0</code> will disable the cache, but does not disable sending of inline blobs.
Set <code>maxInlineBlobSize</code> to <code>0</code> to disable sending of inline blobs.</p>
<div class="paragraph">
<p>For pure Java, only the data size is counted towards the cache size.
For native, the segment lengths also count towards the cache size.</p>
</div>
<div class="paragraph">
<p>The default can be changed with system property <a href="#systemproperties-default-inline-blob"><code>org.firebirdsql.jdbc.defaultMaxBlobCacheSize</code></a>.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Without explicitly setting the connection or system property, native connections will use the default of <em>fbclient</em> (which are currently the same as those of Jaybird).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-callable-ignore-proctype"><a class="anchor" href="#ref-callable-ignore-proctype"></a>10.4. Connection property ignoreProcedureType</h3>
<div class="paragraph">
<p>On Firebird 2.1 and higher, Jaybird will use the procedure type information from the database metadata to decide how to execute <code>CallableStatement</code>.
When a procedure is selectable, Jaybird will automatically transform a call-escape or <code>EXECUTE PROCEDURE</code> statement to a <code>SELECT</code>.</p>
</div>
<div class="paragraph">
<p>In some cases this automatic transformation to use a <code>SELECT</code> leads to problems.
You can explicitly set <code>FirebirdCallableStatement.setSelectableProcedure(false)</code> to fix most of these issues, but this is not always an option.
For example spring-data-jpa&#8217;s <code>@Procedure</code> will not work correctly with selectable procedures, but you can&#8217;t call <code>setSelectableProcedure</code>.</p>
</div>
<div class="paragraph">
<p>To disable this automatic usage of procedure type information, set connection property <code>ignoreProcedureType=true</code>.
When necessary you can use <code>FirebirdCallableStatement.setSelectableProcedure(true)</code> to execute a procedure using <code>SELECT</code>.</p>
</div>
<div class="paragraph">
<p>Be aware though, when <code>EXECUTE PROCEDURE</code> is used with a selectable procedure, it is executed only up to the first <code>SUSPEND</code>, and the rest of the stored procedure is not executed.</p>
</div>
<div class="paragraph">
<p>For Firebird 2.0 and lower this property has no effect, as there the procedure type information is not available.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-scrollable-cursor"><a class="anchor" href="#ref-scrollable-cursor"></a>10.5. Connection property scrollableCursor</h3>
<div class="paragraph">
<p><em class="since">Jaybird 5</em><br>
<em class="since">Firebird 5.0</em></p>
</div>
<div class="paragraph">
<p>On Firebird 5.0 and higher, Jaybird 5 and higher support server-side scrollable cursors..</p>
</div>
<div class="paragraph">
<p>This feature is only available on pure Java connections, and only when explicitly enabled with connection property <code>scrollableCursor</code>.
Support is only available in pure Java, as the bindings for native and embedded use the legacy fbclient API, and scrollable cursors are not exposed in the legacy fbclient API.</p>
</div>
<div class="paragraph">
<p>The connection property <code>scrollableCursor</code> has the following values (case-insensitive):</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>EMULATED</code></dt>
<dd>
<p>(default) Use client-side cached result set;
this is the same behaviour as previous Jaybird versions used</p>
</dd>
<dt class="hdlist1"><code>SERVER</code></dt>
<dd>
<p>Use server-side scrollable cursors, if possible</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If a connection does not support scrollable cursors, or if holdable cursors are requested, the behaviour will silently fall back to <em>emulated</em> scrollable cursors.</p>
</div>
<div class="paragraph">
<p>Compared to emulated scrollable cursor, server-side scrollable cursors exhibit slightly different behaviour in Jaybird 5:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>New rows are inserted at the end of the cursor, where in <em>emulated</em> they are inserted before the current row</p>
</li>
<li>
<p>Deleted rows are visible with an all-null marker row, where in <em>emulated</em>, the deleted row is removed from the result set</p>
</li>
<li>
<p>Result sets now report <code>true</code> for <code>rowUpdated()</code>, <code>rowDeleted()</code> and <code>rowInserted()</code> for rows updated, deleted or inserted through the result set.</p>
<div class="paragraph">
<p>This is not yet reflected in <code>updatesAreDetected()</code>, <code>deletesAreDetected()</code> and <code>insertsAreDetected()</code> of <code>DatabaseMetaData</code>.
This will be corrected when we retrofit the new behaviour for <em>emulated</em> as well.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In Jaybird 6 and higher, <em>emulated</em> has been changed to have the same behaviour as <em>server</em>.</p>
</div>
<div class="paragraph">
<p>See also <a href="https://github.com/FirebirdSQL/jaybird/tree/master/devdoc/jdp/jdp-2021-04-real-scrollable-cursor-support.md.md">jdp-2021-04</a> and <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-05-behavior-of-updatable-result-sets.adoc">jdp-2024-05</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-batch-use-server-batch"><a class="anchor" href="#ref-batch-use-server-batch"></a>10.6. Connection property useServerBatch</h3>
<div class="paragraph">
<p><em class="since">Jaybird 5</em><br>
<em class="since">Firebird 4.0</em></p>
</div>
<div class="paragraph">
<p>A Boolean property to configure use of server-side batch updates.
The default value is <code>true</code>, to use server-side batch updates when possible.
Set to <code>false</code> to disable server-side batch updates and always use emulated batch updates.</p>
</div>
<div class="paragraph">
<p>See <a href="#stmt-batch-server-side">Server-side Batch Updates</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-batch-server-batch-buffer-size"><a class="anchor" href="#ref-batch-server-batch-buffer-size"></a>10.7. Connection property serverBatchBufferSize</h3>
<div class="paragraph">
<p><em class="since">Jaybird 5</em><br>
<em class="since">Firebird 4.0</em></p>
</div>
<div class="paragraph">
<p>Configures the server-side batch buffer size in bytes.</p>
</div>
<div class="hdlist">
<div class="title">Possible values</div>
<table>
<tr>
<td class="hdlist1">
<code>&lt; 0</code>
</td>
<td class="hdlist2">
<p>use server-side default (16MB as of Firebird 4.0)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>0</code>
</td>
<td class="hdlist2">
<p>(default) use server-side maximum (256MB as of Firebird 4.0)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>&gt; 0</code>
</td>
<td class="hdlist2">
<p>batch buffer size capped at server-side maximum</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Too small buffer sizes will use 128KB or the size necessary for two rows (whichever is bigger).
Too large buffer sizes will use the server-side maximum (256MB as of Firebird 4.0).</p>
</div>
<div class="paragraph">
<p>See <a href="#stmt-batch-server-side">Server-side Batch Updates</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-allowtxstmts"><a class="anchor" href="#ref-allowtxstmts"></a>10.8. Connection property allowTxStmts</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>Enables support for the transaction management statements <code>COMMIT [WORK]</code>, <code>ROLLBACK [WORK]</code> (without retain or savepoint) and <code>SET TRANSACTION</code>.</p>
</div>
<div class="paragraph">
<p>When disabled (<code>false</code>, the default), Jaybird will reject attempts to execute or prepare these statements with one of the following errors:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>337248313</code>
</td>
<td class="hdlist2">
<p>&#8220;<em>Execution of COMMIT statement is not allowed, use Connection.commit(), or set connection property allowTxStmts to true</em>&#8221;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>337248314</code>
</td>
<td class="hdlist2">
<p>&#8220;<em>Execution of ROLLBACK statement is not allowed, use Connection.rollback(), or set connection property allowTxStmts to true</em>&#8221;</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>337248315</code>
</td>
<td class="hdlist2">
<p>&#8220;<em>Execution of SET TRANSACTION statement is not allowed, use Connection.setTransactionIsolation(int) or FirebirdConnection.setTransactionParameters(..), or set connection property allowTxStmts to true</em>&#8221;</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When enabled (<code>true</code>), Jaybird will support these statements under the following conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execution with the <code>execute</code>, <code>executeUpdate</code> or <code>executeLargeUpdate</code> methods of <code>Statement</code> or <code>PreparedStatement</code>.</p>
</li>
<li>
<p>For <code>PreparedStatement</code>, the statement is prepared with one of the <code>prepareStatement</code> methods of <code>Connection</code>.</p>
</li>
<li>
<p>When auto-commit is disabled, executing <code>COMMIT</code> or <code>ROLLBACK</code> will commit or rollback the current transaction, or do nothing if there is no current transaction.
The implementation doesn&#8217;t execute the actual statements, but instead calls <code>Connection.commit()</code> or <code>Connection.rollback()</code>.</p>
</li>
<li>
<p>For the <code>SET TRANSACTION</code> statement, if there is no active transaction.
The implementation executes the statement using &#8220;execute immediate&#8221;, which means it is not executed through the statement handle.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These statements will throw an <code>SQLException</code> under the following conditions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execution when auto-commit mode is enabled.</p>
</li>
<li>
<p>Execution when the connection is participating in a distributed transaction.</p>
</li>
<li>
<p>For the <code>SET TRANSACTION</code> statement, execution while there is an active transaction.</p>
</li>
<li>
<p>Preparing with the <code>prepareCall</code> methods of <code>Connection</code>.</p>
</li>
<li>
<p>Execution with the <code>executeQuery</code> methods of <code>Statement</code> or <code>PreparedStatement</code>.</p>
</li>
<li>
<p>Adding to a batch (using the <code>addBatch</code> methods of <code>Statement</code> or <code>PreparedStatement</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>allowTxStmts</code> connection property has no effect on the other transaction management statements, i.e. <code>COMMIT [WORK] RETAIN</code>, <code>ROLLBACK [WORK] RETAIN</code>, <code>ROLLBACK [WORK] TO [SAVEPOINT] <em>name</em></code>, <code>SAVEPOINT <em>name</em></code> and <code>RELEASE SAVEPOINT <em>name</em> [ONLY]</code>.
These statements can always be executed.
However, for the savepoint related methods it is advisable to use the relevant JDBC API methods instead.</p>
</div>
<div class="paragraph">
<p>See also <a href="#transactions-mgmt-stmts">Transaction management statements</a>, and <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2024-01-explicit-support-for-transaction-statements.adoc" target="_blank" rel="noopener">jdp-2024-01: Explicit support for transaction statements</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-extendedmetadata"><a class="anchor" href="#ref-extendedmetadata"></a>10.9. Connection property extendedMetadata</h3>
<div class="paragraph">
<p><em class="since">Jaybird 5.0.5</em></p>
</div>
<div class="paragraph">
<p>By default, Jaybird queries extended metadata information.
This can be disabled by setting the connection property <code>extendedMetadata</code> to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>This setting only affects the following methods:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ResultSetMetaData.getPrecision(int)</code></dt>
<dd>
<p>When enabled, the actual precision of <code>NUMERIC</code> and <code>DECIMAL</code> columns is queried.
When disabled, the precision will be estimated.</p>
</dd>
<dt class="hdlist1"><code>ResultSetMetaData.isAutoIncrement(int)</code></dt>
<dd>
<p>When enabled (<em class="since">Jaybird 6</em>), the identity state of <code>INTEGER</code>, <code>BIGINT</code> and <code>SMALLINT</code> columns is queried on Firebird 3.0 and higher.
When disabled, the result is always <code>false</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Invocation of either of these methods will query the extended metadata needed for <em>both</em> methods.</p>
</div>
<div class="paragraph">
<p>Setting <code>extendedMetadata</code> to <code>false</code> may improve performance of these methods in exchange for an estimated precision, and not being able to determine the auto-increment state of a column.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ref-general"><a class="anchor" href="#ref-general"></a>11. General</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ref-logging"><a class="anchor" href="#ref-logging"></a>11.1. Logging</h3>
<div class="paragraph">
<p>Jaybird logs a variety of information during its work.</p>
</div>
<div class="paragraph">
<p>For logging, jaybird uses the following log levels:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Jaybird log level</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>trace</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">low-level debug information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>debug</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">debug information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>info</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">informational messages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>warn</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">warnings</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>error</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">errors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>fatal</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">severe/fatal errors (though in general, level <em>error</em> will be used instead of <em>fatal</em>)</p>
<p class="tableblock"><em class="until">Jaybird 6</em></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_java_platform_logging_api"><a class="anchor" href="#_java_platform_logging_api"></a>11.1.1. Java Platform Logging API</h4>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>Since Jaybird 6, the Java Platform Logging API (<a href="https://openjdk.org/jeps/264" target="_blank" rel="noopener">JEP 264</a>) is used.</p>
</div>
<div class="paragraph">
<p>The Java Platform Logging API by default logs to <code>java.util.logging</code>, but it is possible to plugin different logging platforms.
For example, Log4j provides the <code>log4j-jpl</code> dependency which will replace the default binding to <code>java.util.logging</code> with one to Log4j.</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-logging-jul"><a class="anchor" href="#ref-logging-jul"></a>11.1.2. java.util.logging</h4>
<div class="paragraph">
<p><em class="until">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>Jaybird uses <code>java.util.logging</code> by default.</p>
</div>
<div class="paragraph">
<p>Jaybird applies the following mapping for its log levels:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Jaybird log level</th>
<th class="tableblock halign-left valign-top"><em>jul</em> log level</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Logger.trace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Level.FINER</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Logger.debug</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Level.FINE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Logger.info</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Level.INFO</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Logger.warn</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Level.WARNING</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Logger.error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Level.SEVERE</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Logger.fatal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Level.SEVERE</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="ref-logging-disable"><a class="anchor" href="#ref-logging-disable"></a>11.1.3. Disable logging</h4>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> To disable logging, configure your logging library.
For example, when using <code>java.util.logging</code>, use a properties file (specified with <code>-Djava.util.logging.config.file=&lt;file&gt;</code>) including:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>org.firebirdsql.level = OFF</pre>
</div>
</div>
<div class="paragraph">
<p>Consult the documentation of <code>java.util.logging</code> or your actual logging library for other options to disable logging.</p>
</div>
<div class="paragraph">
<p><em class="until">Jaybird 6</em> To disable logging, specify system property <code>org.firebirdsql.jdbc.disableLogging</code> with value <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-logging-console"><a class="anchor" href="#ref-logging-console"></a>11.1.4. Console logging</h4>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> To write logging to the console, configure your logging library.
For example, when using <code>java.util.logging</code>, use a properties file (specified with <code>-Djava.util.logging.config.file=&lt;file&gt;</code>) including:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>handlers = java.util.logging.ConsoleHandler</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Contrary to the solution available under Jaybird 5 and earlier, <code>java.util.logging</code> does not provide a (standard) way to log to <code>System.out</code> (its <code>ConsoleHandler</code> logs to <code>System.err</code>), this would require a custom handler implementation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em class="until">Jaybird 6</em> Jaybird can write its logging to the <code>System.out</code> for <em>info</em> and lower and <code>System.err</code> for <em>warn</em> and above.
Levels <em>debug</em> and <em>trace</em> are disabled in the implementation.
To enable logging to the console, you can set system property <code>org.firebirdsql.jdbc.forceConsoleLogger</code> to <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-logging-custom"><a class="anchor" href="#ref-logging-custom"></a>11.1.5. Custom logging implementation</h4>
<div class="sect4">
<h5 id="ref-logging-custom-after-6"><a class="anchor" href="#ref-logging-custom-after-6"></a>Custom logging in Jaybird 6 and higher</h5>
<div class="paragraph">
<p><em class="since">Jaybird 6</em> If you need a custom logger implementation under Jaybird 6 or higher, you will need to provide an implementation of <code>java.lang.System.Logger</code> and <code>java.lang.System.LoggerFinder</code> and a service loader definition.</p>
</div>
<div class="paragraph">
<p>Make sure you really need this: if you want to use a different logging library, it may already have the necessary implementation (for example, Log4j has the <code>log4j-jpl</code> dependency).</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-logging-custom-before-6"><a class="anchor" href="#ref-logging-custom-before-6"></a>Custom logging in Jaybird 5 and earlier</h5>
<div class="paragraph">
<p><em class="until">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>You can provide your own logging implementation if you don&#8217;t want to use <code>java.util.logging</code> or console logging.</p>
</div>
<div class="paragraph">
<p>To provide a custom logging implementation, you need to implement interface <code>org.firebirdsql.logging.Logger</code>.
This implementation must be public and must have a public constructor with a single String argument for the logger name.
Set system property <code>org.firebirdsql.jdbc.loggerImplementation</code> with the fully-qualified name of your implementation.</p>
</div>
<div class="paragraph">
<p>The <code>org.firebirdsql.logging.Logger</code> interface should be considered volatile and might change in minor releases (but not point/bugfix releases).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">package org.example.jaybird.logging;

public class CustomLogger implements org.firebirdsql.logging.Logger {
    public CustomLogger(String name) {
        // create the logger
    }
    // implementation of org.firebirdsql.logging.Logger interface
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the Java command line, specify:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>-Dorg.firebirdsql.jdbc.loggerImplementation=org.example.jaybird.logging.CustomLogger</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ref-types"><a class="anchor" href="#ref-types"></a>12. Datatype reference</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This section documents non-standard datatypes supported by Jaybird, behaviour deviating from standard JDBC expectations, or recently introduced features.
It does not provide full documentation for all supported datatypes.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="ref-binary"><a class="anchor" href="#ref-binary"></a>12.1. Binary types BINARY/VARBINARY</h3>
<div class="paragraph">
<p>The JDBC (and SQL standard) types <code>BINARY</code> and <code>VARBINARY</code> are called <code>CHAR(n) CHARACTER SET OCTETS</code> and <code>VARCHAR(n) CHARACTER SET OCTETS</code> in Firebird.</p>
</div>
<div class="paragraph">
<p>(<em class="since">Firebird 4.0</em>) Firebird 4.0 introduces the names <code>BINARY</code> and <code>VARBINARY</code>/<code>BINARY VARYING</code> as aliases for <code>(VAR)CHAR(n) CHARACTER SET OCTETS</code>.</p>
</div>
<div class="paragraph">
<p>In Java, binary and varbinary are usually handled with byte arrays and <code>InputStream</code>/<code>OutputStream</code>.</p>
</div>
<div class="sect3">
<h4 id="ref-binary-always"><a class="anchor" href="#ref-binary-always"></a>12.1.1. Always BINARY/VARBINARY</h4>
<div class="paragraph">
<p>Jaybird always handles <code>(VAR)CHAR(n) CHARACTER SET OCTETS</code> as JDBC types as <code>BINARY</code>/<code>VARBINARY</code>.</p>
</div>
<div class="paragraph">
<p>Jaybird will report the JDBC <code>BINARY</code>/<code>VARBINARY</code> type information in all metadata (<code>DatabaseMetaData</code>, <code>ResultSetMetaData</code>, <code>ParameterMetaData</code>) for columns and parameters of type <code>(VAR)CHAR(n) CHARACTER SET OCTETS</code>, and <code>getObject(int/String)</code> will always return <code>byte[]</code>.</p>
</div>
<div class="paragraph">
<p>The getters (on result set/callable statement), setters (prepared/callable statement), and update methods (result set) for columns of this type are restricted to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>get/set/updateNull</code></p>
</li>
<li>
<p><code>get/set/updateBytes</code></p>
</li>
<li>
<p><code>get/set/updateBinaryStream</code></p>
</li>
<li>
<p><code>get/set/updateAsciiStream</code></p>
</li>
<li>
<p><code>get/set/updateString</code> (using the default encoding or connection encoding)</p>
</li>
<li>
<p><code>get/set/updateCharacterStream</code> (using the default encoding or connection encoding)</p>
</li>
<li>
<p><code>get/set/updateObject</code> (with <code>String</code>, <code>byte[]</code>, <code>InputStream</code>, <code>Reader</code>)</p>
</li>
<li>
<p><code>get/setObject</code> with a <code>java.sql.RowId</code></p>
</li>
<li>
<p><code>get/setRowId</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other getters/setters/updaters or object types supported for 'normal' <code>(VAR)CHAR</code> fields are not available.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-boolean"><a class="anchor" href="#ref-boolean"></a>12.2. Type BOOLEAN</h3>
<div class="paragraph">
<p><em class="since">Firebird 3.0</em></p>
</div>
<div class="paragraph">
<p>Firebird 3.0 introduced the SQL standard type <code>BOOLEAN</code>.</p>
</div>
<div class="sect3">
<h4 id="ref-boolean-support"><a class="anchor" href="#ref-boolean-support"></a>12.2.1. Support for BOOLEAN</h4>
<div class="paragraph">
<p>On parameters of type <code>BOOLEAN</code>, Jaybird supports most of the other Java types, using the following mapping:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 37.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top"><code>setXXX</code></th>
<th class="tableblock halign-left valign-top"><code>getXXX</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"true"</code>/<code>"Y"</code>/<code>"T"</code>/<code>"1"</code> sets true, everything else sets false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true is <code>"true"</code>, false is <code>"false"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer types</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> sets false, everything else sets true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true is <code>1</code>, false is <code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exact <code>0.0f</code> sets false, everything else sets true <sup class="footnote" id="_footnote_boolean-set-float">[<a id="_footnoteref_27" class="footnote" href="#_footnotedef_27" title="View footnote.">27</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true is <code>1.0f</code>, false is <code>0.0f</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>double</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exact <code>0.0</code> sets false, everything else sets true <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_27" title="View footnote.">27</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true is <code>1.0</code>, false is <code>0.0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BigDecimal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> (<code>ZERO</code>) (using <code>compareTo</code>) sets false, everything else sets true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true is <code>1</code> (<code>ONE</code>), false is <code>0</code> (<code>ZERO</code>)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We recommend to avoid the <code>float</code>, <code>double</code> and <code>BigDecimal</code> options.</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-boolean-workaround"><a class="anchor" href="#ref-boolean-workaround"></a>12.2.2. Workarounds for booleans</h4>
<div class="paragraph">
<p>Firebird 2.5 and earlier do not support <code>BOOLEAN</code>, but support for booleans can be simulated</p>
</div>
<div class="paragraph">
<p>The following options are recommended:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>SMALLINT</code> with values <code>0</code> and <code>1</code></p>
</li>
<li>
<p>Use <code>CHAR(1)</code> (or <code>VARCHAR(1)</code>) with values <code>'Y'</code> and <code>'N'</code></p>
</li>
<li>
<p>Use <code>CHAR</code> or <code>VARCHAR</code> with length 5 or longer with values <code>'true'</code> and <code>'false'</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We recommend creating a domain for 'simulated' booleans with a check constraint to restrict the possible values.
If you do this, name the domain something like <code>D_BOOLEAN</code>, and avoid the name <code>BOOLEAN</code> to prevent problems when upgrading to Firebird 3.0.</p>
</div>
<div class="paragraph">
<p>For non-boolean types, Jaybird supports the following conversions with <code>setBoolean</code> and <code>getBoolean</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 37.5%;">
<col style="width: 37.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top"><code>getBoolean</code></th>
<th class="tableblock halign-left valign-top"><code>setBoolean</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(VAR)CHAR(&lt;5)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'Y'</code>/<code>'T'</code>/<code>'1'</code>/<code>'true'</code> is true (case-insensitive), everything else is false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true sets <code>'Y'</code>, false sets <code>'N'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(VAR)CHAR(&gt;=5)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'Y'</code>/<code>'T'</code>/<code>'1'</code>/<code>'true'</code> is true (case-insensitive), everything else is false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true sets <code>'true'</code>, false sets <code>'false'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BLOB SUB_TYPE TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'Y'</code>/<code>'T'</code>/<code>'1'</code>/<code>'true'</code> is true (case-insensitive), everything else is false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true sets <code>'true'</code>, false sets <code>'false'</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SMALLINT</code>/<code>INTEGER</code>/<code>BIGINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code> is true, everything else is false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true sets <code>1</code>, false sets <code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECIMAL</code>/<code>NUMERIC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Truncated integral value <code>1</code> is true, everything else is false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true sets <code>1</code>, false sets <code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REAL</code>/<code>FLOAT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exact <code>1.0f</code> is true, everything else is false <sup class="footnote" id="_footnote_boolean-get-float">[<a id="_footnoteref_28" class="footnote" href="#_footnotedef_28" title="View footnote.">28</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true sets <code>1.0f</code>, false sets <code>0.0f</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DOUBLE PRECISION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exact <code>1.0</code> is true, everything else is false <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_28" title="View footnote.">28</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true sets <code>1.0</code>, false sets <code>0.0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECFLOAT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exact <code>1E0</code> is true, everything else is false (including <code>1.0E0</code>!) <sup class="footnote">[<a id="_footnoteref_29" class="footnote" href="#_footnotedef_29" title="View footnote.">29</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true sets <code>1E0</code>, false sets <code>0E0</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>We recommend to avoid the <code>DECIMAL</code>, <code>NUMERIC</code>, <code>REAL</code>/<code>FLOAT</code>, <code>DOUBLE PRECISION</code> or <code>DECFLOAT</code> options.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-datetime"><a class="anchor" href="#ref-datetime"></a>12.3. Date/time types</h3>
<div class="sect3">
<h4 id="ref-datetime-tz"><a class="anchor" href="#ref-datetime-tz"></a>12.3.1. Time zones</h4>
<div class="paragraph">
<p><em class="since">Firebird 4.0</em></p>
</div>
<div class="paragraph">
<p>Firebird 4.0 introduced time zone types, with types <code>TIME WITH TIME ZONE</code> and <code>TIMESTAMP WITH TIME ZONE</code>.
See the <a href="https://www.firebirdsql.org/file/documentation/release_notes/html/en/4_0/rlsnotes40.html" target="_blank" rel="noopener">Firebird 4.0 release notes</a> and <code>doc/sql.extensions/README.time_zone.md</code> in the Firebird installation for details on these types.</p>
</div>
<div class="paragraph">
<p>Two connection properties, <code>dataTypeBind</code> and <code>sessionTimeZone</code>, are available to provide limited support for these types.
See <a href="#ref-datetime-timezonebind">Defining time zone data type bind</a> and <a href="#ref-datetime-sessiontimezone">Connection property sessionTimeZone</a> for details.</p>
</div>
<div class="paragraph">
<p>The time zone types are supported under Java 8 and higher, using the Java 8 (or higher) version of Jaybird.
Time zone types are not supported under Java 7, and you will need to enable legacy time zone bind to use these types.
With legacy time zone bind, Firebird will convert to the equivalent <code>TIME</code> and <code>TIMESTAMP</code> (<code>WITHOUT TIME ZONE</code>) types using the session time zone.
Time zone binds can be configured with connection property <code>dataTypeBind</code>, for more information see <a href="#ref-datetime-timezonebind">Defining time zone data type bind</a>.</p>
</div>
<div class="sect4">
<h5 id="ref-datetime-tz-scope"><a class="anchor" href="#ref-datetime-tz-scope"></a>Scope of time zone support</h5>
<div class="paragraph">
<p>JDBC 4.2 introduced support for time zones, and maps these types to <code>java.time.OffsetTime</code> and <code>java.time.OffsetDateTime</code>.
JDBC does not define explicit setters for these types.
Use <code>setObject(index, value)</code>, <code>updateObject(index, value)</code>, <code>getObject(index/name)</code> or <code>getObject(index/name, classType)</code>.</p>
</div>
<div class="paragraph">
<p>Firebird 4.0 supports both offset and named time zones.
Given the definition in JDBC, Jaybird defaults to offset time zones.
On retrieval of a value with a named zone, Jaybird will make a best effort to convert to the equivalent offset using Java&#8217;s time zone information.
If no mapping is available the time will be returned at UTC (offset zero).</p>
</div>
<div class="paragraph">
<p><em class="since">Jaybird 4.0.1</em><br>
Since Jaybird 4.0.1, it is also possible to get and set <code>java.time.ZonedDateTime</code>, which preserves the named zone information.</p>
</div>
<div class="paragraph">
<p>Jaybird 4 supports the following Java types on fields of time zone types (those marked with * are not defined in JDBC)</p>
</div>
<div class="paragraph">
<p><code>TIME WITH TIME ZONE</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.time.OffsetTime</code> (default for <code>getObject</code>)</p>
<div class="ulist">
<ul>
<li>
<p>On get, if the value is a named zone, it will derive the offset using the base date 2020-01-01 (in 4.0.0 it used the current date).
The offset can be different from the offset of the <code>OffsetDateTime</code> for the same value.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.time.OffsetDateTime</code></p>
<div class="ulist">
<ul>
<li>
<p>On get the current date is added</p>
<div class="ulist">
<ul>
<li>
<p>For a named zone, the time in the zone is derived at 2020-01-01 and then rebased to the current date.
As a result, the offset can be different from an <code>OffsetTime</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>On set the date information is removed</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.time.ZonedDateTime</code> (*) <em class="since">Jaybird 4.0.1</em></p>
<div class="ulist">
<ul>
<li>
<p>On get the time in the zone is derived at 2020-01-01 and then rebased to the current date.</p>
</li>
<li>
<p>On set, the time is rebased to 2020-01-01 and then the date information is removed.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.lang.String</code></p>
<div class="ulist">
<ul>
<li>
<p>On get applies <code>OffsetTime.toString()</code> (e.g. <code>13:25:13.1+01:00</code>)</p>
</li>
<li>
<p>On set tries the default parse format of either <code>OffsetTime</code> or <code>OffsetDateTime</code> (e.g. <code>13:25:13.1+01:00</code> or <code>2019-03-10T13:25:13+01:00</code>) and then sets as that type</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.sql.Time</code> (*)</p>
<div class="ulist">
<ul>
<li>
<p>On get obtains <code>java.time.OffsetDateTime</code>, converts this to epoch milliseconds and uses <code>new java.sql.Time(millis)</code></p>
</li>
<li>
<p>On set applies <code>toLocalTime()</code>, combines this with <code>LocalDate.now()</code> and then derives the offset time for the default JVM time zone</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.sql.Timestamp</code> (*)</p>
<div class="ulist">
<ul>
<li>
<p>On get obtains <code>java.time.OffsetDateTime</code>, converts this to epoch milliseconds and uses <code>new java.sql.Timestamp(millis)</code></p>
</li>
<li>
<p>On set applies <code>toLocalDateTime()</code> and derives the offset time for the default JVM time zone</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>TIMESTAMP WITH TIME ZONE</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.time.OffsetDateTime</code> (default for <code>getObject</code>)</p>
</li>
<li>
<p><code>java.time.OffsetTime</code> (*)</p>
<div class="ulist">
<ul>
<li>
<p>On get, the date information is removed</p>
</li>
<li>
<p>On set, the current date is added</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.time.ZonedDateTime</code> (*) <em class="since">Jaybird 4.0.1</em></p>
</li>
<li>
<p><code>java.lang.String</code></p>
<div class="ulist">
<ul>
<li>
<p>On get applies <code>OffsetDateTime.toString()</code> (e.g. <code>2019-03-10T13:25:13.1+01:00</code>)</p>
</li>
<li>
<p>On set tries the default parse format of either <code>OffsetTime</code> or <code>OffsetDateTime</code> (e.g. <code>13:25:13.1+01:00</code> or <code>2019-03-10T13:25:13+01:00</code>) and then sets as that type</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.sql.Time</code> (*)</p>
<div class="ulist">
<ul>
<li>
<p>On get obtains <code>java.time.OffsetDateTime</code>, converts this to epoch milliseconds and uses <code>new java.sql.Time(millis)</code></p>
</li>
<li>
<p>On set applies <code>toLocalTime()</code>, combines this with <code>LocalDate.now()</code> and then derives the offset date time for the default JVM time zone</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.sql.Timestamp</code> (*)</p>
<div class="ulist">
<ul>
<li>
<p>On get obtains <code>java.time.OffsetDateTime</code>, converts this to epoch milliseconds and uses <code>new java.sql.Timestamp(millis)</code></p>
</li>
<li>
<p>On set applies <code>toLocalDateTime()</code> and derives the offset date time for the default JVM time zone</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.sql.Date</code> (*)</p>
<div class="ulist">
<ul>
<li>
<p>On get obtains <code>java.time.OffsetDateTime</code>, converts this to epoch milliseconds and uses <code>new java.sql.Date(millis)</code></p>
</li>
<li>
<p>On set applies <code>toLocalDate()</code> at start of day and derives the offset date  time for the default JVM time zone</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, Firebird 4.0 has 'bind-only' data types <code>EXTENDED TIME/TIMESTAMP WITH TIME ZONE</code>.
These data types can be set through the data type bind configuration and include an extra offset in its data so clients without access to ICU or other time zone data can use the offset as determined by Firebird.</p>
</div>
<div class="paragraph">
<p>Jaybird provides minimal support for these types by handling them the same as the normal <code>WITH TIME ZONE</code> types.
That means the extra offset information is ignored and Jaybird will always use the Java time zone information to calculate the offset of a named zone, and if a zone is unknown in Java, Jaybird will fallback to UTC even when the actual offset is available in the 'extended' time zone type.</p>
</div>
<div class="paragraph">
<p>See also:</p>
</div>
<div class="ulist none">
<ul class="none">
<li>
<p><a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2020-01-extended-time-zone-types-support.md">jdp-2020-01: Extended Time Zone Types Support</a></p>
</li>
<li>
<p><a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2020-06-offsettime-derivation-for-named-zone.md">jdp-2020-06: OffsetTime derivation for named zone</a></p>
</li>
<li>
<p><a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2020-09-add-zoneddatetime-support.md">jdp-2020-09: Add ZonedDateTime support</a></p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="ref-datetime-tz-scope-legacy"><a class="anchor" href="#ref-datetime-tz-scope-legacy"></a>Support for legacy JDBC date/time types</h6>
<div class="paragraph">
<p>For the <code>WITH TIME ZONE</code> types, JDBC does not define support for the legacy JDBC types (<code>java.sql.Time</code>, <code>java.sql.Timestamp</code> and <code>java.sql.Date</code>).
To ease the transition and potential compatibility with tools and libraries, Jaybird does provide support.
However, we strongly recommend to avoid using these types.</p>
</div>
<div class="paragraph">
<p>Compared to the <code>WITHOUT TIME ZONE</code> types, there may be small discrepancies in values as Jaybird uses 1970-01-01 for <code>WITHOUT TIME ZONE</code>, while for <code>WITH TIME ZONE</code> it uses the current date.
If this is problematic, then either apply the necessary conversions yourself, enable legacy time zone bind, or define or cast your columns to <code>TIME</code> or <code>TIMESTAMP</code>.</p>
</div>
</div>
<div class="sect5">
<h6 id="ref-datetime-tz-scope-javatime"><a class="anchor" href="#ref-datetime-tz-scope-javatime"></a>No support for other java.time types</h6>
<div class="paragraph">
<p>The types <code>java.time.LocalTime</code>, <code>java.time.LocalDateTime</code> and <code>java.time.LocalDate</code> are not supported for the time zone types.
Supporting these types would be ambiguous.
If you need to use these, then either apply the necessary conversions yourself, enable legacy time zone bind, or define or cast your columns as <code>TIME</code> or <code>TIMESTAMP</code>.</p>
</div>
<div class="paragraph">
<p>Jaybird also does not support non-standard extensions like <code>java.time.Instant</code>.
If there is interest, we may add them in the future.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-datetime-timezonebind"><a class="anchor" href="#ref-datetime-timezonebind"></a>Defining time zone data type bind</h5>
<div class="paragraph">
<p>Jaybird 3.0.9 added the connection property <code>dataTypeBind</code> to defining data type mappings.
This can be used to configure conversion of <code>WITH TIME ZONE</code> types to a different datatype.
When configured, Firebird will present columns or parameters of <code>TIME(STAMP) WITH TIME ZONE</code> as the specified type, allowing clients without support for <code>WITH TIME ZONE</code> to read or set values.</p>
</div>
<div class="paragraph">
<p>This property needs to be explicitly set if you are using Jaybird 4 on Java 7 or Jaybird 3 (on any Java version), and need to handle the <code>WITH TIME ZONE</code> types.
It can also be used for tools or applications that expect <code>java.sql.Time</code>/<code>Timestamp</code> types and cannot use the <code>java.time.OffsetTime</code>/<code>OffsetDateTime</code> types returned for the <code>WITH TIME ZONE</code> types.</p>
</div>
<div class="paragraph">
<p>To map <code>TIME WITH TIME ZONE</code> and <code>TIMESTAMP WITH TIME ZONE</code> to the legacy without time zone types, you can use:</p>
</div>
<div class="listingblock">
<div class="title">Map with time zone types to without time zone types</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Properties props = new Properties();
props.setProperty("dataTypeBind",
    "time with time zone to legacy;timestamp with time zone to legacy");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of <code>legacy</code>, you can also explicitly specify <code>time</code> and <code>timestamp</code> respectively.</p>
</div>
<div class="paragraph">
<p>Firebird will convert a <code>WITH TIME ZONE</code> type to the equivalent <code>WITHOUT TIME ZONE</code> type using the session time zone to derive the value.</p>
</div>
<div class="paragraph">
<p>Result set columns and parameters on prepared statements will behave as the equivalent <code>WITHOUT TIME ZONE</code> types.
This conversion is not applied to the database metadata which will always report <code>WITH TIME ZONE</code> information.</p>
</div>
<div class="paragraph">
<p>The <code>TIME ZONE TO EXTENDED</code> binds (including type-specific variants) is only supported under Java 8 and higher using the Java 8 or higher version of Jaybird.
As mentioned earlier, the support for 'extended' time zone types will behave identical to the normal time zone types.</p>
</div>
<div class="paragraph">
<p>See also <a href="#ref-datatypebind">Data type bind support</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-datetime-sessiontimezone"><a class="anchor" href="#ref-datetime-sessiontimezone"></a>Connection property sessionTimeZone</h5>
<div class="paragraph">
<p>The connection property <code>sessionTimeZone</code> (alias <code>session_time_zone</code>) does two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>specifies the Firebird 4.0 session time zone,</p>
</li>
<li>
<p>specifies the time zone to use when converting values of without time zone types to the legacy JDBC datetime types on all Firebird versions.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>See <a href="#ref-datetime-sessiontimezone-fb">Firebird session time zone</a> for information on the effects of <code>sessionTimeZone</code> on the server-side.</p>
</div>
<div class="paragraph">
<p>Valid values are time zone names known by Firebird, we recommend to use the long names (e.g. <code>Europe/Amsterdam</code>) and not the ambiguous short IDs (e.g. <code>CET</code>).
Although not required, we recommend to use time zone names that are known by Firebird and Java (see <a href="#ref-datetime-sessiontimezone-convert">Session time zone for conversion</a> for caveats).</p>
</div>
<div class="paragraph">
<p>In Jaybird 3, <code>sessionTimeZone</code> will only configure the server-side session time zone.
Client-side, Jaybird will continue to use the JVM default time zone for parsing the without time zone values to the <code>java.sql.Time/Timestamp/Date</code> types.
Setting <code>sessionTimeZone</code> to the JVM default time zone will yield the best (i.e. correct) values, but not setting it (and thus using the server default) will retain behaviour that is backwards compatible with behaviour of previous versions of Jaybird.
In Jaybird 4, this property also configures client-side parsing of values to these legacy types.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>On Jaybird 3, we recommend not setting this property, or setting it to the default JVM time zone.
If you set it to a different time zone, then we recommend that you do not use the legacy <code>java.sql.Time/Timestamp/Date</code> types, but instead use <code>java.time.LocalTime/LocalDateTime/LocalDate</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The remainder of this section only applies to Jaybird 4 and higher.</p>
</div>
<div class="paragraph">
<p>By default, Jaybird 4 and higher will use the JVM default time zone as reported by <code>java.util.TimeZone.getDefault().getID()</code> as the session time zone.
Using the JVM default time zone as the default is the best option in the light of JDBC requirements with regard to <code>java.sql.Time</code> and <code>java.sql.Timestamp</code> using the JVM default time zone.</p>
</div>
<div class="paragraph">
<p>To use the default server time zone and the Jaybird 3 and earlier behaviour to use the JVM default time zone, set the connection property to <code>server</code>.
This will result in the conversion behaviour of Jaybird 3 and earlier.
Be aware that this is inconsistent if Firebird and Java are in different time zones.</p>
</div>
<div class="sect5">
<h6 id="ref-datetime-sessiontimezone-fb"><a class="anchor" href="#ref-datetime-sessiontimezone-fb"></a>Firebird session time zone</h6>
<div class="paragraph">
<p><em class="since">Firebird 4.0</em></p>
</div>
<div class="paragraph">
<p>The session time zone is used for conversion between <code>WITH TIME ZONE</code> values and <code>WITHOUT TIME ZONE</code> values (i.e. using cast or with legacy time zone bind), and for the value of <code>LOCALTIME</code>, <code>LOCALTIMESTAMP</code>, <code>CURRENT_TIME</code> and <code>CURRENT_TIMESTAMP</code>, and other uses of the session time zone as documented in the Firebird 4.0 documentation.</p>
</div>
<div class="paragraph">
<p>The value of <code>sessionTimeZone</code> must be supported by Firebird 4.0.
It is possible that time zone identifiers used by Java are not supported by Firebird.
If Firebird does not know the session time zone, error (<code>Invalid time zone region: &lt;zone name&gt;</code>) is reported on connect.</p>
</div>
<div class="paragraph">
<p>In Jaybird 4 and higher, Jaybird will apply the JVM default time zone as the default session time zone.
The use of the JVM default time zone as the default session time zone will result in subtly different behaviour compared to previous versions of Jaybird and&#8201;&#8212;&#8201;even with Jaybird 4&#8201;&#8212;&#8201;Firebird 3.0 or earlier, as current time values like <code>LOCALTIMESTAMP</code> (etc) will now reflect the time in the JVM time zone, and not the server time zone rebased on the JVM default time zone.</p>
</div>
<div class="paragraph">
<p>As an example, with a Firebird in Europe/London and a Java application in Europe/Amsterdam with Firebird time 12:00, in Jaybird 3, the Java application will report this time as 12:00, in Jaybird 4 with Firebird 4.0, this will now report 13:00, as that is the time in Amsterdam if it is 12:00 in London (ignoring potential DST start/end differences).</p>
</div>
<div class="paragraph">
<p>Other examples include values generated in triggers and default value clauses.</p>
</div>
</div>
<div class="sect5">
<h6 id="ref-datetime-sessiontimezone-convert"><a class="anchor" href="#ref-datetime-sessiontimezone-convert"></a>Session time zone for conversion</h6>
<div class="paragraph">
<p>For <code>WITHOUT TIME ZONE</code> types, the session time zone will be used to derive the <code>java.sql.Time</code>, <code>java.sql.Timestamp</code> and <code>java.sql.Date</code> values.
This is also done for Firebird 3.0 and earlier.</p>
</div>
<div class="paragraph">
<p>If Java does not know the session time zone, no error is reported, but when retrieving <code>java.sql.Time</code>, <code>java.sql.Timestamp</code> or <code>java.sql.Date</code> a warning is logged and conversion will happen in GMT, which might yield unexpected values.</p>
</div>
<div class="paragraph">
<p>We strongly suggest that you use <code>java.time.LocalTime</code>, <code>java.time.LocalDateTime</code> and <code>java.time.LocalDate</code> types instead of these legacy datetime types.</p>
</div>
<div class="paragraph">
<p>For <code>WITH TIME ZONE</code> types, the session time zone has no effect on the conversion to the legacy JDBC date/time types: the offset date/time is converted to epoch milliseconds and used to construct these legacy types directly.</p>
</div>
<div class="paragraph">
<p>Executing <code>SET TIME ZONE &lt;zone name&gt;</code> statements after connect will change the session time zone on the server, but Jaybird will continue to use the session time zone set in the connection property for these conversions.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ref-datetime-tz-convert"><a class="anchor" href="#ref-datetime-tz-convert"></a>Time zone support for CONVERT</h5>
<div class="paragraph">
<p>Although not defined in JDBC (or ODBC), Jaybird has added a non-standard extension to the <code>CONVERT</code> JDBC escape to allow conversion to the time zone types.</p>
</div>
<div class="paragraph">
<p>In addition to the standard-defined types, it also supports the type names <code>TIME_WITH_TIME_ZONE</code>, <code>TIME_WITH_TIMEZONE</code>, <code>TIMESTAMP_WITH_TIME_ZONE</code> and <code>TIMESTAMP_WITH_TIMEZONE</code> (and the same with the <code>SQL_</code> prefix).</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-datetime-tz-caveats"><a class="anchor" href="#ref-datetime-tz-caveats"></a>Caveats for time zone types</h5>
<div class="ulist">
<ul>
<li>
<p>Time zone fields do not support <code>java.time.LocalDate</code>, <code>java.time.LocalTime</code>, <code>java.time.LocalDateTime</code>.</p>
</li>
<li>
<p>Firebird 4.0 redefines <code>CURRENT_TIME</code> and <code>CURRENT_TIMESTAMP</code> to return a <code>WITH TIME ZONE</code> type.
Use <code>LOCALTIME</code> and <code>LOCALTIMESTAMP</code> (introduced in Firebird 2.5.9 and Firebird 3.0.4) if you want to ensure a <code>WITHOUT TIME ZONE</code> type is used.</p>
</li>
<li>
<p>The database metadata will always return JDBC 4.2 compatible information on time zone types, even on Java 7, and even when legacy time zone bind is set.
For Java 7 compatibility, the JDBC 4.2 <code>java.sql.Types</code> constants <code>TIME_WITH_TIMEZONE</code> and <code>TIMESTAMP_WITH_TIMEZONE</code> are also defined in <code>org.firebirdsql.jdbc.JaybirdTypeCodes</code>.</p>
</li>
<li>
<p>The default <code>sessionTimeZone</code> is set to the JVM default time zone, this may result in different application behavior for <code>DATE</code>, <code>TIME</code> and <code>TIMESTAMP</code>, including values generated in triggers and default value clauses.
To prevent this, either switch those types to a <code>WITH TIME ZONE</code> type, or set the <code>sessionTimeZone</code> to <code>server</code> or to the actual time zone of the Firebird server.</p>
</li>
<li>
<p>As <code>CURRENT_TIME</code> uses the session time zone, which usually is a named zone, use in combination with <code>java.time.OffsetTime</code> can yield confusing results.
For example, if the current date and time is '2020-07-01T14:51:00 Europe/Amsterdam', then retrieving <code>CURRENT_TIME</code> as an <code>OffsetTime</code> will return the value '14:51:00+01:00', and not '14:51:00+02:00'.<br>
It is recommended to avoid <code>CURRENT_TIME</code> and use <code>CURRENT_TIMESTAMP</code> instead.</p>
</li>
<li>
<p>Overall, using <code>TIME WITH TIME ZONE</code> with named zones is rather fragile and prone to interpretation errors.
This is a result of how this is implemented in Firebird: values are stored at UTC with their offset or named zones, where derivation of the time in the named zone needs to use 2020-01-01 as the date for the time zone rules to apply.<br>
We recommend avoiding <code>TIME WITH TIME ZONE</code> where possible.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-decfloat"><a class="anchor" href="#ref-decfloat"></a>12.4. Decimal floating point type DECFLOAT</h3>
<div class="paragraph">
<p><em class="since">Firebird 4.0</em></p>
</div>
<div class="paragraph">
<p>Firebird 4.0 introduces the SQL:2016 <code>DECFLOAT</code> datatype, a decimal floating point with a precision of 16 or 34 digits (backed by an IEEE-754 Decimal64 or Decimal128).
See the Firebird 4.0 documentation for details on this datatype.</p>
</div>
<div class="sect3">
<h4 id="ref-decfloat-jb4"><a class="anchor" href="#ref-decfloat-jb4"></a>12.4.1. Decfloat support in Jaybird 4 and higher</h4>
<div class="paragraph">
<p>Jaybird 4 introduced support for the <code>DECFLOAT</code> datatype mapping to <code>java.math.BigDecimal</code>.
For more information, see <a href="#ref-decfloat-support">DECFLOAT support</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-decfloat-jb3"><a class="anchor" href="#ref-decfloat-jb3"></a>12.4.2. Workarounds for Jaybird 3</h4>
<div class="paragraph">
<p>Jaybird 3 does not support <code>DECFLOAT</code>, but starting with Jaybird 3.0.9, the connection property <code>dataTypeBind</code> can be used to convert to a datatype that is supported by Jaybird.</p>
</div>
<div class="paragraph">
<p>We recommend either <code>dataTypeBind=decfloat to varchar</code> or <code>dataTypeBind=decfloat to double precision</code>.
Option <code>varchar</code> has our preference as it is able to support the full range of values of the <code>DECFLOAT</code> types.</p>
</div>
<div class="paragraph">
<p>See <a href="#ref-decfloat-bind">Defining decfloat data type bind</a> for details.</p>
</div>
<div class="paragraph">
<p>For earlier Jaybird 3 versions, you can use the <code>SET BIND OF DECFLOAT TO &lt;target-type&gt;</code> statement to configure your connection to map <code>DECFLOAT</code> to a different datatype.
When set, Firebird will present columns or parameters of <code>DECFLOAT</code> as the specified type, allowing clients without support for <code>DECFLOAT</code> to read or set values.</p>
</div>
<div class="paragraph">
<p>The available options are the same as documented in <a href="#ref-decfloat-bind">Defining decfloat data type bind</a></p>
</div>
<div class="paragraph">
<p>For example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">try (Connection connection = DriverManager.getConnection(..);
     Statement stmt = connection.createStatement()) {
    stmt.execute("SET BIND OF DECFLOAT TO varchar");
    // DECFLOAT will now be mapped to a VARCHAR datatype
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The effect of the <code>SET BIND</code> statement will be reset to the default when <code>ALTER SESSION RESET</code> is executed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="ref-decfloat-bind"><a class="anchor" href="#ref-decfloat-bind"></a>12.4.3. Defining decfloat data type bind</h4>
<div class="paragraph">
<p>Jaybird 3.0.9 added the connection property <code>dataTypeBind</code> to defining data type mappings.
This can be used to configure conversion of <code>DECFLOAT</code> to a different datatype.
When set, Firebird will present columns or parameters of <code>DECFLOAT</code> as the specified type, allowing clients without support for <code>DECFLOAT</code> to read or set values.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This property is also available in Jaybird 4, but we recommend to not use this property in Jaybird 4 and instead rely on the default behaviour (<code>native</code>) and support for <code>DECFLOAT</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To map <code>DECFLOAT(16)</code> and <code>DECFLOAT(34)</code> to a string type, you can use:</p>
</div>
<div class="listingblock">
<div class="title">Map all decfloat types to string</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">var props = new Properties();
props.setProperty("dataTypeBind", "decfloat to varchar");</code></pre>
</div>
</div>
<div class="paragraph">
<p>To map <code>DECFLOAT(16)</code> to <code>DOUBLE PRECISION</code> and <code>DECFLOAT(34)</code> to string, you can use:</p>
</div>
<div class="listingblock">
<div class="title">Map all decfloat types to string</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">var props = new Properties();
props.setProperty(
    "dataTypeBind", "decfloat(16) to double precision;decfloat(34) to varchar");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Firebird will convert a <code>DECFLOAT</code> type to the specified type using a cast to derive the value.</p>
</div>
<div class="paragraph">
<p>Result set columns and parameters on prepared statements will behave as the defined type.
This conversion is not applied to the database metadata which will always report <code>DECFLOAT</code> information.</p>
</div>
<div class="paragraph">
<p>In general, we recommend binding to <code>VARCHAR</code> as this will allow you to get (and set) the full range of DECFLOAT values with precision.</p>
</div>
<div class="paragraph">
<p>See also <a href="#ref-datatypebind">Data type bind support</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-decfloat-support"><a class="anchor" href="#ref-decfloat-support"></a>12.4.4. DECFLOAT support</h4>
<div class="paragraph">
<p>Jaybird 4 introduced support for the <code>DECFLOAT</code> datatype.
The 'default' object type for <code>DECFLOAT</code> is a <code>java.math.BigDecimal</code>, but conversion from and to the following datatypes is supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.math.BigDecimal</code> (see note <a href="#decfloat-note-1">1</a>)</p>
</li>
<li>
<p><code>byte</code> (valid range -128 to 127(!); see notes <a href="#decfloat-note-2">2</a>, <a href="#decfloat-note-3">3</a>)</p>
</li>
<li>
<p><code>short</code> (valid range -32768 to 32767; see note <a href="#decfloat-note-3">3</a>)</p>
</li>
<li>
<p><code>int</code> (valid range -2<sup>31</sup> to 2<sup>31</sup>-1; see note <a href="#decfloat-note-3">3</a>)</p>
</li>
<li>
<p><code>long</code> (valid range -2<sup>63</sup> to 2<sup>63</sup>-1; see notes <a href="#decfloat-note-3">3</a>, <a href="#decfloat-note-4">4</a>)</p>
</li>
<li>
<p><code>float</code> (valid range -1 * Float.MAX_VALUE to Float.MAX_VALUE; see notes <a href="#decfloat-note-5">5</a>, <a href="#decfloat-note-6">6</a>, <a href="#decfloat-note-7">7</a>, <a href="#decfloat-note-8">8</a>, <a href="#decfloat-note-9">9</a>)</p>
</li>
<li>
<p><code>double</code> (valid range -1 * Double.MAX_VALUE to Double.MAX_VALUE; see notes <a href="#decfloat-note-6">6</a>, <a href="#decfloat-note-7">7</a>, <a href="#decfloat-note-8">8</a>, <a href="#decfloat-note-9">9</a>)</p>
</li>
<li>
<p><code>boolean</code> (see notes <a href="#decfloat-note-10">10</a>, <a href="#decfloat-note-11">11</a>)</p>
</li>
<li>
<p><code>java.lang.String</code> (see notes <a href="#decfloat-note-12">12</a>, <a href="#decfloat-note-13">13</a>, <a href="#decfloat-note-14">14</a>)</p>
</li>
<li>
<p><code>java.math.BigInteger</code> (see notes <a href="#decfloat-note-15">15</a>, <a href="#decfloat-note-16">16</a>)</p>
</li>
<li>
<p><code>org.firebirdsql.extern.decimal.Decimal32/64/128</code> (see notes <a href="#decfloat-note-17">17</a>, <a href="#decfloat-note-18">18</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>DECFLOAT</code> type is not yet defined in the JDBC specification.
For the time being, Jaybird defines a Jaybird specific type code with value <code>-6001</code>.
This value is available through constant <code>org.firebirdsql.jdbc.JaybirdTypeCodes.DECFLOAT</code>, or&#8201;&#8212;&#8201;for JDBC 4.2 and higher&#8201;&#8212;&#8201;<code>org.firebirdsql.jdbc.JaybirdType.DECFLOAT</code>, which is an enum implementing <code>java.sql.SQLType</code>.</p>
</div>
<div class="paragraph">
<p>If you need to use the type code, we suggest you use these constants.
If a <code>DECFLOAT</code> type constant gets added to the JDBC standard, we will update the value.
The enum value will be deprecated when that version of JDBC has been released.</p>
</div>
<div class="paragraph">
<p>To avoid additional dependencies, Jaybird uses a local copy of the <a href="https://github.com/FirebirdSQL/decimal-java" target="_blank" rel="noopener">FirebirdSQL/decimal-java</a> library, with a custom package <code>org.firebirdsql.extern.decimal</code>.</p>
</div>
<div class="sect4">
<h5 id="ref-decfloat-precision-range"><a class="anchor" href="#ref-decfloat-precision-range"></a>Precision and range</h5>
<div class="paragraph">
<p>The <code>DECFLOAT</code> datatype supports values with a precision of 16 or 34 decimal digits, and an exponent
<sup class="footnote">[<a id="_footnoteref_30" class="footnote" href="#_footnotedef_30" title="View footnote.">30</a>]</sup>
between -398 and 369 (<code>DECFLOAT(16)</code>), or between -6176 and 6111 (<code>DECFLOAT(34)</code>), so the minimum and maximum values are:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Min/max value</th>
<th class="tableblock halign-left valign-top">Smallest (non-zero) value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECFLOAT(16)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+/-9.9..9E+384 (16 digits)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+/-1E-398 (1 digit)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECFLOAT(34)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+/-9.9..9E+6144 (34 digits)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">+/-1E-6176 (1 digit)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When converting values from Java types to <code>DECFLOAT</code> and retrieving <code>DECFLOAT</code> values as <code>Decimal32</code> or <code>Decimal64</code>, the following rules are applied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Zero values can have a non-zero exponent, and if the exponent is out of range, the exponent value is 'clamped' to the minimum or maximum exponent supported.
This behavior is subject to change, and future releases may 'round' to exact <code>0</code> (or <code>0E0</code>)</p>
</li>
<li>
<p>Values with a precision larger than the target precision are rounded to the target precision using <code>RoundingMode.HALF_EVEN</code></p>
</li>
<li>
<p>If the magnitude (or exponent) is too low, then the following steps are applied:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Precision is reduced applying <code>RoundingMode.HALF_EVEN</code>, increasing the exponent by the reduction of precision.</p>
<div class="paragraph">
<p>An example: a <code>DECFLOAT(16)</code> stores values as an integral coefficient of 16 digits and an exponent between <code>-398</code> and <code>+369</code>.
The value <code>1.234567890123456E-394</code> or <code>1234567890123456E-409</code> is coefficient <code>1234567890123456</code> and exponent <code>-409</code>.
The coefficient is 16 digits, but the exponent is too low by 11.</p>
</div>
<div class="paragraph">
<p>If we sacrifice least-significant digits, we can increase the exponent, this is achieved by dividing the coefficient by 10<sup>11</sup> (and rounding) and increasing the exponent by 11.
We get coefficient = round(1234567890123456 / 10<sup>11</sup>) = 12346 and exponent = -409 + 11 = -398.</p>
</div>
<div class="paragraph">
<p>The resulting value is now <code>12346E-398</code> or <code>1.2346E-394</code>, or in other words, we sacrificed precision to make the value fit.</p>
</div>
</li>
<li>
<p>If after the previous step, the magnitude is still too low, we have what is called an underflow, and the value is truncated to 0 with the minimum exponent and preserving sign, e.g. for <code>DECFLOAT(16)</code>, the value will become +0E+398 or -0E-398 (see note <a href="#decfloat-note-19">19</a>).
Technically, this is just a special case of the previous step.</p>
</li>
</ol>
</div>
</li>
<li>
<p>If the magnitude (or exponent) is too high, then the following steps are applied:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the precision is less than maximum precision, and the difference between maximum precision and actual precision is larger than or equal to the difference between the actual exponent and the maximum exponent, then the precision is increased by adding zeroes as least-significant digits and decreasing the exponent by the number of zeroes added.</p>
<div class="paragraph">
<p>An example: a <code>DECFLOAT(16)</code> stores values as an integral coefficient of 16 digits and an exponent between <code>-398</code> and <code>+369</code>.
The value <code>1E+384</code> is coefficient <code>1</code> with exponent <code>384</code>.
This is too large for the maximum exponent, however, we have a value with a single digit, leaving us with 15 'unused' most-significant digits.</p>
</div>
<div class="paragraph">
<p>If we multiply the coefficient by 10<sup>15</sup> and subtract 15 from the exponent we get: coefficient = 1 * 10<sup>15</sup> = 1000000000000000 and exponent = 384 - 15 = 369.
And these values for coefficient and exponent are in range of the storage requirements.</p>
</div>
<div class="paragraph">
<p>The resulting value is now <code>1000000000000000E+369</code> or <code>1.000000000000000E+384</code>, or in other words, we 'increased' precision by adding zeroes as least-significant digits to make the value fit.</p>
</div>
</li>
<li>
<p>Otherwise, we have what is called an overflow, and an <code>SQLException</code> is thrown as the value is out of range.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you need other rounding and overflow behavior, make sure you round the values appropriately before you set them.</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-decfloat-traps-round"><a class="anchor" href="#ref-decfloat-traps-round"></a>Configuring decfloat traps and rounding</h5>
<div class="paragraph">
<p>To configure the server-side(!) error and rounding behaviour of the <code>DECFLOAT</code> data types, you can configure use the following connection properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>decfloatRound</code> (alias: <code>decfloat_round</code>)</p>
<div class="paragraph">
<p>Possible values: <code>ceiling</code>, <code>up</code>, <code>half_up</code> (default), <code>half_even</code>, <code>half_down</code>, <code>down</code>, <code>floor</code>, <code>reround</code></p>
</div>
</li>
<li>
<p><code>decfloatTraps</code> (alias: <code>decfloat_traps</code>)</p>
<div class="paragraph">
<p>Comma-separated list with options: <code>Division_by_zero</code> (default), <code>Inexact</code>, <code>Invalid_operation</code> (default), <code>Overflow</code> (default), <code>Underflow</code></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Configuring these options does not change driver behaviour, only server-side behaviour.</p>
</div>
</div>
<div class="sect4">
<h5 id="ref-decfloat-notes"><a class="anchor" href="#ref-decfloat-notes"></a>Notes</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="decfloat-note-1"></a><code>java.math.BigDecimal</code> is capable of representing numbers with larger precisions than <code>DECFLOAT</code>, and numbers that are out of range (too large or too small).
When performing calculations in Java, use <code>MathContext.DECIMAL64</code> (for <code>DECFLOAT(16)</code>) or <code>MathContext.DECIMAL128</code> (for <code>DECFLOAT(34)</code>) to achieve similar results in calculations as in Firebird.
Be aware there might still be differences in rounding, and the result of calculations may be out of range.</p>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p>Firebird 4.0 currently allows storing NaN and Infinity values, retrieval of these values will result in a <code>SQLException</code>, with a  <code>DecimalInconvertibleException</code> cause with details on the special.
The support for these special values is currently under discussion and may be removed in future Firebird versions.</p>
</li>
</ol>
</div>
</li>
<li>
<p><a id="decfloat-note-2"></a><code>byte</code> in Java is signed, and historically Jaybird has preserved sign when storing byte values, and it considers values outside -128 and +127 out of range.</p>
</li>
<li>
<p><a id="decfloat-note-3"></a>All integral values are&#8201;&#8212;&#8201;if within range&#8201;&#8212;&#8201;first converted to <code>long</code> using <code>BigDecimal.longValue()</code>, which discards any fractional parts (rounding by truncation).</p>
</li>
<li>
<p><a id="decfloat-note-4"></a>When storing a <code>long</code> in <code>DECFLOAT(16)</code>, rounding will be applied using <code>RoundingMode.HALF_EVEN</code> for values larger than <code>9999999999999999L</code> or smaller than <code>-9999999999999999L</code>.</p>
</li>
<li>
<p><a id="decfloat-note-5"></a><code>float</code> values are first converted to (or from) double, this may lead to small rounding differences</p>
</li>
<li>
<p><a id="decfloat-note-6"></a><code>float</code> and <code>double</code> can be fully stored in <code>DECFLOAT(16)</code> and <code>DECLOAT(34)</code>, with minor rounding differences.</p>
</li>
<li>
<p><a id="decfloat-note-7"></a>When reading <code>DECFLOAT</code> values as <code>double</code> or <code>float</code>, rounding will be applied as binary floating point types are inexact, and have a smaller precision.</p>
</li>
<li>
<p><a id="decfloat-note-8"></a>If the magnitude of the <code>DECFLOAT</code> value is too great to be represented in <code>float</code> or <code>double</code>, +Infinity or -Infinity may be returned (see <code>BigDecimal.doubleValue()</code>).
This behavior is subject to change, future releases may throw a <code>SQLException</code> instead, see also related note <a href="#decfloat-note-9">9</a>.</p>
</li>
<li>
<p><a id="decfloat-note-9"></a>Storing and retrieving values NaN, +Infinity and -Infinity are currently supported, but this may change as this doesn&#8217;t seem to be allowed by the SQL:2016 standard.</p>
<div class="paragraph">
<p>It is possible that Jaybird or Firebird will disallow storing and retrieving NaN and Infinity values in future releases, causing Jaybird to throw an <code>SQLException</code> instead.
We strongly suggest not to rely on this support for special values.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha">
<li>
<p>Firebird <code>DECFLOAT</code> currently discerns four different NaNs (+/-NaN and +/-signaling-NaN).
These are all mapped to <code>Double.NaN</code> (or <code>Float.NaN</code>), Java NaN values are mapped to +NaN in Firebird.</p>
</li>
</ol>
</div>
</li>
<li>
<p><a id="decfloat-note-10"></a>Setting <code>boolean</code> values will set <code>0</code> (or <code>0E+0</code>) for <code>false</code> and <code>1</code> (or <code>1E+0</code>) for <code>true</code>.</p>
</li>
<li>
<p><a id="decfloat-note-11"></a>Retrieving as <code>boolean</code> will return <code>true</code> for <code>1</code> (exactly <code>1E+0</code>) and <code>false</code> for <strong>all other values</strong>.
Be aware that this means that <code>1.0E+0</code> (or <code>10E-1</code>) etc will be <strong><code>false</code></strong>.</p>
<div class="paragraph">
<p>This behavior may change in the future and only allow <code>0</code> for <code>false</code> and exactly <code>1</code> for <code>true</code> and throw an <code>SQLException</code> for all other values, or maybe <code>true</code> for everything other than <code>0</code>.
In general, we advise to not use numerical types for boolean values, and especially not to retrieve the result of a calculation as a boolean value.
Instead, use a real <code>BOOLEAN</code>.</p>
</div>
</li>
<li>
<p><a id="decfloat-note-12"></a>Setting values as <code>String</code> is supported following the format rules of <code>new BigDecimal(String)</code>, with extra support for special values <code>+NaN</code>, <code>-NaN</code>, <code>+sNaN</code>, <code>-sNaN</code>, <code>+Infinity</code> and <code>-Infinity</code> (case-insensitive).
Other non-numerical strings throw an <code>SQLException</code> with a <code>NumberFormatException</code> as cause.
Out of range values are handled as described in <a href="#ref-decfloat-precision-range">Precision and range</a>.</p>
</li>
<li>
<p><a id="decfloat-note-13"></a>Getting values as <code>String</code> will be equivalent to <code>BigDecimal.toString()</code>, with extra support for the special values mentioned in the previous note.</p>
</li>
<li>
<p><a id="decfloat-note-14"></a>As mentioned in earlier notes, support for the special values is under discussion, and may change in future versions of Firebird and/or Jaybird.</p>
</li>
<li>
<p><a id="decfloat-note-15"></a>Getting as <code>BigInteger</code> will behave as <code>BigDecimal.toBigInteger()</code>, which discards the fractional part (rounding by truncation), and may add <code>(-1 * scale - precision)</code> least-significant zeroes if the scale exceeds precision.
Be aware that use of <code>BigInteger</code> for large values may result in significant memory consumption.</p>
</li>
<li>
<p><a id="decfloat-note-16"></a>Setting as <code>BigInteger</code> will lose precision for values with more digits than the target type.
It applies the rules described in <a href="#ref-decfloat-precision-range">Precision and range</a>.</p>
</li>
<li>
<p><a id="decfloat-note-17"></a>Values can also be set and retrieved as types <code>Decimal32</code>, <code>Decimal64</code> and <code>Decimal128</code> from the <code>org.firebirdsql.extern.decimal</code> package.
Where <code>Decimal64</code> exactly matches the <code>DECFLOAT(16)</code> protocol format, and <code>Decimal128</code> the <code>DECFLOAT(34)</code> protocol format.
Be aware that this is an implementation detail that might change in future Jaybird versions (both in terms of support for these types, and in terms of the interface (API) of these types).</p>
</li>
<li>
<p><a id="decfloat-note-18"></a>Setting a <code>Decimal128</code> on a <code>DECFLOAT(16)</code>, or a <code>Decimal32</code> on a <code>DECFLOAT(16)</code> or <code>DECFLOAT(34)</code>, or retrieving a <code>Decimal32</code> from a <code>DECFLOAT(16)</code> or <code>DECFLOAT(34)</code>, or a <code>Decimal64</code> from a <code>DECFLOAT(34)</code> will apply the rules described in <a href="#ref-decfloat-precision-range">Precision and range</a>.</p>
</li>
<li>
<p><a id="decfloat-note-19"></a>Zero values can have a sign (e.g. <code>-0</code> vs <code>0</code> (<code>+0</code>)), this can only be set or retrieved using <code>String</code> or the <code>DecimalXX</code> types, or the result of rounding.
This behaviour is subject to change, and future releases may 'round' to <code>0</code> (a.k.a. <code>+0</code>).</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-decimal"><a class="anchor" href="#ref-decimal"></a>12.5. Exact numeric types DECIMAL/NUMERIC</h3>
<div class="paragraph">
<p>The JDBC types <code>DECIMAL</code> and <code>NUMERIC</code> are supported by Firebird and Jaybird and map to <code>java.math.BigDecimal</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Behaviour in Firebird of <code>NUMERIC</code> is closer to the SQL standard <code>DECIMAL</code> behaviour than the SQL standard <code>NUMERIC</code> behaviour.
The precision specified is the minimum precision, not the exact precision.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-decimal-precision-range"><a class="anchor" href="#ref-decimal-precision-range"></a>12.5.1. Precision and range</h4>
<div class="paragraph">
<p>In Firebird 3.0 and earlier, the maximum precision of <code>DECIMAL</code> and <code>NUMERIC</code> is 18 with a maximum scale of 18.<sup class="footnote">[<a id="_footnoteref_31" class="footnote" href="#_footnotedef_31" title="View footnote.">31</a>]</sup></p>
</div>
<div class="paragraph">
<p><em class="since">Firebird 4.0</em> In Firebird 4.0 the maximum precision and scale of <code>DECIMAL</code> and <code>NUMERIC</code> have been raised to 38.
Any <code>NUMERIC</code> or <code>DECIMAL</code> with a precision between 19 and 38 will allow storage up to a precision of 38.<sup class="footnote">[<a id="_footnoteref_32" class="footnote" href="#_footnotedef_32" title="View footnote.">32</a>]</sup></p>
</div>
<div class="paragraph">
<p>In the implementation in Firebird, this extended precision is backed by an Int128.</p>
</div>
<div class="paragraph">
<p>Values set on a field or parameter will be rounded to the target scale of the field using <code>RoundingMode.HALF_EVEN</code>.
Values exceeding a precision of 38 after rounding will be rejected with a <code>TypeConversionException</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-int128"><a class="anchor" href="#ref-int128"></a>12.6. Type INT128</h3>
<div class="paragraph">
<p><em class="since">Firebird 4.0</em></p>
</div>
<div class="paragraph">
<p>Firebird 4.0 introduced the non-standard type <code>INT128</code>, a signed 128 bit number.</p>
</div>
<div class="sect3">
<h4 id="_support_for_int128"><a class="anchor" href="#_support_for_int128"></a>12.6.1. Support for INT128</h4>
<div class="paragraph">
<p><em class="since">Jaybird 4.0.1</em></p>
</div>
<div class="paragraph">
<p>Jaybird 4.0.1 introduced support for the <code>INT128</code> type.
Jaybird 4.0.0 will also be able to handle the type, but does not formally identify it as <code>INT128</code>.</p>
</div>
<div class="paragraph">
<p>As JDBC does not define an <code>INT128</code> type, Jaybird maps the Firebird type <code>INT128</code> to the JDBC type <code>NUMERIC</code> with precision of 38.
This way most tools should be able to handle the full range of values without issue.</p>
</div>
<div class="paragraph">
<p>For details on numeric, see <a href="#ref-decimal">Exact numeric types DECIMAL/NUMERIC</a>.</p>
</div>
<div class="paragraph">
<p>The introduction of this type is specified by <a href="https://github.com/FirebirdSQL/jaybird/blob/master/devdoc/jdp/jdp-2020-08-int128-support.md" target="_blank" rel="noopener">jdp-2020-08 Int128 support</a>.</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="_appendices" class="sect0"><a class="anchor" href="#_appendices"></a>Appendices</h1>
<div class="sect1">
<h2 id="connectionproperties"><a class="anchor" href="#connectionproperties"></a>Appendix A: Extended connection properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jaybird has a number of connection properties that can be used to configure a connection.</p>
</div>
<div class="paragraph">
<p>This appendix provides a list of most connection properties and a short explanation to each of them.
The properties listed below are usable as JDBC connection properties.</p>
</div>
<div class="paragraph">
<p>The properties marked as <em>boolean property</em> can be included in the JDBC URL with values <code>true</code>, <code>false</code> (<em class="since">Jaybird 5</em>), but also without a value, or with an empty value (which will both signify <code>true</code>).
For readability, we suggest that you only specify these properties explicitly when you want to enable or disable them, and if you do, to use explicit values like <code>true</code> or <code>false</code>.</p>
</div>
<div class="paragraph">
<p>In Jaybird 4 and earlier, the default for all <em>boolean</em> properties is <code>false</code>.<br>
In Jaybird 5 and higher, the default of <em>boolean</em> properties varies (but unless explicitly mentioned, the default is <code>false</code>).</p>
</div>
<div class="paragraph">
<p>A subset of these properties is also exposed in the <code>javax.sql.DataSource</code> implementations in Jaybird.
When using data sources, unexposed properties can be set using <code>setNonStandardProperty</code>.</p>
</div>
<div class="sect2">
<h3 id="connectionproperties-auth"><a class="anchor" href="#connectionproperties-auth"></a>A.1. Authentication and security properties</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Connection property (+ aliases)</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>user</code><br>
<code>userName</code>, <code>user_name</code>, <code>isc_dpb_user_name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the user for the connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>password</code><br>
<code>isc_dpb_password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password corresponding to the specified user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>roleName</code><br>
<code>sqlRole</code>, <code>sql_role_name</code>, <code>isc_dpb_sql_role_name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the SQL role for the specified connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>authPlugins</code><br>
<code>auth_plugin_list</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
The comma-separated list of authentication plugins to try.
See <a href="#ref-auth-plugins">Authentication plugins</a> for more information.<br>
Default: <code>Srp256,Srp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>wireCrypt</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property.
Allowed values: <code>DEFAULT</code>, <code>ENABLED</code>, <code>REQUIRED</code>, <code>DISABLED</code> (case-insensitive).
Configures Firebird 3.0 and higher wire encryption behaviour.
See <a href="#ref-wirecrypt">Wire encryption support</a> for more information.<br>
Default: <code>DEFAULT</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>dbCryptConfig</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Configures Firebird 3.0 and higher database encryption support.
See <a href="#ref-dbcrypt">Database encryption support</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>processId</code><br>
<code>process_id</code>, <code>isc_dpb_process_id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the process id reported to Firebird.
See <a href="#ref-processinfo">Process information</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>processName</code><br>
<code>process_name</code>, <code>isc_dpb_process_name</code>, <code>ApplicationName</code> (<em class="since">Jaybird 6</em>), <code>applicationName</code> (<em class="since">Jaybird 6</em>)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the process name reported to Firebird.
See <a href="#ref-processinfo">Process information</a> for more information.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="connectionproperties-other"><a class="anchor" href="#connectionproperties-other"></a>A.2. Other properties</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Connection property (+ aliases)</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>asyncFetch</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 6</em>).
Boolean property.
Enables/disables async fetching for pure Java connections.
Default is <code>true</code>.
See <a href="#ref-async-fetch">Async fetch</a> for more information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>encoding</code><br>
<code>lc_ctype</code>, <code>isc_dpb_lc_ctype</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Character encoding for the connection using the Firebird character set name.
This property tells the database server the encoding in which it expects character content.
For a list of the available encodings see <a href="#_available_encodings">Available Encodings</a>.<br>
In general, only specify <code>charSet</code> <em>or</em> <code>encoding</code>, not both.<br>
Default: <code>NONE</code> (unless <code>charSet</code> is specified).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>charSet</code><br>
<code>localEncoding</code>, <code>charset</code> (<em class="since">Jaybird 5</em>)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Character set for the connection using Java character set name.
Similar to the previous property, but instead of Firebird-specific name accepts a Java character set name.<br>
In general, only specify <code>charSet</code> <em>or</em> <code>encoding</code>, not both.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>sqlDialect</code><br>
<code>dialect</code>, <code>sql_dialect</code>, <code>isc_dpb_sql_dialect</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SQL dialect, can be 1, 2 or 3.<br>
Default: <code>3</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>defaultHoldable</code><br>
<code>defaultResultSetHoldable</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Boolean property.
Set result sets to be holdable by default.
A workaround for applications with incorrect assumptions on result sets in auto-commit mode.
See <a href="#ref-defaultholdable">Default holdable result sets</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>useFirebirdAutocommit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Boolean property.
Enable experimental feature to use Firebird auto-commit for JDBC auto-commit mode.
<strong>Do not use this unless you really know what you&#8217;re doing.</strong>
See <a href="#ref-firebirdautocommit">Firebird auto commit mode (experimental)</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>generatedKeysEnabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Configure generated keys support behaviour.
See <a href="#ref-generatedkeys-config">Configuring generated keys support</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isolation</code><br>
<code>defaultIsolation</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property.
Specify the default transaction isolation level.
Accepted values are: <code>TRANSACTION_NONE</code>, <code>TRANSACTION_READ_UNCOMMITTED</code>, <code>TRANSACTION_READ_COMMITTED</code>, <code>TRANSACTION_REPEATABLE_READ</code>, <code>TRANSACTION_SERIALIZABLE</code> (case-sensitive).
Although <code>TRANSACTION_NONE</code> and <code>TRANSACTION_READ_UNCOMMITTED</code> are allowed values, these behave the same as <code>TRANSACTION_READ_COMMITTED</code>.<br>
Default: <code>TRANSACTION_READ_COMMITTED</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>socketBufferSize</code><br>
<code>socket_buffer_size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Size in bytes of the socket buffer.
Only has effect on Type 4 (pure Java) connections.
Can be used for performance tuning, or when the default socket buffer provided by the JVM or OS is not correct (e.g. too small).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>blobBufferSize</code><br>
<code>blob_buffer_size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Size in bytes of the buffer used to transfer BLOB content.
Specifying a size greater than 65535 may result in additional server roundtrips per read, but may also waste memory for larger buffers than used in some cases.
Values lower than 512 will use 512 (<em class="since">Jaybird 6</em>).<br>
Default: <code>16384</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>maxInlineBlobSize</code><br>
<code>max_inline_blob_size</code>, <code>isc_dpb_max_inline_blob_size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum size in bytes of inline blobs (<em class="since">Jaybird 5.0.8/6.0.2</em> <em class="since">Firebird 5.0.3</em>).
A value of <code>0</code> disables transmission of inline blobs.
See <a href="#ref-inline-blob">Inline blobs</a> for more information.<br>
Default: <code>65535</code>, maximum value: <code>65535</code><sup class="footnote">[<a id="_footnoteref_33" class="footnote" href="#_footnotedef_33" title="View footnote.">33</a>]</sup></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>maxBlobCacheSize</code><br>
<code>max_blob_cache_size</code>, <code>isc_dpb_max_blob_cache_size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum size in bytes&#8201;&#8212;&#8201;per connection&#8201;&#8212;&#8201;of the inline blob cache (<em class="since">Jaybird 5.0.8/6.0.2</em> <em class="since">Firebird 5.0.3</em>).
A value of <code>0</code> disables the cache.
Disabling the cache does not disable transmission of inline blobs: set <code>maxInlineBlobSize</code> to <code>0</code> to disable transmission.
See <a href="#ref-inline-blob">Inline blobs</a> for more information.<br>
Default: <code>10485760</code> (10 MiB)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>soTimeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Socket blocking timeout in milliseconds.
Only has effect on Type 4 (pure Java) connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connectTimeout</code><br>
<code>connect_timeout</code>, <code>isc_dpb_connect_timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connect timeout in seconds.
For Type 4 (pure Java) connections, the connect timeout will detect unreachable hosts.
For Type 2 (native) connections, the connect timeout works as the DPB item <code>isc_dpb_connect_timeout</code> which only works after connecting to the server for the <code>op_accept</code> phase of the protocol.
This means that for native connections the connect timeout will not detect unreachable hosts within the timeout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>wireCompression</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property (<em class="since">Firebird 3.0</em>).
Boolean property.
Enables zlib wire compression.
See <a href="#ref-wirecompression">Wire compression</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>columnLabelForName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Boolean property.
Backwards-compatible behaviour of <code>getColumnName()</code> (return the column label instead of the column name).
Don&#8217;t set the property or set it to <code>false</code> for JDBC-compliant behaviour (recommended).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>useStreamBlobs</code><br>
<code>use_stream_blobs</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property.
Boolean property.
BLOBs are created as stream BLOBs.<br>
Default: Jaybird 5 and higher: <code>true</code> (stream BLOBS)<br>
Jaybird 4 and earlier: <code>false</code> (segmented BLOBs)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ignoreProcedureType</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property.
Boolean property.
Value <code>true</code> disables usage of procedure type metadata to decide to use <code>SELECT</code> for selectable procedure instead of <code>EXECUTE PROCEDURE</code>.
See <a href="#ref-callable-ignore-proctype">Connection property ignoreProcedureType</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>scrollableCursor</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 5</em> <em class="since">Firebird 5.0</em>).
Allowed values: <code>EMULATED</code>, <code>SERVER</code> (case-insensitive)
Configures use of server-side scrollable cursors (Firebird 5.0 and higher, pure Java connections only).
See <a href="#ref-scrollable-cursor">Connection property scrollableCursor</a> for more information.<br>
Default: <code>EMULATED</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>useServerBatch</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 5</em> <em class="since">Firebird 4.0</em>).
Boolean property.
Value <code>true</code> enables server-side batch if available (Firebird 4.0 and higher, pure Java connection only).
Set to <code>false</code> to always use emulated batch updates.
See <a href="#ref-batch-use-server-batch">Connection property useServerBatch</a> for more information.<br>
Default value: <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>serverBatchBufferSize</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 5</em> <em class="since">Firebird 4.0</em>).
Size in bytes of the server-side batch buffer.
Value <code>&lt; 0</code>&#8201;&#8212;&#8201;server-side default, <code>0</code>&#8201;&#8212;&#8201;server-side maximum, <code>&gt; 0</code>&#8201;&#8212;&#8201;size (capped at server-side maximum)
See <a href="#ref-batch-server-batch-buffer-size">Connection property serverBatchBufferSize</a> for more information.<br>
Default value: <code>0</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>dataTypeBind</code><br>
<code>set_bind</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines data type bind from one type to a different type. (<em class="since">Firebird 4.0</em>)
Multiple bind definitions are separated by semicolons.
When used in a JDBC url, the semicolon must be escaped using <code>%3B</code>.
See <a href="#ref-datatypebind">Data type bind support</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>sessionTimeZone</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configures the session time zone.
In Jaybird 3, only configures the Firebird 4 server-side session time zone.
In Jaybird 4 and higher, also configures the time zone used for legacy datetime conversion on all Firebird versions.
See <a href="#ref-datetime-sessiontimezone">Connection property sessionTimeZone</a> for more information.<br>
Default: the JVM default time zone (Jaybird 4 or higher), or not set (Jaybird 3 or earlier)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>decfloatRound</code><br>
<code>decfloat_round</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines server-side rounding behaviour for <code>DECFLOAT</code> data types (<em class="since">Firebird 4.0</em>)
Possible values: <code>ceiling</code>, <code>up</code>, <code>half_up</code> (default), <code>half_even</code>, <code>half_down</code>, <code>down</code>, <code>floor</code>, <code>reround</code>
See <a href="#ref-decfloat-traps-round">Configuring decfloat traps and rounding</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>decfloatTraps</code><br>
<code>decfloat_traps</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines server-side error behaviour for <code>DECFLOAT</code> data types (<em class="since">Firebird 4.0</em>)
Comma-separated list with options: <code>Division_by_zero</code> (default), <code>Inexact</code>, <code>Invalid_operation</code> (default), <code>Overflow</code> (default), <code>Underflow</code>
See <a href="#ref-decfloat-traps-round">Configuring decfloat traps and rounding</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>useStandarUdf</code><br>
<code>use_standard_udf</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property (<em class="until">Jaybird 5</em>).
Boolean property.
Tells the JDBC driver to assume that standard UDF library is registered in the database when converting escaped function calls.
With recent versions of Firebird, it is advisable to not specify this property and rely on the built-in functions instead.
See <a href="#jdbcescape">Supported JDBC Scalar Functions</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>timestampUsesLocalTimezone</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property (<em class="until">Jaybird 6</em>).
Boolean property.
Changes how <code>getTime</code>/<code>getTimestamp</code> methods accepting a <code>java.util.Calendar</code> apply the calendar offset in calculations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>num_buffers</code><br>
<code>isc_dpb_num_buffers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of database pages that will be cached.
Overrides server or database default for this specific connection.
Use with care to avoid using an excessive amount of memory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>set_db_readonly</code><br>
<code>isc_dpb_set_db_readonly</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean property.
Set the database into read-only state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>set_db_sql_dialect</code><br>
 <code>isc_dpb_set_db_sql_dialect</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the SQL dialect of the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>set_db_charset</code><br>
<code>isc_dpb_set_db_charset</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the default character set of the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enableProtocol</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird specific property (<em class="since">Jaybird 6</em>).
Enable unsupported protocol versions, if available.
Comma-separated list of protocol versions to enable in addition to the supported protocol versions.
The value <code>"*"</code> will enable all available protocol versions.
See <a href="#ref-enable-protocol">Enabling unsupported protocol versions</a> for more information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>parallelWorkers</code><br>
<code>parallel_workers</code>, <code>isc_dpb_parallel_workers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of parallel workers to use (<em class="since">Jaybird 5.0.2</em> <em class="since">Firebird 5.0</em>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>nativeLibraryPath</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 6</em>).</p>
</div>
<div class="paragraph">
<p>Specifies a directory to try and load the client library for native (<code>fbclient</code>) or embedded (<code>fbembed</code> or <code>fbclient</code>) connections.
If a file name is specified instead of a directory name, the parent directory will be used.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This property only works for the <strong>first</strong> native or embedded connection (to a database or service) created inside a JVM.
Any subsequent connection uses the library that was loaded by the first connection.</p>
</div>
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>useCatalogAsPackage</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 6</em> <em class="since">Firebird 3.0</em>).
Boolean property.
Enables support for reporting database metadata information on packages, and functions and stored procedures in packages.
See <a href="#ref-catalog-as-package">Opt-in feature for package information in DatabaseMetaData</a> for more information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>allowTxStmts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 6</em>).
Boolean property.
Enables support for executing <code>COMMIT [WORK]</code>, <code>ROLLBACK [WORK]</code> and <code>SET TRANSACTION</code>.
Default is <code>false</code>.
See <a href="#ref-allowtxstmts">Connection property allowTxStmts</a> for more information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>extendedMetadata</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 5.0.5</em>).
Boolean property.
Enables support for retrieving extended metadata.
Default is <code>true</code>.
See <a href="#ref-extendedmetadata">Connection property extendedMetadata</a> for more information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>createDatabaseIfNotExist</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 6</em>).
Boolean property.
Attempts to create a database if it does not exist.
Default is <code>false</code>.
See <a href="#ref-create-database-if-not-exist">Create database if it does not exist</a> for more information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>reportSQLWarnings</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 6</em>).
Possible values (case-insensitive): <code>ALL</code> (default), <code>NONE</code>.
Can be used to disable reporting of <code>SQLWarning</code>s.
See <a href="#ref-report-sql-warnings">Reporting of <code>SQLWarning</code>s</a> for more information.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>socketFactory</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Jaybird specific property (<em class="since">Jaybird 6</em>).
Sets a custom socket factory for pure Java connections.
See <a href="#ref-socket-factory">Custom socket factory</a> for more information.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition, Jaybird allows using arbitrary Database Parameters Block entries as connection properties (provided they are defined in Jaybird&#8217;s <code>DpbItems</code> and <code>SpbItems</code> (<em class="since">Jaybird 5</em>), or <code>ISCConstants</code> (<em class="until">Jaybird 5</em>)).
The current Firebird API has over 100 DPB parameters, however only few of them are interesting for regular users.
If a DPB item called <code>isc_dpb_XXX</code> exists, then Jaybird allows these to be specified as <code>isc_dpb_XXX</code> and <code>XXX</code>.
By default properties are mapped as string DPB items.
If a DPB item requires another type, it will need to be explicitly defined in Jaybird.</p>
</div>
</div>
<div class="sect2">
<h3 id="connectionproperties-isolation-levels"><a class="anchor" href="#connectionproperties-isolation-levels"></a>A.3. Transaction isolation levels</h3>
<div class="paragraph">
<p>It is possible to redefine the transaction isolation levels through connection properties.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Connection property</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TRANSACTION_READ_COMMITTED</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specify the definition of transaction isolation level <code>READ_COMMITTED</code>.<br>
Default: <code>isc_tpb_read_committed,isc_tpb_rec_version,isc_tpb_write,isc_tpb_wait</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TRANSACTION_REPEATABLE_READ</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify the definition of transaction isolation level <code>REPEATABLE_READ</code>.<br>
Default: <code>isc_tpb_concurrency,isc_tpb_write,isc_tpb_wait</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>TRANSACTION_SERIALIZABLE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify the definition of transaction isolation level <code>TRANSACTION_SERIALIZABLE</code>.<br>
Default: <code>isc_tpb_consistency,isc_tpb_write,isc_tpb_wait</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For data sources, this feature is exposed using a definition properties file and the <code>setTpbMapping</code> property.
See <a href="#transactions-isolation-levels">Transaction Isolation Levels</a> for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="systemproperties"><a class="anchor" href="#systemproperties"></a>Appendix B: System properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jaybird provides a number of system properties to control global behaviour of Jaybird.</p>
</div>
<div class="sect2">
<h3 id="systemproperties-logging"><a class="anchor" href="#systemproperties-logging"></a>B.1. Logging</h3>
<div class="paragraph">
<p><em class="until">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>To configure logging, the following system properties are available.
See <a href="#ref-logging">Logging</a> for details.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.forceConsoleLogger</code></dt>
<dd>
<p>Set to true to force logging to console (<code>System.out</code> for info, <code>System.err</code> for warn, error and fatal) instead of default <code>java.util.logging</code></p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.disableLogging</code></dt>
<dd>
<p>Set to true to disable logging</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.loggerImplementation</code></dt>
<dd>
<p>Fully-qualified name of <code>org.firebirdsql.logging.Logger</code> implementation to use for logging</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These properties need to be set before Jaybird is loaded and used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>These properties are not available in Jaybird 6 or later.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-processinfo"><a class="anchor" href="#systemproperties-processinfo"></a>B.2. Process information</h3>
<div class="paragraph">
<p>For Firebird 2.1 and higher, Jaybird can provide Firebird with process information.
This information can be specified in connection properties, or globally using the following system properties.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.processName</code></dt>
<dd>
<p>Process name to send to Firebird</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.pid</code></dt>
<dd>
<p>PID to send to Firebird (must be a valid integer)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The property values are read for each connect, so the value can be changed at any time.</p>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-charset"><a class="anchor" href="#systemproperties-charset"></a>B.3. Character set defaults</h3>
<div class="paragraph">
<p>The following system properties control character set behaviour for connections.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.defaultConnectionEncoding</code></dt>
<dd>
<p>Firebird character set name to use as connection character set when no explicit connection character set is configured (defaults to <code>NONE</code> when not set)</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.requireConnectionEncoding</code></dt>
<dd>
<p>Set to true to disallow connections without an explicit connection character set.
This property will have no effect if <code>org.firebirdsql.jdbc.defaultConnectionEncoding</code> has been set.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The property values are read for each connect, so the value can be changed at any time.</p>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-default-async-fetch"><a class="anchor" href="#systemproperties-default-async-fetch"></a>B.4. Default <code>asyncFetch</code> value</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.defaultAsyncFetch</code></dt>
<dd>
<p>Configures the default value for the <code>asyncFetch</code> connection property.
See <a href="#ref-async-fetch">Async fetch</a> for more information.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-default-enable-protocol"><a class="anchor" href="#systemproperties-default-enable-protocol"></a>B.5. Default <code>enableProtocol</code> value</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.defaultEnableProtocol</code></dt>
<dd>
<p>Configures the default value for the <code>enableProtocol</code> connection property.
See <a href="#ref-enable-protocol">Enabling unsupported protocol versions</a> for more information.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-default-inline-blob"><a class="anchor" href="#systemproperties-default-inline-blob"></a>B.6. Default inline blob property values</h3>
<div class="paragraph">
<p><em class="since">Jaybird 5.0.8/6.0.2</em><br>
<em class="since">Firebird 5.0.3</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.defaultMaxInlineBlobSize</code></dt>
<dd>
<p>Configures the default value for the <code>maxInlineBlobSize</code> connection property.</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.defaultMaxBlobCacheSize</code></dt>
<dd>
<p>Configures the default value for the <code>maxBlobCacheSize</code> connection property.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>See also <a href="#ref-inline-blob">Inline blobs</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-default-report-sql-warnings"><a class="anchor" href="#systemproperties-default-report-sql-warnings"></a>B.7. Default <code>reportSQLWarnings</code> value</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jdbc.defaultReportSQLWarnings</code></dt>
<dd>
<p>Configures the default value for the <code>reportSQLWarnings</code> connection property.
See <a href="#ref-report-sql-warnings">Reporting of <code>SQLWarning</code>s</a> for more information.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-wire-buffers"><a class="anchor" href="#systemproperties-wire-buffers"></a>B.8. Wire protocol buffer sizes</h3>
<div class="paragraph">
<p><em class="since">Jaybird 6</em></p>
</div>
<div class="paragraph">
<p>The following system properties control the sizes of a number of buffers used by Jaybird&#8217;s wire protocol implementation.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.wire.deflateBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for deflate (compression).
Has a minimum size of 512 and a default value of 8192.</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.wire.inflateBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for inflate (decompression).
Has a minimum size of 512 and a default value of 8192.</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.wire.decryptBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for decryption.
Has a minimum size of 512 and a default value 8192.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As the decryption input buffer determines the size of the decryption output buffer, the actual allocation is up to twice the specified value.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.wire.inputBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for reading data from the socket.
Has a minimum size of 1024 and a default value of 16384.</p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This property should not be confused with the socket buffer size (configurable with the <code>socketBufferSize</code> <em>connection property</em>).
Setting this value higher than <code>socketBufferSize</code> is unlikely to have any benefits.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.wire.outputBufferSize</code></dt>
<dd>
<p>Buffer size in bytes for writing data.
Has a minimum size of 1024 and a default value of 32767.</p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This property should not be confused with the socket buffer size (configurable with the <code>socketBufferSize</code> <em>connection property</em>).
Contrary to the input buffer size, setting it higher than <code>socketBufferSize</code> might have performance benefits.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These properties need to be set before Jaybird is loaded and used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The minimum sizes and default values should be considered an implementation detail and might change in a future major version.</p>
</div>
<div class="paragraph">
<p>The &#8220;deflate&#8221; and &#8220;inflate&#8221; buffers are only used when wire compression is enabled.
The &#8220;decrypt&#8221; buffer is only applied when wire encryption is used (the default with Firebird 3.0 and higher).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The order of buffers for input is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Jaybird &#8656; [inflate &#8656;] [decrypt &#8656;] input &#8656; socket</pre>
</div>
</div>
<div class="paragraph">
<p>The order of buffers for output is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Jaybird &#8658; output [&#8658; deflate] &#8658; socket</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-other"><a class="anchor" href="#systemproperties-other"></a>B.9. Other properties</h3>
<div class="paragraph">
<p>The following system properties control other global behaviour of Jaybird.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jna.syncWrapNativeLibrary</code></dt>
<dd>
<p>Set to true to add a synchronization proxy around the native client library.</p>
<div class="paragraph">
<p>This can be used to address thread-safety issues with older client libraries (Firebird 2.1 and older, as far as we know).</p>
</div>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.datatypeCoderCacheSize</code></dt>
<dd>
<p>Integer value for the number of encoding specific data type coders cached (default and minimum is 1).
Setting to a higher value may improve performance, most common use case is connection character set <code>NONE</code> with a database that uses more than one character set for its columns.
Jaybird will log a warning (<em>"Cleared encoding specific datatype coder cache [..]"</em>) when the cache size was exceeded.</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.nativeResourceShutdownDisabled</code></dt>
<dd>
<p>Set to true to disable automatic shutdown and unload of native libraries and other native resources.
Normally you should only use this if the automatic shutdown misbehaves and causes application errors.
If you need to set this to true, we&#8217;d appreciate it if you post a message to the <a href="https://groups.google.com/g/firebird-java" target="_blank" rel="noopener">firebird-java Google Group</a> with details on why you needed to enable this, so we can improve or fix this feature.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>These properties need to be set before Jaybird is loaded and used.
Technically, <code>org.firebirdsql.jna.syncWrapNativeLibrary</code> is dynamic, but a native library will usually be loaded once.</p>
</div>
</div>
<div class="sect2">
<h3 id="systemproperties-java"><a class="anchor" href="#systemproperties-java"></a>B.10. Useful Java system properties</h3>
<div class="paragraph">
<p>The following Java system properties are relevant for Jaybird.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>jdk.net.useFastTcpLoopback</code></dt>
<dd>
<p><em class="since">Firebird 3.0.2</em> <em class="until">Firebird 5.0</em> <em class="since">Jave 8 update 60</em> <em class="since">Windows 8 / Windows Server 2012</em>
Set to true on Windows to enable &#8220;TCP Loopback Fast Path&#8221; (<code>SIO_LOOPBACK_FAST_PATH</code> socket option).
&#8220;TCP Loopback Fast Path&#8221; can improve performance for localhost connections.<br>
Java only has an 'all-or-nothing' support for the &#8220;TCP Loopback Fast Path&#8221;, so Jaybird cannot enable this for you: you must specify this property on JVM startup.
This has the benefit that this works for all Jaybird versions, as long as you use Java 8 update 60 or higher (and Firebird 3.0.2 or higher).</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Microsoft has deprecated the <code>SIO_LOOPBACK_FAST_PATH</code> and recommends not to use it.</p>
</div>
<div class="paragraph">
<p>Support was removed in Firebird 5.0.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="datatypeconversion"><a class="anchor" href="#datatypeconversion"></a>Appendix C: Data Type Conversion Table</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_mapping_between_jdbc_firebird_and_java_types"><a class="anchor" href="#_mapping_between_jdbc_firebird_and_java_types"></a>C.1. Mapping between JDBC, Firebird and Java Types</h3>
<div class="paragraph">
<p>The below table describes a mapping of the JDBC data types defined in <code>java.sql.Types</code> class to the Firebird data types.
Also, for each JDBC data type a class instance of which is returned by <code>ResultSet.getObject</code> method is provided.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JDBC Type</th>
<th class="tableblock halign-left valign-top">Firebird Type</th>
<th class="tableblock halign-left valign-top">Java Object Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHAR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHAR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LONGVARCHAR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BLOB SUB_TYPE TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NUMERIC</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NUMERIC</code><br>
<code>INT128</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.math.BigDecimal</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECIMAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECIMAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.math.BigDecimal</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SMALLINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SMALLINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INTEGER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INTEGER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BIGINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BIGINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><sup class="footnote">[<a id="_footnoteref_34" class="footnote" href="#_footnotedef_34" title="View footnote.">34</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOAT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOAT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Double</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DOUBLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DOUBLE PRECISION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Double</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BINARY</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>CHAR CHARACTER SET OCTETS</code><br>
<code>BINARY</code> (<em class="since">Firebird 4.0</em>)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARBINARY</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>VARCHAR CHARACTER SET OCTETS</code><br>
<code>VARBINARY</code> (<em class="since">Firebird 4.0</em>)</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LONGVARBINARY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BLOB SUB_TYPE BINARY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.sql.Date</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.sql.Time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIME_WITH_TIMEZONE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIME WITH TIME ZONE</code> (<em class="since">Firebird 4.0</em>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.time.OffsetTime</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.sql.Timestamp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMP_WITH_TIMEZONE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMP WITH TIME ZONE</code> (<em class="since">Firebird 4.0</em>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.time.OffsetDateTime</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BLOB</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BLOB SUB_TYPE &lt; 0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.sql.Blob</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BOOLEAN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BOOLEAN</code> (<em class="since">Firebird 3.0</em>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JaybirdTypeCodes.DECFLOAT</code><sup class="footnote">[<a id="_footnoteref_35" class="footnote" href="#_footnotedef_35" title="View footnote.">35</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DECFLOAT</code> (<em class="since">Firebird 4.0</em>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java.math.BigDecimal</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_data_type_conversions"><a class="anchor" href="#_data_type_conversions"></a>C.2. Data Type Conversions</h3>
<div class="paragraph">
<p>This table specifies the compatible conversions between the Firebird and
Java types.</p>
</div>
<table class="tableblock frame-all grid-all stretch wide-table">
<colgroup>
<col style="width: 21.7391%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3478%;">
<col style="width: 4.3483%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top"><code>SMALLINT</code></th>
<th class="tableblock halign-left valign-top"><code>INTEGER</code></th>
<th class="tableblock halign-left valign-top"><code>BIGINT</code></th>
<th class="tableblock halign-left valign-top"><code>REAL</code></th>
<th class="tableblock halign-left valign-top"><code>FLOAT</code></th>
<th class="tableblock halign-left valign-top"><code>DOUBLE</code></th>
<th class="tableblock halign-left valign-top"><code>DECIMAL</code></th>
<th class="tableblock halign-left valign-top"><code>NUMERIC</code></th>
<th class="tableblock halign-left valign-top"><code>CHAR</code></th>
<th class="tableblock halign-left valign-top"><code>VARCHAR</code></th>
<th class="tableblock halign-left valign-top"><code>BLOB SUB_TYPE 1</code></th>
<th class="tableblock halign-left valign-top"><code>BLOB SUB_TYPE 0</code></th>
<th class="tableblock halign-left valign-top"><code>BLOB SUB_TYPE &lt; 0</code></th>
<th class="tableblock halign-left valign-top"><code>DATE</code></th>
<th class="tableblock halign-left valign-top"><code>TIME</code></th>
<th class="tableblock halign-left valign-top"><code>TIMESTAMP</code></th>
<th class="tableblock halign-left valign-top"><code>BOOLEAN</code></th>
<th class="tableblock halign-left valign-top"><code>DECFLOAT</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BigDecimal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Integer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Long</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Float</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Double</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>byte[]</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Blob</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Date</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Time</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Timestamp</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="characterencoding"><a class="anchor" href="#characterencoding"></a>Appendix D: Character Encodings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Character encodings and their correct use with Firebird from Java is an important topic, that initially seems to be complex, but in fact can be formulated by just a few rules.
This appendix provides information on this topic.</p>
</div>
<div class="sect2">
<h3 id="_encodings_types"><a class="anchor" href="#_encodings_types"></a>D.1. Encodings Types</h3>
<div class="paragraph">
<p>Firebird uses character encodings in two different areas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The database encoding defines the character set in which <code>CHAR</code>, <code>VARCHAR</code> and <code>BLOB SUB_TYPE TEXT</code> fields are physically stored on the disk.
There is a default database encoding that is specified during database creation.
It is also possible to specify character sets on a per-column basis.</p>
</li>
<li>
<p>The client connection encoding defines a character set in which client will send and expects to receive character data.
This encoding might or might not match the database default encoding.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Firebird performs translation between character sets of the client connection and the character set of the content.
The list of allowed character sets as well as the allowed translations between them are specified in the <code>fbintl</code> shared library located in the <code>intl/</code> directory of the Firebird installation.<sup class="footnote">[<a id="_footnoteref_36" class="footnote" href="#_footnotedef_36" title="View footnote.">36</a>]</sup>
There is also a special character set NONE that tells Firebird not to interpret the contents of the character field.</p>
</div>
<div class="paragraph">
<p>Firebird uses the following algorithm when performing translations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If source and target character sets match, send the content unchanged.</p>
</li>
<li>
<p>If the target character set is <code>NONE</code>, send source content unchanged.</p>
</li>
<li>
<p>If the source character set is <code>NONE</code>, send source content unchanged.</p>
</li>
<li>
<p>If there is a direct translation rule between source and target character sets, use that rule.</p>
</li>
<li>
<p>If there is no direct translation rule, check if there is rule to translate the source character set into the UTF8 character set and a rule to translate from <code>UTF8</code> into the target character set.
If yes, use these two rules for translation.</p>
</li>
<li>
<p>If no suitable translation rule can be found, throw an exception.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_encodings_in_java"><a class="anchor" href="#_encodings_in_java"></a>D.2. Encodings in Java</h3>
<div class="paragraph">
<p>The Java programming language is based on the Unicode character set and uses the UTF-16 encoding, in which each character is represented by one or two 16-bit units.
Firebird, on the other side, is not based on Unicode and allows different character sets to be assigned to different database objects.
Additionally, Firebird requires a connection character set to be specified in connection options, which forces Firebird to convert data from the character set of the database object into the character set of the client application.</p>
</div>
<div class="paragraph">
<p>There are two boundary cases that we will consider here, one when Firebird database was created with default<sup class="footnote">[<a id="_footnoteref_37" class="footnote" href="#_footnotedef_37" title="View footnote.">37</a>]</sup> character set <code>UTF8</code>, another when the Firebird database was created without specifying the character set (i.e. character set <code>NONE</code>).</p>
</div>
<div class="paragraph">
<p>The character set <code>UTF8</code> is a Unicode character set that uses UTF-8 encoding and occupies from one to four 8-bit units.
Firebird has supported Unicode character set for a long time, however its implementation was deficient in Firebird 1.5 and earlier&#8201;&#8212;&#8201;it did not support proper uppercasing and correct sorting.
These issues were addressed in Firebird 2.0 and at the moment nothing prevents developers from using Unicode in the database and on the client side, which greatly simplifies the internationalization and localization of the applications.</p>
</div>
<div class="sect3">
<h4 id="_the_utf8_character_set"><a class="anchor" href="#_the_utf8_character_set"></a>D.2.1. The UTF8 character set</h4>
<div class="paragraph">
<p>A developer must ensure two things to enable use of Unicode characters in the database and the application:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The database objects must be defined with the <code>UTF8</code> character set;
this can be done by either creating the database with a default character set of <code>UTF8</code>, or by adding the <code>CHARACTER SET UTF8</code> clause to column or domain definitions.</p>
</li>
<li>
<p>The <code>encoding</code> connection property in the JDBC driver has to be set to <code>UTF8</code>;
this can be done in several ways: the easiest one is to add the appropriate parameter to the JDBC URL (see the first example), another possibility is to use appropriate method of the <code>DriverManager</code> class (see the second example).
Applications that use <code>DataSource</code> interface to obtain the database connections also have access to the
<code>encoding</code> property.<sup class="footnote">[<a id="_footnoteref_38" class="footnote" href="#_footnotedef_38" title="View footnote.">38</a>]</sup></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Specifying the connection encoding in JDBC URL</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Connection connection = DriverManager.getConnection(
    "jdbc:firebirdsql:localhost/3050:employee?encoding=UTF8",
    "SYSDBA", "masterkey");</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Specifying connection encoding in the connection properties</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="java">Properties props = new Properties();

props.setProperty("user", "SYSDBA");
props.setProperty("password", "masterkey");
props.setProperty("encoding", "UTF8");

Connection connection = DriverManager.getConnection(
    "jdbc:firebirdsql:localhost/3050:employee", props);</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are a few limitations related to using the <code>UTF8</code> character set:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is not possible to create Unicode columns longer than 8191 Unicode characters;
this limitation is caused by the fact that the longest possible <code>VARCHAR</code> column can occupy 32765 bytes (32767 for <code>CHAR</code> columns) and a single <code>UTF8</code> character can occupy up to four bytes.</p>
</li>
<li>
<p>It is not possible to index Unicode columns longer than 2047 characters&#8201;&#8212;&#8201;this requires a page size of 32 kilobytes;
this limitation is caused by the fact that the longest index key cannot be longer than a quarter of the database page, which has a maximum of 32k and the fact that each <code>UTF8</code> character can occupy up to four bytes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the <code>UTF8</code> character set might cause noticeable performance degradation when the database is accessed over wide-area networks.
This mainly applies to the cases when non-latin characters are stored in the database, as those characters will require two or more bytes, which in turn might cause additional roundtrips to the server to fetch data.</p>
</div>
</div>
<div class="sect3">
<h4 id="_the_none_character_set"><a class="anchor" href="#_the_none_character_set"></a>D.2.2. The NONE character set</h4>
<div class="paragraph">
<p>Java introduces additional complexity when the <code>NONE</code> character set is used.
The reason for this is that Java internally stores all strings in Unicode format, and the application must define the character encoding for the byte contents to the JVM.
When the <code>NONE</code> character set is used, Jaybird does not know how to interpret the received data.
The only choice that is left to Jaybird is to construct a string using the default character set of the JVM, which usually matches the regional settings of the operating system and can be accessed from within the JVM through the <code>file.encoding</code> system property.</p>
</div>
<div class="paragraph">
<p>With connection character set <code>NONE</code>, Jaybird uses the explicit character set of <code>CHAR</code>, <code>VARCHAR</code> and <code>BLOB SUB_TYPE TEXT</code> columns for the conversion.
This addresses most of the problems described in this section, except for columns without an explicit character set (i.e. their character set is <code>NONE</code>).</p>
</div>
<div class="paragraph">
<p>It is clear that a conversion using default character set that happens inside the JVM can lead to errors when the same content is accessed from two or more different Java Virtual Machines that have different configuration.
One application running on the computer with, for example, Russian regional settings saves the Russian text (the default character set of the JVM is Cp1251) and another application running on computer with German regional settings (default character set is Cp1252) will read in such case some special or accented characters.
However, when all client applications run on the same OS with the same regional settings, in most cases this will not have any severe consequences, except probably wrong sorting order or uppercasing on the server side.</p>
</div>
<div class="paragraph">
<p>On Linux and other Unix platforms, it might have more severe consequences as it is very common that regional settings are not configured and that the default "C" locale is used and the non-ASCII characters will be replaced with question marks ("?").</p>
</div>
<div class="paragraph">
<p>Therefore, an application should only use <code>NONE</code> character encoding as an encoding for a database and a connection when at least one of the following is met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The database will contain only ASCII characters,</p>
</li>
<li>
<p>It is guaranteed that all Java Virtual Machines accessing the database will have the same default encoding that can correctly handle all characters stored in the database,</p>
</li>
<li>
<p>All columns have an explicit character set.
When columns have an explicit character set (other than <code>NONE</code>) and connection character set <code>NONE</code> is used, Firebird will send an identifier of the character set of each column, and Jaybird will use that character set for the conversion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a partial workaround, you can specify the encoding that should be used to interpret bytes coming from the server in the <code>charSet</code> connection property.
The following rules are used when interpreting the <code>encoding</code> and <code>charSet</code> properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When only <code>encoding</code> property is specified, Jaybird uses the default mapping between server and Java encodings.
When <code>encoding</code> property is not set or set to <code>NONE</code> and <code>charSet</code> property is not set, the default JVM encoding is used to interpret bytes coming from the server.</p>
</li>
<li>
<p>When only <code>charSet</code> property is specified, Jaybird uses the reverse mapping to specify the connection encoding for the server and interprets byte stream according to the value of the property.</p>
</li>
<li>
<p>When both <code>encoding</code> and <code>charSet</code> property are specified, Jaybird sets the connection encoding according to the value of the <code>encoding</code> property, but interprets the byte stream according to the <code>charSet</code> property.
With Jaybird 3 and higher, this option has limitations when <code>encoding=NONE</code>: the conversion using <code>charSet</code> will only be applied for columns that don&#8217;t have an explicit character set, otherwise that explicit character set is used for the conversion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last case is most powerful, but also is the most dangerous in use.
When used properly, it can solve the problems with the legacy databases;
when used incorrectly, one can easily trash the content of the database.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_available_encodings"><a class="anchor" href="#_available_encodings"></a>D.3. Available Encodings</h3>
<div class="paragraph">
<p>The below table lists the available character encodings in the default Firebird distribution and their mapping to the Java ones:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Firebird encoding (<code>encoding</code> property)</th>
<th class="tableblock halign-left valign-top">Java encoding (<code>charSet</code> property)</th>
<th class="tableblock halign-left valign-top">Size in bytes</th>
<th class="tableblock halign-left valign-top">Comments</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Raw bytes, no interpretation of the content is possible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCII</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ASCII</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&#160;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIG_5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Big5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Traditional Chinese</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS437</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp437</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: United States, Australia, New Zeland, South Africa</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS737</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp737</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: Greek</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS775</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp775</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: Baltic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS850</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp850</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: Latin-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS852</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp852</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: Latin-2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS857</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp857</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBM: Turkish</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS858</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp858</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBM: Latin-1 + Euro</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS860</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp860</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: Portuguese</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS861</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp861</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: Icelandic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS862</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp862</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBM: Hebrew</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS863</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp863</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: Canadian French</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS864</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp864</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBM: Arabic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS865</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp865</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS-DOS: Nordic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS866</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp866</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBM: Cyrillic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DOS869</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp869</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IBM: Modern Greek</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EUCJ_0208</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EUC_JP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JIS X 0201, 0208, 0212, EUC encoding, Japanese</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GB_2312</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EUC_CN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GB2312, EUC encoding, Simplified Chinese</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-1, Latin alphabet No. 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO8859_13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO-8859-13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISO 8859-13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">KSC_5601</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MS949</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Korean</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNICODE_FSS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit Unicode Transformation Format (deprecated since Firebird 2.0)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTF-8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8-bit Unicode Transformation Format (Firebird 2.0+)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIN1250</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp1250</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Eastern European</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIN1251</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp1251</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Cyrillic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIN1252</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp1252</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Latin-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIN1253</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp1253</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Greek</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIN1254</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp1254</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Turkish</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIN1255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp1255</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Hebrew</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIN1256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp1256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Arabic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIN1257</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cp1257</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windows Baltic</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jdbcescape"><a class="anchor" href="#jdbcescape"></a>Appendix E: Supported JDBC Scalar Functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The JDBC API has an escaped syntax for numeric, string, time, date, system and conversion functions.
Jaybird will try to provide an equivalent of the JDBC function using the built-in capabilities of the Firebird database.
When no equivalent is available, Jaybird will pass the function call "as is" to the database assuming that it contains the necessary UDF, UDR or stored function declaration.</p>
</div>
<div class="paragraph">
<p>Not all functions described in the JDBC specification have corresponding built-in functions in Firebird, but some are available in the standard UDF library <code>ib_udf</code>&#8288;<sup class="footnote">[<a id="_footnoteref_39" class="footnote" href="#_footnotedef_39" title="View footnote.">39</a>]</sup> shipped with Firebird.
Jaybird provides a connection parameter <code>use_standard_udf</code> to configure the driver to assume that functions from that UDF are available in the database (<em class="until">Jaybird 5</em>).
In this case Jaybird will convert all JDBC function calls into the corresponding calls of the UDF functions.</p>
</div>
<div class="paragraph">
<p>In recent Firebird versions, the number of built-in functions has been greatly increased, and Jaybird 3 and higher can now map almost all JDBC escapes to those built-in functions.
Using the <code>use_standard_udf</code> is no longer advisable, especially as UDFs are now deprecated and will be removed in a future Firebird version.
<em class="since">Jaybird 5</em> UDF mode (<code>use_standard_udf</code>) is no longer available in Jaybird 5 and higher.</p>
</div>
<div class="paragraph">
<p>Below you will find the list of JDBC functions and whether they have a corresponding equivalent in the "built-in" and in the "UDF" modes.</p>
</div>
<div class="sect2">
<h3 id="_numeric_functions"><a class="anchor" href="#_numeric_functions"></a>E.1. Numeric Functions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JDBC</th>
<th class="tableblock halign-center valign-top">built-in</th>
<th class="tableblock halign-center valign-top">UDF mode</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ABS(number)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Absolute value of <code>number</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACOS(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arccosine, in radians, of <code>float</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ASIN(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arcsine, in radians, of <code>float</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ATAN(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arctangent, in radians, of <code>float</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ATAN2(float1, float2)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arctangent, in radians, of <code>float2</code> / <code>float1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CEILING(number)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Smallest integer &gt;= <code>number</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COS(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cosine of <code>float</code> radians</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>COT(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cotangent of <code>float</code> radians</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DEGREES(number)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Degrees in <code>number</code> radians</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXP(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exponential function of <code>float</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FLOOR(number)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Largest integer &lt;= <code>number</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOG(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base e logarithm of <code>float</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOG10(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base 10 logarithm of <code>float</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MOD(integer1, integer2)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remainder for <code>integer1</code> / <code>integer2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PI()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The constant pi</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POWER(number, power)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number</code> raised to (integer) <code>power</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RADIANS(number)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Radians in <code>number</code> degrees</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RAND(integer)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_40" class="footnote" href="#_footnotedef_40" title="View footnote.">40</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Random floating point for seed <code>integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ROUND(number, places)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number</code> rounded to <code>places</code> places</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SIGN(number)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1 to indicate <code>number</code> is &lt; 0;
0 to indicate <code>number</code> is = 0;
1 to indicate <code>number</code> is &gt; 0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SIN(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sine of <code>float</code> radians</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SQRT(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Square root of float</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TAN(float)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tangent of <code>float</code> radians</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRUNCATE(number, places)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>number</code> truncated to <code>places</code> places</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Legend: X&#8201;&#8212;&#8201;available in this mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_string_functions"><a class="anchor" href="#_string_functions"></a>E.2. String Functions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JDBC</th>
<th class="tableblock halign-center valign-top">built-in</th>
<th class="tableblock halign-center valign-top">UDF mode</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ASCII(string)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer representing the ASCII code value of the leftmost character in <code>string</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHAR(code)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character with ASCII code value <code>code</code>, where <code>code</code> is between 0 and 255</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHAR_LENGTH(string [,CHARACTERS])</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_41" class="footnote" href="#_footnotedef_41" title="View footnote.">41</a>]</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the length in characters of the string expression</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHAR_LENGTH(string, OCTETS)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the length in bytes of the string expression whose result is the smallest integer not less than the number of bits divided by 8, alias for <code>OCTET_LENGTH</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHARACTER_LENGTH( string [,CHARACTERS])</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_42" class="footnote" href="#_footnotedef_42" title="View footnote.">42</a>]</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alias for <code>CHAR_LENGTH</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CHARACTER_LENGTH(string, OCTETS)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alias for <code>CHAR_LENGTH</code>, <code>OCTET_LENGTH</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONCAT(string1, string2)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Character string formed by appending <code>string2</code> to <code>string1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DIFFERENCE(string1, string2)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer indicating the difference between the values returned by the function <code>SOUNDEX</code> for <code>string1</code> and <code>string2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INSERT(string1, start, length, string2)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A character string formed by deleting <code>length</code> characters from <code>string1</code> beginning at <code>start</code>, and inserting <code>string2</code> into <code>string1</code> at <code>start</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LCASE(string)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converts all uppercase characters in <code>string</code> to lowercase</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LEFT(string, count)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>count</code> leftmost characters from <code>string</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LENGTH(string [,CHARACTERS])</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_43" class="footnote" href="#_footnotedef_43" title="View footnote.">43</a>]</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_44" class="footnote" href="#_footnotedef_44" title="View footnote.">44</a>]</sup></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of characters in <code>string</code>, excluding trailing blanks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LENGTH(string, OCTETS])</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_45" class="footnote" href="#_footnotedef_45" title="View footnote.">45</a>]</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of characters in <code>string</code>, excluding trailing blanks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOCATE(string1, string2 [,start])</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Position in <code>string2</code> of the first occurrence of <code>string1</code>, searching from the beginning of <code>string2</code>;
if <code>start</code> is specified, the search begins from position <code>start</code>.
0 is returned if <code>string2</code> does not contain <code>string1</code>.
Position 1 is the first character in <code>string2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LTRIM(string)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Characters of <code>string</code> with leading blank spaces removed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OCTET_LENGTH(string)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the length in bytes of the string expression whose result is the smallest integer not less than the number of bits divided by 8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POSITION(substring IN string [,CHARACTERS])</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the position of first occurrence of <code>substr</code> in <code>string</code> (with optional <code>CHARACTERS</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POSITION(substring IN string, OCTETS)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_46" class="footnote" href="#_footnotedef_46" title="View footnote.">46</a>]</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the position of first occurrence of <code>substr</code> in <code>string</code> (with caveat)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REPEAT(string, count)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A character string formed by repeating <code>string</code> <code>count</code> times</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REPLACE(string1, string2, string3)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Replaces all occurrences of <code>string2</code> in <code>string1</code> with <code>string3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RIGHT(string, count)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>count</code> rightmost characters in <code>string</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RTRIM(string)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The characters of <code>string</code> with no trailing blanks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SOUNDEX(string)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A character string, which is data source-dependent, representing the sound of the words in <code>string</code>;
this could be a four-digit SOUNDEX code, a phonetic representation of each word, etc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SPACE(count)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A character string consisting of <code>count</code> spaces</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUBSTRING(string, start, length)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A character string formed by extracting <code>length</code> characters from <code>string</code> beginning at <code>start</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>UCASE(string)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Converts all lowercase characters in <code>string</code> to uppercase</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Legend: X&#8201;&#8212;&#8201;available in this mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_time_and_date_functions"><a class="anchor" href="#_time_and_date_functions"></a>E.3. Time and Date Functions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JDBC</th>
<th class="tableblock halign-center valign-top">built-in</th>
<th class="tableblock halign-center valign-top">UDF mode</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CURRENT_DATE[()]</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synonym for <code>CURDATE()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CURRENT_TIME[()]</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synonym for <code>CURTIME()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CURRENT_TIMESTAMP[()]</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synonym for <code>NOW()</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CURDATE()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current date as a date value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CURTIME()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The current local time as a time value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DAYNAME(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_47" class="footnote" href="#_footnotedef_47" title="View footnote.">47</a>]</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A character string representing the day component of <code>date</code>;
the name for the day is specific to the data source</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DAYOFMONTH(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 1 to 31 representing the day of the month in <code>date</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DAYOFWEEK(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 1 to 7 representing the day of the week in <code>date</code>;
1 represents Sunday</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DAYOFYEAR(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 1 to 366 representing the day of the year in <code>date</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXTRACT(field FROM source)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extract the field portion from the source.
The source is a datetime value.
The value for field may be one of the following: <code>YEAR</code>, <code>MONTH</code>, <code>DAY</code>, <code>HOUR</code>, <code>MINUTE</code>, <code>SECOND</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HOUR(time)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 0 to 23 representing the hour component of <code>time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MINUTE(time)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 0 to 59 representing the minute component of <code>time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MONTH(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 1 to 12 representing the month component of <code>date</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MONTHNAME(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_48" class="footnote" href="#_footnotedef_48" title="View footnote.">48</a>]</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A character string representing the month component of <code>date</code>;
the name for the month is specific to the data source</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOW()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timestamp value representing the current date and time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>QUARTER(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 1 to 4 representing the quarter in <code>date</code>;
1 represents January 1 through March 31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SECOND(time)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 0 to 59 representing the second component of <code>time</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMPADD( interval, count, timestamp)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A timestamp calculated by adding <code>count</code> number of <code>interval</code>(s) to <code>timestamp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TIMESTAMPDIFF( interval, timestamp1, timestamp2)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer representing the number of <code>interval</code> by which <code>timestamp2</code> is greater than <code>timestamp1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WEEK(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer from 1 to 53 representing the week of the year in <code>date</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>YEAR(date)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An integer representing the year component of <code>date</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Legend: X&#8201;&#8212;&#8201;available in this mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_system_functions"><a class="anchor" href="#_system_functions"></a>E.4. System Functions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JDBC</th>
<th class="tableblock halign-center valign-top">built-in</th>
<th class="tableblock halign-center valign-top">UDF mode</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATABASE()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X<sup class="footnote">[<a id="_footnoteref_49" class="footnote" href="#_footnotedef_49" title="View footnote.">49</a>]</sup></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IFNULL(expression, value)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code> if <code>expression</code> is null;
<code>expression</code> if <code>expression</code> is not null</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USER()</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">&#160;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username in the DBMS</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Legend: X&#8201;&#8212;&#8201;available in this mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_conversion_functions"><a class="anchor" href="#_conversion_functions"></a>E.5. Conversion Functions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 30%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">JDBC</th>
<th class="tableblock halign-center valign-top">built-in</th>
<th class="tableblock halign-center valign-top">UDF mode</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONVERT(value, SQLtype)</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>value</code> converted to <code>SQLtype</code> where <code>SQLtype</code> may be one of the following SQL types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BIGINT</code></p>
</li>
<li>
<p><code>BINARY</code></p>
</li>
<li>
<p><code>BLOB</code></p>
</li>
<li>
<p><code>CHAR</code></p>
</li>
<li>
<p><code>CLOB</code></p>
</li>
<li>
<p><code>DATE</code></p>
</li>
<li>
<p><code>DECFLOAT</code></p>
</li>
<li>
<p><code>DECIMAL</code></p>
</li>
<li>
<p><code>DOUBLE</code></p>
</li>
<li>
<p><code>DOUBLE PRECISION</code></p>
</li>
<li>
<p><code>FLOAT</code></p>
</li>
<li>
<p><code>INTEGER</code></p>
</li>
<li>
<p><code>LONGNVARCHAR</code></p>
</li>
<li>
<p><code>LONGVARBINARY</code></p>
</li>
<li>
<p><code>LONGVARCHAR</code></p>
</li>
<li>
<p><code>NCHAR</code></p>
</li>
<li>
<p><code>NCLOB</code></p>
</li>
<li>
<p><code>NVARCHAR</code></p>
</li>
<li>
<p><code>REAL</code></p>
</li>
<li>
<p><code>SMALLINT</code></p>
</li>
<li>
<p><code>TIME</code></p>
</li>
<li>
<p><code>TIME_WITH_TIMEZONE</code></p>
</li>
<li>
<p><code>TIME_WITH_TIME_ZONE</code></p>
</li>
<li>
<p><code>TIMESTAMP</code></p>
</li>
<li>
<p><code>TIMESTAMP_WITH_TIMEZONE</code></p>
</li>
<li>
<p><code>TIMESTAMP_WITH_TIME_ZONE</code></p>
</li>
<li>
<p><code>TINYINT</code></p>
</li>
<li>
<p><code>VARBINARY</code></p>
</li>
<li>
<p><code>VARCHAR</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These type names can also be prefixed with <code>SQL_</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Legend: X&#8201;&#8212;&#8201;available in this mode.</p>
</div>
<div class="paragraph">
<p>The <code>CONVERT</code> escape provides some additional features, or deviates from the JDBC defined behaviour:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Contrary to the JDBC specification, we allow explicit length or precision and scale parameters</p>
</li>
<li>
<p><code>(SQL_)VARCHAR</code>, <code>(SQL_)NVARCHAR</code> (and <em>value</em> not a parameter (<code>?</code>)) without explicit length is converted using <code>TRIM(TRAILING FROM value)</code>, which means the result is <code>VARCHAR</code> except for blobs where this will result in a blob;
national character set will be lost.
If <em>value</em> is a parameter (<code>?</code>), and no length is specified, then a length of 50 will be applied (cast to <code>(N)VARCHAR(50)</code>).</p>
</li>
<li>
<p><code>(SQL_)CHAR</code>, <code>(SQL_)NCHAR</code> without explicit length will be cast to <code>(N)CHAR(50)</code></p>
</li>
<li>
<p><code>(SQL_)BINARY</code>, and <code>(SQL_)VARBINARY</code> without explicit length will be cast to <code>(VAR)CHAR(50) CHARACTER SET OCTETS</code>.
With explicit length, <code>CHARACTER SET OCTETS</code> is appended.</p>
</li>
<li>
<p><code>(SQL_)LONGVARCHAR</code>, <code>(SQL_)LONGNVARCHAR</code>, <code>(SQL_)CLOB</code>, <code>(SQL_)NCLOB</code> will be cast to <code>BLOB SUB_TYPE TEXT</code>, national character set will be lost</p>
</li>
<li>
<p><code>(SQL_)LONGVARBINARY</code>, <code>(SQL_)BLOB</code> will be cast to <code>BLOB SUB_TYPE BINARY</code></p>
</li>
<li>
<p><code>(SQL_)TINYINT</code> is mapped to <code>SMALLINT</code></p>
</li>
<li>
<p><code>(SQL_)ROWID</code> is not supported as length of <code>DB_KEY</code> values depend on the context</p>
</li>
<li>
<p><code>(SQL_)DECIMAL</code> and <code>(SQL_)NUMERIC</code> without precision and scale are passed as is.
In current Firebird versions, this means the value will be equivalent to <code>DECIMAL(9,0)</code>/<code>NUMERIC(9,0)</code>, which is equivalent to <code>INTEGER</code>.</p>
</li>
<li>
<p>Unsupported/unknown <em>SQLtype</em> values (or invalid length or precision and scale) are passed as is to cast, resulting in an error from the Firebird engine if the resulting cast is invalid</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jaybirdversions"><a class="anchor" href="#jaybirdversions"></a>Appendix F: Jaybird versions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This appendix lists the distribution files and supported specifications of recent Jaybird versions.</p>
</div>
<div class="sect2">
<h3 id="jb6"><a class="anchor" href="#jb6"></a>F.1. Jaybird 6</h3>
<div class="sect3">
<h4 id="jb6-java"><a class="anchor" href="#jb6-java"></a>F.1.1. Java support</h4>
<div class="paragraph">
<p>Jaybird 6 supports Java 17 and higher (JDBC 4.3).</p>
</div>
<div class="paragraph">
<p>Given the limited support period for non-LTS Java versions, we limit support to Java 17 and the most recent LTS version after Java 17, and the latest Java release.
Currently, that means we support Java 17, Java 21, and Java 24.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 provides libraries compiled against Java 17, which also work on higher Java versions.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 is modularized, and provides the following modules:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>org.firebirdsql.jaybird</code></dt>
<dd>
<p>main Jaybird driver (artifact <code>org.firebirdsql.jdbc:jaybird</code>)</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jaybird.chacha64</code></dt>
<dd>
<p>ChaCha64 wire encryption implementation (artifact <code>org.firebirdsql.jdbc:chacha64-plugin</code>)</p>
</dd>
<dt class="hdlist1"><code>org.firebirdsql.jna</code></dt>
<dd>
<p>native and embedded protocol implementation using JNA (artifact <code>org.firebirdsql.jdbc:jaybird-native</code>)</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="jb6-firebird"><a class="anchor" href="#jb6-firebird"></a>F.1.2. Firebird support</h4>
<div class="paragraph">
<p>Jaybird 6 supports Firebird 3.0, Firebird 4.0, and Firebird 5.0.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 will&#8201;&#8212;&#8201;by default&#8201;&#8212;&#8201;not connect to Firebird 2.5 or older.
To connect to earlier versions, unsupported protocols have to be enabled explicitly, see <a href="#ref-enable-protocol">Enabling unsupported protocol versions</a> for details.</p>
</div>
<div class="paragraph">
<p>Formal support for Firebird 2.5 has been dropped, and some things may no longer work (especially <code>DatabaseMetaData</code> methods), if features of Firebird 3.0 have been used.
The Type 2 and embedded server JDBC drivers require a separate artifact, <code>jaybird-native</code>, and JNA to access the Firebird client or embedded library.</p>
</div>
<div class="sect4">
<h5 id="jb6-firebird3"><a class="anchor" href="#jb6-firebird3"></a>Notes on Firebird 3.0 support</h5>
<div class="paragraph">
<p>Jaybird 6 supports the Firebird 3.0 and higher zlib compression.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 supports the Arc4 wire encryption plugin out-of-the-box.</p>
</div>
</div>
<div class="sect4">
<h5 id="jb6-firebird4"><a class="anchor" href="#jb6-firebird4"></a>Notes on Firebird 4.0 support</h5>
<div class="paragraph">
<p>Jaybird 6 supports the protocol improvements of Firebird 4.0 for statement timeouts and server-side batch execution.
Jaybird 6 does not support sending blobs as part of batch execution.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 supports the Arc4 and ChaCha wire encryption plugin out-of-the-box.
To support the ChaCha64 wire encryption plugin, the artifact <code>org.firebirdsql.jdbc:chacha64-plugin</code> has to be added to the classpath.</p>
</div>
<div class="paragraph">
<p>See also <a href="#jb6-firebird3">Notes on Firebird 3.0 support</a></p>
</div>
</div>
<div class="sect4">
<h5 id="jb6-firebird5"><a class="anchor" href="#jb6-firebird5"></a>Notes on Firebird 5.0 support</h5>
<div class="paragraph">
<p>Jaybird 6 supports Firebird 5.0 server-side scrollable cursors and multi-row <code>RETURNING</code>.</p>
</div>
<div class="paragraph">
<p>See also <a href="#jb6-firebird4">Notes on Firebird 4.0 support</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jb6-spec"><a class="anchor" href="#jb6-spec"></a>F.1.3. Supported Specifications</h4>
<div class="paragraph">
<p>Jaybird 6 supports the following specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Specification</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a security manager is available, the driver still performs <code>SQLPermission</code> checks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird supports most of JDBC 4.3, in as far the features are required or supported by Firebird.
It is not officially JDBC compliant, because we currently don&#8217;t have access to the TCK.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JTA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The driver provides an implementation of the <code>javax.transaction.xa.XAResource</code> interface via a <code>javax.sql.XADataSource</code> implementation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="jb6-distribution"><a class="anchor" href="#jb6-distribution"></a>F.1.4. Distribution</h4>
<div class="paragraph">
<p>Jaybird has no required runtime dependencies.</p>
</div>
<div class="paragraph">
<p>For native or embedded connections, the <code>jaybird-native</code> artifact and <code>jna-jpms</code> 5.17.0 need to be on the classpath.</p>
</div>
<div class="paragraph">
<p>For ChaCha64 wire encryption, the <code>chacha64-plugin</code> artifact and <code>bcprov-jdk18on</code> 1.81 (Bouncy Castle JCE provider) need to be on the classpath.</p>
</div>
<div class="sect4">
<h5 id="jb6-distribution-package"><a class="anchor" href="#jb6-distribution-package"></a>Distribution package</h5>
<div class="paragraph">
<p>The latest version of Jaybird can be downloaded from <a href="https://firebirdsql.org/en/jdbc-driver/" class="bare">https://firebirdsql.org/en/jdbc-driver/</a></p>
</div>
<div class="paragraph">
<p>The following files can be found in the distribution package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-6.0.3.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The main JDBC driver, the Services API and event management classes.
Provides only pure Java connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chacha64-plugin-6.0.3.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, support for the ChaCha64 wire encryption for pure Java connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/bcprov-jdk18on-1.81.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, required for the ChaCha64 support (with <code>chacha64-plugin</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-native-6.0.3.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Options dependency, support for native and embedded connections.
Requires <code>lib/jna-jpms-5.17.0.jar</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/jna-jpms-5.17.0.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, required if you want to use Type 2 native, or embedded protocols (with <code>jaybird-native</code>)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="jb6-distribution-maven"><a class="anchor" href="#jb6-distribution-maven"></a>Maven</h5>
<div class="paragraph">
<p>Alternatively, you can use Maven to automatically download Jaybird and its dependencies.</p>
</div>
<div class="paragraph">
<p>Jaybird 6 is available from Maven central:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
groupId
</td>
<td class="hdlist2">
<p><code>org.firebirdsql.jdbc</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
artifactId
</td>
<td class="hdlist2">
<p><code>jaybird</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
version
</td>
<td class="hdlist2">
<p><code>6.0.3</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;
  &lt;version&gt;6.0.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use ChaCha64 wire encryption, you need to explicitly include <code>chacha64-plugin</code> as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;chacha64-plugin&lt;/artifactId&gt;
  &lt;version&gt;6.0.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use Type 2 support (native or embedded), you need to explicitly include <code>jaybird-native</code> as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird-native&lt;/artifactId&gt;
  &lt;version&gt;6.0.3&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, for native connections you can use the <code>org.firebirdsql.jdbc:fbclient</code> dependency to provide the client library (<code>fbclient.dll</code>/<code>libfbclient.so</code>) on Windows and Linux.
See <a href="#driver-native-maven">Maven dependency for native client</a> for details.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jb5"><a class="anchor" href="#jb5"></a>F.2. Jaybird 5</h3>
<div class="sect3">
<h4 id="jb5-java"><a class="anchor" href="#jb5-java"></a>F.2.1. Java support</h4>
<div class="paragraph">
<p>Jaybird 5 supports Java 8 (JDBC 4.2), and Java 9 and higher (JDBC 4.3).</p>
</div>
<div class="paragraph">
<p>Given the limited support period for Java 9 and higher versions, we limit support to Java 8, 11, 17 and the most recent LTS version after Java 17 and the latest Java release.
Currently, that means we support Java 8, Java 11, Java 17, Java 21, and Java 24.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Jaybird 5 will be the last version to support Java 8 and 11.
Jaybird 6 will use Java 17 as the baseline (minimum) version.
We highly recommend upgrading to Java 17 or higher.</p>
</div>
<div class="paragraph">
<p>Jaybird 5 will serve as a &#8220;long-term support&#8221; version for Java 8 and 11, with maintenance releases at least until the release of Jaybird 7.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Jaybird 5 provides libraries for Java 8 and Java 11.
The Java 8 builds have all JDBC 4.3 related functionality and can be used on Java 9 and higher as well, but the Java 11 version has additional features, like the ChaCha wire encryption.</p>
</div>
<div class="paragraph">
<p>Jaybird 5 is not modularized, but all versions declare the automatic module name <code>org.firebirdsql.jaybird</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="jb5-firebird"><a class="anchor" href="#jb5-firebird"></a>F.2.2. Firebird support</h4>
<div class="paragraph">
<p>Jaybird 5 supports Firebird 2.5 and higher.</p>
</div>
<div class="paragraph">
<p>Formal support for Firebird 2.0 and 2.1 has been dropped, and some things may no longer work (especially <code>DatabaseMetaData</code> methods), if features of Firebird 2.5 have been used.
The Type 2 and embedded server JDBC drivers use JNA to access the Firebird client or embedded library.</p>
</div>
<div class="sect4">
<h5 id="jb5-firebird3"><a class="anchor" href="#jb5-firebird3"></a>Notes on Firebird 3.0 support</h5>
<div class="paragraph">
<p>Jaybird 5 supports the Firebird 3.0 and higher zlib compression.</p>
</div>
</div>
<div class="sect4">
<h5 id="jb5-firebird4"><a class="anchor" href="#jb5-firebird4"></a>Notes on Firebird 4.0 support</h5>
<div class="paragraph">
<p>Jaybird 5 supports the protocol improvements of Firebird 4.0 for statement timeouts and server-side batch execution.
Jaybird 5 does not support sending blobs as part of batch execution.</p>
</div>
<div class="paragraph">
<p>Jaybird 5 only supports the ChaCha wire encryption plugin using the Java 11 version of the driver.
Jaybird 5 does not support the ChaCha64 wire encryption plugin.
Support for ChaCha64 will be added in Jaybird 6.</p>
</div>
<div class="paragraph">
<p>See also <a href="#jb5-firebird3">Notes on Firebird 3.0 support</a></p>
</div>
</div>
<div class="sect4">
<h5 id="jb5-firebird5"><a class="anchor" href="#jb5-firebird5"></a>Notes on Firebird 5.0 support</h5>
<div class="paragraph">
<p>Jaybird 5 supports Firebird 5.0 server-side scrollable cursors and multi-row <code>RETURNING</code>.</p>
</div>
<div class="paragraph">
<p>See also <a href="#jb5-firebird4">Notes on Firebird 4.0 support</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jb5-spec"><a class="anchor" href="#jb5-spec"></a>F.2.3. Supported Specifications</h4>
<div class="paragraph">
<p>Jaybird 5 supports the following specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Specification</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a security manager is available, the driver still performs <code>SQLPermission</code> checks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird supports most of JDBC 4.3, in as far the features are required or supported by Firebird.
It is not officially JDBC compliant, because we currently don&#8217;t have access to the TCK.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JTA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The driver provides an implementation of the <code>javax.transaction.xa.XAResource</code> interface via a <code>javax.sql.XADataSource</code> implementation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="jb5-distribution"><a class="anchor" href="#jb5-distribution"></a>F.2.4. Distribution</h4>
<div class="paragraph">
<p>Jaybird has no required runtime dependencies.
For native or embedded connections, JNA 5.17.0 needs to be on the class path.</p>
</div>
<div class="sect4">
<h5 id="jb5-distribution-package"><a class="anchor" href="#jb5-distribution-package"></a>Distribution package</h5>
<div class="paragraph">
<p>The latest version of Jaybird can be downloaded from <a href="https://firebirdsql.org/en/jdbc-driver/" class="bare">https://firebirdsql.org/en/jdbc-driver/</a></p>
</div>
<div class="paragraph">
<p>The following files can be found in the distribution package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-5.0.10.&lt;java&gt;.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An archive containing the JDBC driver, the Services API and event management classes.
Where <code>&lt;java&gt;</code> is either <code>java11</code> or <code>java8</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/jna-5.17.0.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, required if you want to use Type 2 native, or embedded protocols</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="jb5-distribution-maven"><a class="anchor" href="#jb5-distribution-maven"></a>Maven</h5>
<div class="paragraph">
<p>Alternatively, you can use maven to automatically download Jaybird and its dependencies.</p>
</div>
<div class="paragraph">
<p>Jaybird 5 is available from Maven central:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
groupId
</td>
<td class="hdlist2">
<p><code>org.firebirdsql.jdbc</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
artifactId
</td>
<td class="hdlist2">
<p><code>jaybird</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
version
</td>
<td class="hdlist2">
<p><code>5.0.10.&lt;java&gt;</code> (where <code>&lt;java&gt;</code> is either <code>java11</code> or <code>java8</code>)</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;
  &lt;version&gt;5.0.10.java11&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use Type 2 support (native or embedded), you need to explicitly include JNA as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;
  &lt;artifactId&gt;jna&lt;/artifactId&gt;
  &lt;version&gt;5.17.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For native connections you can use the <code>org.firebirdsql.jdbc:fbclient</code> dependency to provide the client library.
See <a href="#driver-native-maven">Maven dependency for native client</a> for details.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jb4"><a class="anchor" href="#jb4"></a>F.3. Jaybird 4</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Jaybird 4 is end-of-life and will not receive further updates.
We recommend upgrading to <a href="#jb5">Jaybird 5</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="jb4-java"><a class="anchor" href="#jb4-java"></a>F.3.1. Java support</h4>
<div class="paragraph">
<p>Jaybird 4 supports Java 7 (JDBC 4.1), Java 8 (JDBC 4.2), and Java 9 and higher (JDBC 4.3).</p>
</div>
<div class="paragraph">
<p>Given the limited support period for Java 9 and higher versions, we will limit support on those versions to the recent LTS versions and the latest release.
Currently, that means we support Java 7, 8, 11, 17, and 21<sup class="footnote">[<a id="_footnoteref_50" class="footnote" href="#_footnotedef_50" title="View footnote.">50</a>]</sup>.</p>
</div>
<div class="paragraph">
<p>Jaybird 4 provides libraries for Java 7, Java 8, and Java 11.
The Java 8 builds have the same source and all JDBC 4.3 related functionality and can be used on Java 9 and higher as well.</p>
</div>
<div class="paragraph">
<p>Jaybird 4 is not modularized, but all versions declare the automatic module name <code>org.firebirdsql.jaybird</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="jb4-firebird"><a class="anchor" href="#jb4-firebird"></a>F.3.2. Firebird support</h4>
<div class="paragraph">
<p>Jaybird 4 supports Firebird 2.5 and higher.</p>
</div>
<div class="paragraph">
<p>Formal support for Firebird 2.0 and 2.1 has been dropped (although in general we expect the driver to work).
The Type 2 and embedded server JDBC drivers use JNA to access the Firebird client or embedded library.</p>
</div>
<div class="sect4">
<h5 id="jb4-firebird3"><a class="anchor" href="#jb4-firebird3"></a>Notes on Firebird 3 support</h5>
<div class="paragraph">
<p>Jaybird 4 supports the Firebird 3.0 and higher zlib compression.</p>
</div>
</div>
<div class="sect4">
<h5 id="jb4-firebird4"><a class="anchor" href="#jb4-firebird4"></a>Notes on Firebird 4 support</h5>
<div class="paragraph">
<p>Jaybird 4 supports the protocol improvements of Firebird 4.0 for statement timeouts, but does not implement the new batch protocol.</p>
</div>
<div class="paragraph">
<p>Jaybird 4 provides time zone support.</p>
</div>
<div class="paragraph">
<p>Jaybird 4 supports the extended numeric precision types <code>NUMERIC</code> or <code>DECIMAL</code> with a precision higher than 18 up to 38.
Since Jaybird 4.0.1, the <code>INT128</code> type is also supported.</p>
</div>
<div class="paragraph">
<p>Jaybird 4 does not support the ChaCha wire encryption plugin.
Support for ChaCha has been added in Jaybird 5.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jb4-spec"><a class="anchor" href="#jb4-spec"></a>F.3.3. Supported Specifications</h4>
<div class="paragraph">
<p>Jaybird supports the following specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Specification</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird supports most of JDBC 4.3, in as far the features are required or supported by Firebird.
It is not officially JDBC compliant, because we currently don&#8217;t have access to the TCK.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JCA 1.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird provides an implementation of <code>javax.resource.spi.ManagedConnectionFactory</code> and related
interfaces. CCI interfaces are not supported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JTA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The driver provides an implementation of the <code>javax.transaction.xa.XAResource</code> interface via the JCA
framework and a <code>javax.sql.XADataSource</code> implementation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="jb4-distribution"><a class="anchor" href="#jb4-distribution"></a>F.3.4. Distribution</h4>
<div class="paragraph">
<p>The Jaybird driver has compile-time and run-time dependencies to JCA 1.5.</p>
</div>
<div class="sect4">
<h5 id="jb4-distribution-package"><a class="anchor" href="#jb4-distribution-package"></a>Distribution package</h5>
<div class="paragraph">
<p>The latest version of Jaybird can be downloaded from <a href="https://firebirdsql.org/en/jdbc-driver/" class="bare">https://firebirdsql.org/en/jdbc-driver/</a></p>
</div>
<div class="paragraph">
<p>The following files can be found in the distribution package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-4.0.10.&lt;java&gt;.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An archive containing the JDBC driver, the JCA connection manager, the Services API and event
management classes.
Where <code>&lt;java&gt;</code> is either <code>java7</code>, <code>java8</code> or <code>java11</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-full-4.0.10.&lt;java&gt;.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as above, but including the JCA 1.5 dependency.
Where <code>&lt;java&gt;</code> is either <code>java7</code>, <code>java8</code> or <code>java11</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/connector-api-1.5.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required dependency;
part of <code>jaybird-full</code>, not necessary when deploying to a Java EE or Jakarta EE 8 or lower application server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/jna-5.5.0.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, required if you want to use Type 2 native, local or embedded protocols</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="jb4-distribution-maven"><a class="anchor" href="#jb4-distribution-maven"></a>Maven</h5>
<div class="paragraph">
<p>Alternatively, you can use maven to automatically download Jaybird and its dependencies.</p>
</div>
<div class="paragraph">
<p>Jaybird 4 is available from Maven central:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
groupId
</td>
<td class="hdlist2">
<p><code>org.firebirdsql.jdbc</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
artifactId
</td>
<td class="hdlist2">
<p><code>jaybird</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
version
</td>
<td class="hdlist2">
<p><code>4.0.10.&lt;java&gt;</code> (where <code>&lt;java&gt;</code> is either <code>java11</code>, <code>java8</code> or <code>java7</code>)</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;
  &lt;version&gt;4.0.10.java11&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your application is deployed to a Java EE or Jakarta EE 8 or lower application server, you will need to exclude the <code>javax.resource:connector-api</code> dependency, and add it as a provided dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird&lt;/artifactId&gt;
  &lt;version&gt;4.0.10.java11&lt;/version&gt;
  &lt;exclusions&gt;
    &lt;exclusion&gt;
      &lt;groupId&gt;javax.resource&lt;/groupId&gt;
      &lt;artifactId&gt;connector-api&lt;/artifactId&gt;
    &lt;/exclusion&gt;
  &lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;javax.resource&lt;/groupId&gt;
  &lt;artifactId&gt;connector-api&lt;/artifactId&gt;
  &lt;version&gt;1.5&lt;/version&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use Type 2 support (native, local or embedded), you need to explicitly include JNA as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;
  &lt;artifactId&gt;jna&lt;/artifactId&gt;
  &lt;version&gt;5.5.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For native and local you can use the <code>org.firebirdsql.jdbc:fbclient</code> dependency to provide the client library.
See <a href="#driver-native-maven">Maven dependency for native client</a> for details.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jb3"><a class="anchor" href="#jb3"></a>F.4. Jaybird 3</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Jaybird 3 is end-of-life and will not receive further updates.
We recommend upgrading to <a href="#jb5">Jaybird 5</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="jb3-java"><a class="anchor" href="#jb3-java"></a>F.4.1. Java support</h4>
<div class="paragraph">
<p>Jaybird 3 supports Java 7 (JDBC 4.1), Java 8 (JDBC 4.2), and Java 9 - 11 (JDBC 4.3).</p>
</div>
<div class="paragraph">
<p>There are no Java 9+ specific builds, the Java 8 builds have the same source and all JDBC 4.3 related functionality.</p>
</div>
<div class="paragraph">
<p>Given the limited support period for Java 9 and higher versions, we may limit support on those versions to the most recent LTS version and the latest release.</p>
</div>
<div class="paragraph">
<p>Jaybird 3.0 is not modularized, but since Jaybird 3.0.3, it declares the automatic module name <code>org.firebirdsql.jaybird</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="jb3-firebird"><a class="anchor" href="#jb3-firebird"></a>F.4.2. Firebird support</h4>
<div class="paragraph">
<p>Jaybird 3 supports Firebird 2.0 and higher, but is only tested with Firebird 2.5, 3.0 and 4.0.</p>
</div>
<div class="paragraph">
<p>Formal support for Firebird 1.x has been dropped (although in general we expect the driver to work).
The Type 2 and embedded server JDBC drivers use JNA to access the Firebird client or embedded library.</p>
</div>
<div class="sect4">
<h5 id="jb3-firebird3"><a class="anchor" href="#jb3-firebird3"></a>Notes on Firebird 3 support</h5>
<div class="paragraph">
<p>Jaybird 3.0.4 added support for wire protocol encryption and database encryption.</p>
</div>
<div class="paragraph">
<p>Jaybird 3 does not support the Firebird 3.0 zlib compression.</p>
</div>
</div>
<div class="sect4">
<h5 id="jb3-firebird4"><a class="anchor" href="#jb3-firebird4"></a>Notes on Firebird 4 support</h5>
<div class="paragraph">
<p>Jaybird 3 can connect and query Firebird 4.0.
Longer object names are supported.</p>
</div>
<div class="paragraph">
<p>The new data types introduced in Firebird 4.0 are not supported.
Support for data types like <code>DECFLOAT</code> and <code>NUMERIC</code>/<code>DECIMAL</code> with precision higher than 18 will be introduced in Jaybird 4.</p>
</div>
<div class="paragraph">
<p>The Srp256 authentication plugin is supported, but the other SrpNNN plugins are not.</p>
</div>
<div class="paragraph">
<p>Jaybird 3 does not support the Firebird 4.0 zlib compression.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jb3-spec"><a class="anchor" href="#jb3-spec"></a>F.4.3. Supported Specifications</h4>
<div class="paragraph">
<p>Jaybird supports the following specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Specification</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird supports most of JDBC 4.3, inasfar the features are required or supported by Firebird.
It is not officially JDBC compliant, because we currently don&#8217;t have access to the TCK.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JCA 1.5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird provides an implementation of <code>javax.resource.spi.ManagedConnectionFactory</code> and related
interfaces. CCI interfaces are not supported.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JTA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The driver provides an implementation of the <code>javax.transaction.xa.XAResource</code> interface via the JCA
framework and a <code>javax.sql.XADataSource</code> implementation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="jb3-distribution"><a class="anchor" href="#jb3-distribution"></a>F.4.4. Distribution</h4>
<div class="paragraph">
<p>The Jaybird driver has compile-time and run-time dependencies to JCA 1.5.
Additionally, if the antlr-runtime classes are found in the class path, it is possible to use generated key retrieval.</p>
</div>
<div class="sect4">
<h5 id="jb3-distribution-package"><a class="anchor" href="#jb3-distribution-package"></a>Distribution package</h5>
<div class="paragraph">
<p>The latest version of Jaybird can be downloaded from <a href="https://firebirdsql.org/en/jdbc-driver/" class="bare">https://firebirdsql.org/en/jdbc-driver/</a></p>
</div>
<div class="paragraph">
<p>The following files can be found in the distribution package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-3.0.12.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An archive containing the JDBC driver, the JCA connection manager, the Services API and event
management classes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-full-3.0.12.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as above, but including the JCA 1.5 dependency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/antlr-runtime-4.7.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, required if you want to use <code>getGeneratedKeys</code> support</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/connector-api-1.5.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required dependency;
part of <code>jaybird-full</code>, not necessary when deploying to a Java EE or Jakarta EE 8 or lower application server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/jna-4.4.0.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, required if you want to use Type 2 native, local or embedded protocols</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="jb3-distribution-maven"><a class="anchor" href="#jb3-distribution-maven"></a>Maven</h5>
<div class="paragraph">
<p>Alternatively, you can use maven to automatically download Jaybird and its dependencies.</p>
</div>
<div class="paragraph">
<p>Jaybird 3 is available from Maven central:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
groupId
</td>
<td class="hdlist2">
<p><code>org.firebirdsql.jdbc</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
artifactId
</td>
<td class="hdlist2">
<p><code>jaybird-jdkXX</code> (where <code>XX</code> is <code>17</code> (Java 7) or <code>18</code> (Java 8))</p>
</td>
</tr>
<tr>
<td class="hdlist1">
version
</td>
<td class="hdlist2">
<p><code>3.0.12</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird-jdk18&lt;/artifactId&gt;
  &lt;version&gt;3.0.12&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Maven definition of Jaybird depends on antlr-runtime by default.</p>
</div>
<div class="paragraph">
<p>If your application is deployed to a Java EE or Jakarta EE 8 or lower application server, you will need to exclude the <code>javax.resource:connector-api</code> dependency, and add it as a provided dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird-jdk18&lt;/artifactId&gt;
  &lt;version&gt;3.0.12&lt;/version&gt;
  &lt;exclusions&gt;
    &lt;exclusion&gt;
      &lt;groupId&gt;javax.resource&lt;/groupId&gt;
      &lt;artifactId&gt;connector-api&lt;/artifactId&gt;
    &lt;/exclusion&gt;
  &lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;javax.resource&lt;/groupId&gt;
  &lt;artifactId&gt;connector-api&lt;/artifactId&gt;
  &lt;version&gt;1.5&lt;/version&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use Type 2 support (native, local or embedded), you need to
explicitly include JNA as a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;
  &lt;artifactId&gt;jna&lt;/artifactId&gt;
  &lt;version&gt;4.4.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For native and local you can use the <code>org.firebirdsql.jdbc:fbclient</code> dependency to provide the client library.
See <a href="#driver-native-maven">Maven dependency for native client</a> for details.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="jb22"><a class="anchor" href="#jb22"></a>F.5. Jaybird 2.2</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Jaybird 2.2 is end-of-life and will not receive further updates.
We recommend upgrading to <a href="#jb5">Jaybird 5</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="jb22-java"><a class="anchor" href="#jb22-java"></a>F.5.1. Java support</h4>
<div class="paragraph">
<p>Jaybird 2.2 supports Java 6 (JDBC 4.0), Java 7 (JDBC 4.1) and Java 8 (JDBC 4.2).
Java 5 support was dropped in Jaybird 2.2.8.</p>
</div>
<div class="paragraph">
<p>For compatibility with Java 9 modules, version 2.2.14 introduced the automatic module name <code>org.firebirdsql.jaybird</code>.
This guarantees a stable module name for Jaybird, and allows for future modularization of Jaybird.</p>
</div>
</div>
<div class="sect3">
<h4 id="jb22-firebird"><a class="anchor" href="#jb22-firebird"></a>F.5.2. Firebird support</h4>
<div class="paragraph">
<p>Jaybird 2.2 supports Firebird 1.0 and higher, but is only tested with Firebird 2.5 and 3.0.</p>
</div>
<div class="paragraph">
<p>Connecting to Firebird 3.0 requires some additional configuration, see <a href="https://github.com/FirebirdSQL/jaybird/wiki/Jaybird-and-Firebird-3" target="_blank" rel="noopener">Jaybird and Firebird 3.0</a> for details.</p>
</div>
<div class="paragraph">
<p>Firebird 4.0 is not formally supported in Jaybird 2.2.x, although connecting and most functionality will work.
We suggest that you use Jaybird 3.x or higher for Firebird 4.0.
Support for newer data types like <code>DECFLOAT</code> and <code>NUMERIC</code>/<code>DECIMAL</code> with precision higher than 18 will be introduced in Jaybird 4.</p>
</div>
<div class="paragraph">
<p>The Type 2 and embedded server JDBC drivers require the appropriate JNI library.
Precompiled JNI binaries for Windows and Linux platforms are shipped in the default installation, other platforms require porting/building the JNI library for that platform.</p>
</div>
</div>
<div class="sect3">
<h4 id="jb22-spec"><a class="anchor" href="#jb22-spec"></a>F.5.3. Supported Specifications</h4>
<div class="paragraph">
<p>Jaybird 2.2 supports the following specifications:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Specification</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Driver does not fully support JDBC 4.2 features, but implements large update count methods by calling the normal update count methods, and methods with <code>SQLType</code> by calling methods accepting the <code>java.sql.Types</code> integer value. Supports new <code>java.time</code> classes with some caveats.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Driver implements all JDBC 4.1 methods added to existing interfaces.
The driver explicitly supports <code>closeOnCompletion</code>, most other methods introduced with JDBC 4.1 throw <code>SQLFeatureNotSupportedException</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC 4.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Driver implements all JDBC 4.0 interfaces and supports exception chaining.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JCA 1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jaybird provides an implementation of <code>javax.resource.spi.ManagedConnectionFactory</code> and related interfaces.
CCI interfaces are not supported.
Although Jaybird 2.2 depends on the JCA 1.5 classes, JCA 1.5 compatibility is currently not guaranteed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JTA</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The driver provides an implementation of the <code>javax.transaction.xa.XAResource</code> interface via the JCA
framework and a <code>javax.sql.XADataSource</code> implementation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="jb22-distribution"><a class="anchor" href="#jb22-distribution"></a>F.5.4. Distribution</h4>
<div class="paragraph">
<p>The Jaybird driver has compile-time and run-time dependencies to JCA 1.5.
Additionally, if the antlr-runtime classes are found in the class path, it is possible to use generated key retrieval.</p>
</div>
<div class="sect4">
<h5 id="jb22-distribution-package"><a class="anchor" href="#jb22-distribution-package"></a>Distribution package</h5>
<div class="paragraph">
<p>The latest version of Jaybird can be downloaded from <a href="https://firebirdsql.org/en/jdbc-driver/" class="bare">https://firebirdsql.org/en/jdbc-driver/</a></p>
</div>
<div class="paragraph">
<p>The following files can be found in the distribution package:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">File name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-2.2.15.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An archive containing the JDBC driver, the JCA connection manager, the Services API and event
management classes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jaybird-full-2.2.15.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Same as above, but including the JCA 1.5 dependency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/antlr-runtime-3.4.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, required if you want to use <code>getGeneratedKeys</code> support</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/connector-api-1.5.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required dependency;
part of <code>jaybird-full</code>, not necessary when deploying to a Java EE or Jakarta EE 8 or lower application server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/log4j-core.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional dependency, core Log4J classes that provide logging.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Jaybird 2.2 has compile-time and run-time dependencies on the JCA 1.5 classes.
Additionally, if Log4J classes are found in the class path, it is possible to enable extensive logging inside the driver.
If the ANTLR runtime classes are absent, the generated keys functionality will not be available.</p>
</div>
<div class="paragraph">
<p>Native dependencies (required only for Type 2 and Embedded):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jaybird22.dll</code>&#8201;&#8212;&#8201;Windows 32-bit</p>
</li>
<li>
<p><code>jaybird22_x64.dll</code>&#8201;&#8212;&#8201;Windows 64-bit</p>
</li>
<li>
<p><code>libjaybird22.so</code>&#8201;&#8212;&#8201;Linux 32-bit (x86)</p>
</li>
<li>
<p><code>libjaybird22_x64.so</code>&#8201;&#8212;&#8201;Linux 64-bit (AMD/Intel 64)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Windows DLLs have been built with Microsoft Visual Studio 2010 SP1.
To use the native or embedded driver, you will need to install the Microsoft Visual C++ 2010 SP 1 redistributable.</p>
</div>
</div>
<div class="sect4">
<h5 id="jb22-distribution-maven"><a class="anchor" href="#jb22-distribution-maven"></a>Maven</h5>
<div class="paragraph">
<p>Alternatively, you can use maven to automatically download Jaybird and its dependencies.</p>
</div>
<div class="paragraph">
<p>Jaybird 2.2 is available from Maven central:</p>
</div>
<div class="paragraph">
<p>Groupid: <code>org.firebirdsql.jdbc</code>,<br>
Artifactid: <code>jaybird-jdkXX</code> (where <code>XX</code> is <code>16</code>, <code>17</code> or <code>18</code>).<br>
Version: <code>2.2.15</code></p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird-jdk18&lt;/artifactId&gt;
  &lt;version&gt;2.2.15&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Maven definition of Jaybird depends on antlr-runtime by default.</p>
</div>
<div class="paragraph">
<p>If your application is deployed to a Java EE or Jakarta EE 8 or lower application server, you will need to exclude the <code>javax.resource:connector-api</code> dependency, and add it as a provided dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.firebirdsql.jdbc&lt;/groupId&gt;
  &lt;artifactId&gt;jaybird-jdk18&lt;/artifactId&gt;
  &lt;version&gt;2.2.15&lt;/version&gt;
  &lt;exclusions&gt;
    &lt;exclusion&gt;
      &lt;groupId&gt;javax.resource&lt;/groupId&gt;
      &lt;artifactId&gt;connector-api&lt;/artifactId&gt;
    &lt;/exclusion&gt;
  &lt;/exclusions&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
  &lt;groupId&gt;javax.resource&lt;/groupId&gt;
  &lt;artifactId&gt;connector-api&lt;/artifactId&gt;
  &lt;version&gt;1.5&lt;/version&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="license"><a class="anchor" href="#license"></a>Appendix G: License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The contents of this Documentation are subject to the Public Documentation License Version 1.0 (the "License");
you may only use this Documentation if you comply with the terms of this License.
A copy of the License is available at <a href="https://www.firebirdsql.org/en/public-documentation-license/" class="bare">https://www.firebirdsql.org/en/public-documentation-license/</a>.</p>
</div>
<div class="paragraph">
<p>The Original Documentation is Jaybird 2.1 JDBC driver Java Programmer&#8217;s Manual.</p>
</div>
<div class="paragraph">
<p>The Initial Writer of the Original Documentation is Roman Rokytskyy Copyright &#169; 2004-2008.
All Rights Reserved.
(Initial Writer contact(s): <a href="mailto:roman@rokytskyy.de">roman@rokytskyy.de</a>).</p>
</div>
<div class="paragraph">
<p>Contributor(s): Mark Rotteveel.</p>
</div>
<div class="paragraph">
<p>Portions created by Mark Rotteveel are Copyright &#169; 2014-2024.
All Rights Reserved.
(Contributor contact(s): <a href="mailto:mrotteveel@users.sourceforge.net">mrotteveel@users.sourceforge.net</a>).</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. For those interested in software archaeology, you can find the open sourced Interclient sources archived on <a href="https://github.com/FirebirdSQL/x-cvs-interclient" class="bare">https://github.com/FirebirdSQL/x-cvs-interclient</a>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. it is possible sometimes X/Open SQLstates are used
</div>
<div class="footnote" id="_footnotedef_3">
<a href="#_footnoteref_3">3</a>. excluding those defined for <code>javax.sql.rowset</code>
</div>
<div class="footnote" id="_footnotedef_4">
<a href="#_footnoteref_4">4</a>. This is an implementation detail and may change in the future to throw an exception <em>before</em> execution
</div>
<div class="footnote" id="_footnotedef_5">
<a href="#_footnoteref_5">5</a>. This term is used to group all statements that are used to manipulate database schema, i.e. creation of tables, indices, views, etc.
</div>
<div class="footnote" id="_footnotedef_6">
<a href="#_footnoteref_6">6</a>. escape syntax in limited form also works for <code>Statement</code> and <code>PreparedStatement</code>
</div>
<div class="footnote" id="_footnotedef_7">
<a href="#_footnoteref_7">7</a>. Additionally, before the InterBase was open-sourced, this allowed application developers to create multi-threaded application without need to purchase additional user licenses.
</div>
<div class="footnote" id="_footnotedef_8">
<a href="#_footnoteref_8">8</a>. Other cases, e.g. closing the statement object or the connection object will still ensure that the result set object is closed. If you need result sets that can be "detached" from the statement object that created them, please check the <code>javax.sql.RowSet</code> implementations.
</div>
<div class="footnote" id="_footnotedef_9">
<a href="#_footnoteref_9">9</a>. This approach follows the two-phase locking protocol, where all locks are acquired on the beginning of the transaction and are released only when transaction is finished.
</div>
<div class="footnote" id="_footnotedef_10">
<a href="#_footnoteref_10">10</a>. The output of the service is always transferred over the network regardless whether the logger property is set or not. In addition to providing a possibility to the user to track the service progress, it acts also as a signal of operation completion&#8201;&#8212;&#8201;in this case the Java code will receive an EOF marker.
</div>
<div class="footnote" id="_footnotedef_11">
<a href="#_footnoteref_11">11</a>. Cooperative garbage collection can be switched off in SuperServer architecture with configuration option &#8220;<code>GCPolicy</code>&#8221;. It can&#8217;t be switched off in ClassicServer and SuperClassic architectures.
</div>
<div class="footnote" id="_footnotedef_12">
<a href="#_footnoteref_12">12</a>. All versions of Firebird upto 2.5 allow to define validity constraints despite the table(s) contain data that do not satisfy them.  Only the new records will be validated, and it is responsibility of the database administrator to ensure the validity of existing ones.
</div>
<div class="footnote" id="_footnotedef_13">
<a href="#_footnoteref_13">13</a>. The class implementation is a simple bean publishing the properties via getters and setters. You can replace it with any other implementation of the <code>User</code> interface.
</div>
<div class="footnote" id="_footnotedef_14">
<a href="#_footnoteref_14">14</a>. Until Firebird 2.0 adding a foreign key constraint required exclusive access to the database.
</div>
<div class="footnote" id="_footnotedef_15">
<a href="#_footnoteref_15">15</a>. Currently possible only on Unix platforms by using NFS shares.
</div>
<div class="footnote" id="_footnotedef_16">
<a href="#_footnoteref_16">16</a>. Another reason for limbo transactions are multi-database transactions which can be initiated via the native Firebird API. However, since Jaybird does not provide methods to initiate them, we do not consider them in this manual.
</div>
<div class="footnote" id="_footnotedef_17">
<a href="#_footnoteref_17">17</a>. For more information please read the following article by Ann Harrison, <a href="https://web.archive.org/web/20231004130607/https://www.ibphoenix.com/resources/documents/design/doc_21" target="_blank" rel="noopener">&#8220;Firebird for the Database Expert: Episode 4 - OAT, OIT, &amp; Sweep&#8221;</a>
</div>
<div class="footnote" id="_footnotedef_18">
<a href="#_footnoteref_18">18</a>. For example, the effective size for 100 applications subscribed for 100 different events is about 40k in memory.
</div>
<div class="footnote" id="_footnotedef_19">
<a href="#_footnoteref_19">19</a>. Internally <code>SrpNNN</code> continues to use SHA-1, only the client-proof applies the SHA-NNN hash. See also <a href="https://github.com/FirebirdSQL/firebird/issues/6051" target="_blank" rel="noopener">firebird#6051</a>).
</div>
<div class="footnote" id="_footnotedef_20">
<a href="#_footnoteref_20">20</a>. since Firebird 3.0.2, version 13 for 3.0.0 and 3.0.1
</div>
<div class="footnote" id="_footnotedef_21">
<a href="#_footnoteref_21">21</a>. Jaybird has no protocol 14 implementation
</div>
<div class="footnote" id="_footnotedef_22">
<a href="#_footnoteref_22">22</a>. Jaybird has no protocol 17 implementation
</div>
<div class="footnote" id="_footnotedef_23">
<a href="#_footnoteref_23">23</a>. since Firebird 5.0.3, version 18 for 5.0.0 - 5.0.2
</div>
<div class="footnote" id="_footnotedef_24">
<a href="#_footnoteref_24">24</a>. from <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Connection.html#setClientInfo(java.lang.String,java.lang.String)" target="_blank" rel="noopener"><code>java.sql.Connection#setClientInfo(String,String)</code></a>
</div>
<div class="footnote" id="_footnotedef_25">
<a href="#_footnoteref_25">25</a>. In the current implementation, Jaybird never has warnings on <code>ResultSet</code>
</div>
<div class="footnote" id="_footnotedef_26">
<a href="#_footnoteref_26">26</a>. This is not the case for the unsupported Firebird 1.0 and 1.5 versions. There this will behave similar to <code>disabled</code>, and you will need to explicitly specify <code>ignored</code> instead to get this behaviour.
</div>
<div class="footnote" id="_footnotedef_27">
<a href="#_footnoteref_27">27</a>. This behaviour may change in a future version to the equivalent of <code>setLong((long) value)</code>
</div>
<div class="footnote" id="_footnotedef_28">
<a href="#_footnoteref_28">28</a>. This behaviour may change in a future version to the equivalent of <code>getLong(..) == 1L</code>
</div>
<div class="footnote" id="_footnotedef_29">
<a href="#_footnoteref_29">29</a>. This behaviour may change in a future version to use <code>compareTo</code> or the equivalent of <code>getLong(..) == 1L</code> instead
</div>
<div class="footnote" id="_footnotedef_30">
<a href="#_footnoteref_30">30</a>. The <code>DECFLOAT</code> decimal format stores values as sign, integral number with 16 or 34 digits, and an exponent. This is similar to <code>java.math.BigDecimal</code>, but instead of an exponent, that uses the concept <code>scale</code>, where <code>scale = -1 * exponent</code>.
</div>
<div class="footnote" id="_footnotedef_31">
<a href="#_footnoteref_31">31</a>. In practice, values with precision 19 are possible up to the maximum value of the <code>BIGINT</code> backing the value.
</div>
<div class="footnote" id="_footnotedef_32">
<a href="#_footnoteref_32">32</a>. In practice, values with precision 39 are possible up to the maximum value of the <code>INT128</code> backing the value.
</div>
<div class="footnote" id="_footnotedef_33">
<a href="#_footnoteref_33">33</a>. The maximum is decided server-side, and may change in future Firebird versions.
</div>
<div class="footnote" id="_footnotedef_34">
<a href="#_footnoteref_34">34</a>. A Firebird <code>REAL</code> is an alias for <code>FLOAT</code> and by default handled as <code>java.sql.Types.FLOAT</code>
</div>
<div class="footnote" id="_footnotedef_35">
<a href="#_footnoteref_35">35</a>. JDBC does not yet define a <code>java.sql.Types</code> code for <code>DECFLOAT</code>
</div>
<div class="footnote" id="_footnotedef_36">
<a href="#_footnoteref_36">36</a>. On Windows this library is represented by <code>fbintl.dll</code>, on Linux, <code>libfbintl.so</code>
</div>
<div class="footnote" id="_footnotedef_37">
<a href="#_footnoteref_37">37</a>. The default character set simplifies the explanation, since we do not have to consider the cases when different columns with different character sets are used within the same connection. The statements made here, obviously, can be applied to those cases as well.
</div>
<div class="footnote" id="_footnotedef_38">
<a href="#_footnoteref_38">38</a>. See <a href="https://github.com/FirebirdSQL/jaybird/wiki" class="bare">https://github.com/FirebirdSQL/jaybird/wiki</a> for configuration examples of the most popular application servers.
</div>
<div class="footnote" id="_footnotedef_39">
<a href="#_footnoteref_39">39</a>. On Windows platform it is represented by the <code>ib_udf.dll</code>, on Linux it is represented by the <code>libib_udf.so</code>.
</div>
<div class="footnote" id="_footnotedef_40">
<a href="#_footnoteref_40">40</a>. Maps to UDF <code>RAND()</code> taking no parameters. The random number generator is seeded by the current time. There is no function where the seed can be specified.
</div>
<div class="footnote" id="_footnotedef_41">
<a href="#_footnoteref_41">41</a>. Second parameter is ignored in Jaybird 3 and earlier, supported in Jaybird 4 and higher
</div>
<div class="footnote" id="_footnotedef_42">
<a href="#_footnoteref_42">42</a>. Second parameter ignored in Jaybird 3 and earlier, supported in Jaybird 4 and higher
</div>
<div class="footnote" id="_footnotedef_43">
<a href="#_footnoteref_43">43</a>. In Jaybird 3, the second parameter is ignored, in Jaybird 4 the <code>CHARACTERS</code> parameter only determines that characters are counted, the ignored blanks (space (0x20) or NUL (0x00)) are not determined by the parameter but by the underlying type
</div>
<div class="footnote" id="_footnotedef_44">
<a href="#_footnoteref_44">44</a>. The trailing blanks are also counted, only works if second parameter is omitted
</div>
<div class="footnote" id="_footnotedef_45">
<a href="#_footnoteref_45">45</a>. The <code>OCTETS</code> parameter only determines that bytes are counted, the ignored blanks (space (0x20) or NUL (0x00)) are not determined by the parameter but by the underlying type
</div>
<div class="footnote" id="_footnotedef_46">
<a href="#_footnoteref_46">46</a>. Parameter <code>OCTETS</code> is ignored
</div>
<div class="footnote" id="_footnotedef_47">
<a href="#_footnoteref_47">47</a>. Always returns English full names (e.g. &#8220;Sunday&#8221;)
</div>
<div class="footnote" id="_footnotedef_48">
<a href="#_footnoteref_48">48</a>. Always returns English full names (e.g. &#8220;January&#8221;)
</div>
<div class="footnote" id="_footnotedef_49">
<a href="#_footnoteref_49">49</a>. Either the full path of the database or the alias. See documentation of <code>RDB$GET_CONTEXT('SYSTEM', 'DB_NAME')</code> for details.
</div>
<div class="footnote" id="_footnotedef_50">
<a href="#_footnoteref_50">50</a>. The Jaybird 4 support for Java 21 comes with one caveat: some tests weren&#8217;t run due to lack of support for Java 21 in test libraries used for testing Jaybird, and we did not want to invest time to upgrade or replace those libraries.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-09-27 14:45:04 UTC
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js"></script>
<script>
    // https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.12.0/tocbot.min.js
    !function(e){var t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(o,l,function(t){return e[t]}.bind(null,l));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(o){var l,r,i;!function(o,s){r=[],l=function(e){"use strict";var t,o,l,r=n(2),i={},s={},c=n(3),a=n(4),u=n(5),d=!!(e&&e.document&&e.document.querySelector&&e.addEventListener);if("undefined"==typeof window&&!d)return;var f=Object.prototype.hasOwnProperty;function m(e,t,n){var o,l;return t||(t=250),function(){var r=n||this,i=+new Date,s=arguments;o&&i<o+t?(clearTimeout(l),l=setTimeout(function(){o=i,e.apply(r,s)},t)):(o=i,e.apply(r,s))}}return s.destroy=function(){if(!i.skipRendering)try{document.querySelector(i.tocSelector).innerHTML=""}catch(e){console.warn("Element not found: "+i.tocSelector)}i.scrollContainer&&document.querySelector(i.scrollContainer)?(document.querySelector(i.scrollContainer).removeEventListener("scroll",this._scrollListener,!1),document.querySelector(i.scrollContainer).removeEventListener("resize",this._scrollListener,!1),t&&document.querySelector(i.scrollContainer).removeEventListener("click",this._clickListener,!1)):(document.removeEventListener("scroll",this._scrollListener,!1),document.removeEventListener("resize",this._scrollListener,!1),t&&document.removeEventListener("click",this._clickListener,!1))},s.init=function(e){if(d&&(i=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)f.call(n,o)&&(e[o]=n[o])}return e}(r,e||{}),this.options=i,this.state={},i.scrollSmooth&&(i.duration=i.scrollSmoothDuration,i.offset=i.scrollSmoothOffset,s.scrollSmooth=n(6).initSmoothScrolling(i)),t=c(i),o=a(i),this._buildHtml=t,this._parseContent=o,s.destroy(),null!==(l=o.selectHeadings(i.contentSelector,i.headingSelector)))){var h=o.nestHeadingsArray(l).nest;i.skipRendering||t.render(i.tocSelector,h),this._scrollListener=m(function(e){t.updateToc(l),!i.disableTocScrollSync&&u(i);var n=e&&e.target&&e.target.scrollingElement&&0===e.target.scrollingElement.scrollTop;(e&&(0===e.eventPhase||null===e.currentTarget)||n)&&(t.updateToc(l),i.scrollEndCallback&&i.scrollEndCallback(e))},i.throttleTimeout),this._scrollListener(),i.scrollContainer&&document.querySelector(i.scrollContainer)?(document.querySelector(i.scrollContainer).addEventListener("scroll",this._scrollListener,!1),document.querySelector(i.scrollContainer).addEventListener("resize",this._scrollListener,!1)):(document.addEventListener("scroll",this._scrollListener,!1),document.addEventListener("resize",this._scrollListener,!1));var p=null;return this._clickListener=m(function(e){i.scrollSmooth&&t.disableTocAnimation(e),t.updateToc(l),p&&clearTimeout(p),p=setTimeout(function(){t.enableTocAnimation()},i.scrollSmoothDuration)},i.throttleTimeout),i.scrollContainer&&document.querySelector(i.scrollContainer)?document.querySelector(i.scrollContainer).addEventListener("click",this._clickListener,!1):document.addEventListener("click",this._clickListener,!1),this}},s.refresh=function(e){s.destroy(),s.init(e||this.options)},e.tocbot=s,s}(o),void 0===(i="function"==typeof l?l.apply(t,r):l)||(e.exports=i)}(void 0!==o?o:this.window||this.global)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports={tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h1, h2, h3",ignoreSelector:".js-toc-ignore",hasInnerContainers:!1,linkClass:"toc-link",extraLinkClasses:"",activeLinkClass:"is-active-link",listClass:"toc-list",extraListClasses:"",isCollapsedClass:"is-collapsed",collapsibleClass:"is-collapsible",listItemClass:"toc-list-item",activeListItemClass:"is-active-li",collapseDepth:0,scrollSmooth:!0,scrollSmoothDuration:420,scrollSmoothOffset:0,scrollEndCallback:function(e){},headingsOffset:1,throttleTimeout:50,positionFixedSelector:null,positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto",includeHtml:!1,onClick:function(e){},orderedList:!0,scrollContainer:null,skipRendering:!1,headingLabelCallback:!1,ignoreHiddenElements:!1,headingObjectCallback:null,basePath:"",disableTocScrollSync:!1}},function(e,t){e.exports=function(e){var t=[].forEach,n=[].some,o=document.body,l=!0,r=" ";function i(n,o){var l=o.appendChild(function(n){var o=document.createElement("li"),l=document.createElement("a");e.listItemClass&&o.setAttribute("class",e.listItemClass);e.onClick&&(l.onclick=e.onClick);e.includeHtml&&n.childNodes.length?t.call(n.childNodes,function(e){l.appendChild(e.cloneNode(!0))}):l.textContent=n.textContent;return l.setAttribute("href",e.basePath+"#"+n.id),l.setAttribute("class",e.linkClass+r+"node-name--"+n.nodeName+r+e.extraLinkClasses),o.appendChild(l),o}(n));if(n.children.length){var c=s(n.isCollapsed);n.children.forEach(function(e){i(e,c)}),l.appendChild(c)}}function s(t){var n=e.orderedList?"ol":"ul",o=document.createElement(n),l=e.listClass+r+e.extraListClasses;return t&&(l+=r+e.collapsibleClass,l+=r+e.isCollapsedClass),o.setAttribute("class",l),o}return{enableTocAnimation:function(){l=!0},disableTocAnimation:function(t){var n=t.target||t.srcElement;"string"==typeof n.className&&-1!==n.className.indexOf(e.linkClass)&&(l=!1)},render:function(e,t){var n=s(!1);t.forEach(function(e){i(e,n)});var o=document.querySelector(e);if(null!==o)return o.firstChild&&o.removeChild(o.firstChild),0===t.length?o:o.appendChild(n)},updateToc:function(i){var s;s=e.scrollContainer&&document.querySelector(e.scrollContainer)?document.querySelector(e.scrollContainer).scrollTop:document.documentElement.scrollTop||o.scrollTop,e.positionFixedSelector&&function(){var t;t=e.scrollContainer&&document.querySelector(e.scrollContainer)?document.querySelector(e.scrollContainer).scrollTop:document.documentElement.scrollTop||o.scrollTop;var n=document.querySelector(e.positionFixedSelector);"auto"===e.fixedSidebarOffset&&(e.fixedSidebarOffset=document.querySelector(e.tocSelector).offsetTop),t>e.fixedSidebarOffset?-1===n.className.indexOf(e.positionFixedClass)&&(n.className+=r+e.positionFixedClass):n.className=n.className.split(r+e.positionFixedClass).join("")}();var c,a=i;if(l&&null!==document.querySelector(e.tocSelector)&&a.length>0){n.call(a,function(t,n){return function t(n){var o=0;return n!==document.querySelector(e.contentSelector&&null!=n)&&(o=n.offsetTop,e.hasInnerContainers&&(o+=t(n.offsetParent))),o}(t)>s+e.headingsOffset+10?(c=a[0===n?n:n-1],!0):n===a.length-1?(c=a[a.length-1],!0):void 0});var u=document.querySelector(e.tocSelector).querySelectorAll("."+e.linkClass);t.call(u,function(t){t.className=t.className.split(r+e.activeLinkClass).join("")});var d=document.querySelector(e.tocSelector).querySelectorAll("."+e.listItemClass);t.call(d,function(t){t.className=t.className.split(r+e.activeListItemClass).join("")});var f=document.querySelector(e.tocSelector).querySelector("."+e.linkClass+".node-name--"+c.nodeName+'[href="'+e.basePath+"#"+c.id.replace(/([ #;&,.+*~':"!^$[\]()=>|/@])/g,"\\$1")+'"]');-1===f.className.indexOf(e.activeLinkClass)&&(f.className+=r+e.activeLinkClass);var m=f.parentNode;m&&-1===m.className.indexOf(e.activeListItemClass)&&(m.className+=r+e.activeListItemClass);var h=document.querySelector(e.tocSelector).querySelectorAll("."+e.listClass+"."+e.collapsibleClass);t.call(h,function(t){-1===t.className.indexOf(e.isCollapsedClass)&&(t.className+=r+e.isCollapsedClass)}),f.nextSibling&&-1!==f.nextSibling.className.indexOf(e.isCollapsedClass)&&(f.nextSibling.className=f.nextSibling.className.split(r+e.isCollapsedClass).join("")),function t(n){return-1!==n.className.indexOf(e.collapsibleClass)&&-1!==n.className.indexOf(e.isCollapsedClass)?(n.className=n.className.split(r+e.isCollapsedClass).join(""),t(n.parentNode.parentNode)):n}(f.parentNode.parentNode)}}}}},function(e,t){e.exports=function(e){var t=[].reduce;function n(e){return e[e.length-1]}function o(t){if(!(t instanceof window.HTMLElement))return t;if(e.ignoreHiddenElements&&(!t.offsetHeight||!t.offsetParent))return null;var n={id:t.id,children:[],nodeName:t.nodeName,headingLevel:function(e){return+e.nodeName.split("H").join("")}(t),textContent:e.headingLabelCallback?String(e.headingLabelCallback(t.textContent)):t.textContent.trim()};return e.includeHtml&&(n.childNodes=t.childNodes),e.headingObjectCallback?e.headingObjectCallback(n,t):n}return{nestHeadingsArray:function(l){return t.call(l,function(t,l){var r=o(l);return r&&function(t,l){for(var r=o(t),i=r.headingLevel,s=l,c=n(s),a=i-(c?c.headingLevel:0);a>0;)(c=n(s))&&void 0!==c.children&&(s=c.children),a--;i>=e.collapseDepth&&(r.isCollapsed=!0),s.push(r)}(r,t.nest),t},{nest:[]})},selectHeadings:function(t,n){var o=n;e.ignoreSelector&&(o=n.split(",").map(function(t){return t.trim()+":not("+e.ignoreSelector+")"}));try{return document.querySelector(t).querySelectorAll(o)}catch(e){return console.warn("Element not found: "+t),null}}}}},function(e,t){e.exports=function(e){var t=document.querySelector(e.tocSelector);if(t&&t.scrollHeight>t.clientHeight){var n=t.querySelector("."+e.activeListItemClass);n&&(t.scrollTop=n.offsetTop)}}},function(e,t){function n(e,t){var n=window.pageYOffset,o={duration:t.duration,offset:t.offset||0,callback:t.callback,easing:t.easing||d},l=document.querySelector('[id="'+decodeURI(e).split("#").join("")+'"]'),r=typeof e==="string"?o.offset+(e?l&&l.getBoundingClientRect().top||0:-(document.documentElement.scrollTop||document.body.scrollTop)):e,i=typeof o.duration==="function"?o.duration(r):o.duration,s,c;function a(e){c=e-s;window.scrollTo(0,o.easing(c,n,r,i));if(c<i){requestAnimationFrame(a)}else{u()}}function u(){if(window.scrollTo(0,n+r),"function"==typeof o.callback){o.callback()}}function d(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}requestAnimationFrame(function(e){s=e;a(e)})}t.initSmoothScrolling=function(e){document.documentElement.style;var t=e.duration,o=e.offset,l=location.hash?r(location.href):location.href;function r(e){return e.slice(0,e.lastIndexOf("#"))}!function(){document.body.addEventListener("click",function(i){if(!function(e){return"a"===e.tagName.toLowerCase()&&(e.hash.length>0||"#"===e.href.charAt(e.href.length-1))&&(r(e.href)===l||r(e.href)+"#"===l)}(i.target)||i.target.className.indexOf("no-smooth-scroll")>-1||"#"===i.target.href.charAt(i.target.href.length-2)&&"!"===i.target.href.charAt(i.target.href.length-1)||-1===i.target.className.indexOf(e.linkClass))return;n(i.target.hash,{duration:t,offset:o,callback:function(){!function(e){var t=document.getElementById(e.substring(1));t&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())}(i.target.hash)}})},!1)}()}}]);
</script>
<script>
    /* Tocbot dynamic TOC, based on https://github.com/asciidoctor/asciidoctor/issues/699#issuecomment-321066006 */
    var oldtoc = document.getElementById('toctitle').nextElementSibling;
    var newtoc = document.createElement('div');
    newtoc.setAttribute('id', 'tocbot');
    newtoc.setAttribute('class', 'js-toc');
    oldtoc.parentNode.replaceChild(newtoc, oldtoc);
    tocbot.init({ contentSelector: '#content',
        headingSelector: 'h1, h2, h3, h4',
        ignoreSelector: '.float',
        scrollSmooth: false });
    var handleTocOnResize = function() {
        var width = window.innerWidth
            || document.documentElement.clientWidth
            || document.body.clientWidth;
        if (width < 768) {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4',
                ignoreSelector: '.float',
                collapseDepth: 6,
                activeLinkClass: 'ignoreactive',
                throttleTimeout: 1000,
                scrollSmooth: false });
        }
        else {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4',
                ignoreSelector: '.float',
                scrollSmooth: false });
        }
    };
    window.addEventListener('resize', handleTocOnResize);
    handleTocOnResize();
</script>
</body>
</html>